






<!DOCTYPE html>
<html lang="en" data-color-mode="dark" data-light-theme="light" data-dark-theme="dark" data-a11y-animated-images="system">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">
  <link rel="preconnect" href="https://github.githubassets.com" crossorigin>
  <link rel="preconnect" href="https://avatars.githubusercontent.com">



  <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/dark-0c343b529849.css" /><link data-color-theme="light" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light-719f1193e0c0.css" /><link data-color-theme="dark_dimmed" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_dimmed-f22da508b62a.css" /><link data-color-theme="dark_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_high_contrast-188ef1de59e6.css" /><link data-color-theme="dark_colorblind" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_colorblind-bc6bf4eea850.css" /><link data-color-theme="light_colorblind" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_colorblind-527658dec362.css" /><link data-color-theme="light_high_contrast" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_high_contrast-c7a7fe0cd8ec.css" /><link data-color-theme="light_tritanopia" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/light_tritanopia-6aa855bdae0f.css" /><link data-color-theme="dark_tritanopia" crossorigin="anonymous" media="all" rel="stylesheet" data-href="https://github.githubassets.com/assets/dark_tritanopia-6aa5e25aacc0.css" />
  
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/primer-031a7fd7c6cb.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/global-735461f76c33.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/github-b351ad9a2d52.css" />
  <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/code-356644123695.css" />

    <meta name="optimizely-datafile" content="{&quot;groups&quot;: [], &quot;environmentKey&quot;: &quot;production&quot;, &quot;rollouts&quot;: [], &quot;typedAudiences&quot;: [], &quot;projectId&quot;: &quot;16737760170&quot;, &quot;variables&quot;: [], &quot;featureFlags&quot;: [], &quot;experiments&quot;: [], &quot;version&quot;: &quot;4&quot;, &quot;audiences&quot;: [{&quot;conditions&quot;: &quot;[\&quot;or\&quot;, {\&quot;match\&quot;: \&quot;exact\&quot;, \&quot;name\&quot;: \&quot;$opt_dummy_attribute\&quot;, \&quot;type\&quot;: \&quot;custom_attribute\&quot;, \&quot;value\&quot;: \&quot;$opt_dummy_value\&quot;}]&quot;, &quot;id&quot;: &quot;$opt_dummy_audience&quot;, &quot;name&quot;: &quot;Optimizely-Generated Audience for Backwards Compatibility&quot;}], &quot;anonymizeIP&quot;: true, &quot;sdkKey&quot;: &quot;WTc6awnGuYDdG98CYRban&quot;, &quot;attributes&quot;: [{&quot;id&quot;: &quot;16822470375&quot;, &quot;key&quot;: &quot;user_id&quot;}, {&quot;id&quot;: &quot;17143601254&quot;, &quot;key&quot;: &quot;spammy&quot;}, {&quot;id&quot;: &quot;18175660309&quot;, &quot;key&quot;: &quot;organization_plan&quot;}, {&quot;id&quot;: &quot;18813001570&quot;, &quot;key&quot;: &quot;is_logged_in&quot;}, {&quot;id&quot;: &quot;19073851829&quot;, &quot;key&quot;: &quot;geo&quot;}, {&quot;id&quot;: &quot;20175462351&quot;, &quot;key&quot;: &quot;requestedCurrency&quot;}, {&quot;id&quot;: &quot;20785470195&quot;, &quot;key&quot;: &quot;country_code&quot;}, {&quot;id&quot;: &quot;21656311196&quot;, &quot;key&quot;: &quot;opened_downgrade_dialog&quot;}], &quot;botFiltering&quot;: false, &quot;accountId&quot;: &quot;16737760170&quot;, &quot;events&quot;: [{&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;17911811441&quot;, &quot;key&quot;: &quot;hydro_click.dashboard.teacher_toolbox_cta&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18124116703&quot;, &quot;key&quot;: &quot;submit.organizations.complete_sign_up&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18145892387&quot;, &quot;key&quot;: &quot;no_metric.tracked_outside_of_optimizely&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18178755568&quot;, &quot;key&quot;: &quot;click.org_onboarding_checklist.add_repo&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18180553241&quot;, &quot;key&quot;: &quot;submit.repository_imports.create&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18186103728&quot;, &quot;key&quot;: &quot;click.help.learn_more_about_repository_creation&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18188530140&quot;, &quot;key&quot;: &quot;test_event&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18191963644&quot;, &quot;key&quot;: &quot;click.empty_org_repo_cta.transfer_repository&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18195612788&quot;, &quot;key&quot;: &quot;click.empty_org_repo_cta.import_repository&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18210945499&quot;, &quot;key&quot;: &quot;click.org_onboarding_checklist.invite_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18211063248&quot;, &quot;key&quot;: &quot;click.empty_org_repo_cta.create_repository&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18215721889&quot;, &quot;key&quot;: &quot;click.org_onboarding_checklist.update_profile&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18224360785&quot;, &quot;key&quot;: &quot;click.org_onboarding_checklist.dismiss&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18234832286&quot;, &quot;key&quot;: &quot;submit.organization_activation.complete&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18252392383&quot;, &quot;key&quot;: &quot;submit.org_repository.create&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18257551537&quot;, &quot;key&quot;: &quot;submit.org_member_invitation.create&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18259522260&quot;, &quot;key&quot;: &quot;submit.organization_profile.update&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18564603625&quot;, &quot;key&quot;: &quot;view.classroom_select_organization&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18568612016&quot;, &quot;key&quot;: &quot;click.classroom_sign_in_click&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18572592540&quot;, &quot;key&quot;: &quot;view.classroom_name&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18574203855&quot;, &quot;key&quot;: &quot;click.classroom_create_organization&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18582053415&quot;, &quot;key&quot;: &quot;click.classroom_select_organization&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18589463420&quot;, &quot;key&quot;: &quot;click.classroom_create_classroom&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18591323364&quot;, &quot;key&quot;: &quot;click.classroom_create_first_classroom&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18591652321&quot;, &quot;key&quot;: &quot;click.classroom_grant_access&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18607131425&quot;, &quot;key&quot;: &quot;view.classroom_creation&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;18831680583&quot;, &quot;key&quot;: &quot;upgrade_account_plan&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19064064515&quot;, &quot;key&quot;: &quot;click.signup&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19075373687&quot;, &quot;key&quot;: &quot;click.view_account_billing_page&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19077355841&quot;, &quot;key&quot;: &quot;click.dismiss_signup_prompt&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19079713938&quot;, &quot;key&quot;: &quot;click.contact_sales&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19120963070&quot;, &quot;key&quot;: &quot;click.compare_account_plans&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19151690317&quot;, &quot;key&quot;: &quot;click.upgrade_account_cta&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19424193129&quot;, &quot;key&quot;: &quot;click.open_account_switcher&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19520330825&quot;, &quot;key&quot;: &quot;click.visit_account_profile&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19540970635&quot;, &quot;key&quot;: &quot;click.switch_account_context&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19730198868&quot;, &quot;key&quot;: &quot;submit.homepage_signup&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19820830627&quot;, &quot;key&quot;: &quot;click.homepage_signup&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;19988571001&quot;, &quot;key&quot;: &quot;click.create_enterprise_trial&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20036538294&quot;, &quot;key&quot;: &quot;click.create_organization_team&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20040653299&quot;, &quot;key&quot;: &quot;click.input_enterprise_trial_form&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20062030003&quot;, &quot;key&quot;: &quot;click.continue_with_team&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20068947153&quot;, &quot;key&quot;: &quot;click.create_organization_free&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20086636658&quot;, &quot;key&quot;: &quot;click.signup_continue.username&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20091648988&quot;, &quot;key&quot;: &quot;click.signup_continue.create_account&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20103637615&quot;, &quot;key&quot;: &quot;click.signup_continue.email&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20111574253&quot;, &quot;key&quot;: &quot;click.signup_continue.password&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20120044111&quot;, &quot;key&quot;: &quot;view.pricing_page&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20152062109&quot;, &quot;key&quot;: &quot;submit.create_account&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20165800992&quot;, &quot;key&quot;: &quot;submit.upgrade_payment_form&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20171520319&quot;, &quot;key&quot;: &quot;submit.create_organization&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20222645674&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.discuss_your_needs&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20227443657&quot;, &quot;key&quot;: &quot;submit.verify_primary_user_email&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20234607160&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.try_enterprise&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20238175784&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.team&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20239847212&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.continue_free&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20251097193&quot;, &quot;key&quot;: &quot;recommended_plan&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20438619534&quot;, &quot;key&quot;: &quot;click.pricing_calculator.1_member&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20456699683&quot;, &quot;key&quot;: &quot;click.pricing_calculator.15_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20467868331&quot;, &quot;key&quot;: &quot;click.pricing_calculator.10_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20476267432&quot;, &quot;key&quot;: &quot;click.trial_days_remaining&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20476357660&quot;, &quot;key&quot;: &quot;click.discover_feature&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20479287901&quot;, &quot;key&quot;: &quot;click.pricing_calculator.custom_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20481107083&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.apply_teacher_benefits&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20483089392&quot;, &quot;key&quot;: &quot;click.pricing_calculator.5_members&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20484283944&quot;, &quot;key&quot;: &quot;click.onboarding_task&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20484996281&quot;, &quot;key&quot;: &quot;click.recommended_plan_in_signup.apply_student_benefits&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20486713726&quot;, &quot;key&quot;: &quot;click.onboarding_task_breadcrumb&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20490791319&quot;, &quot;key&quot;: &quot;click.upgrade_to_enterprise&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20491786766&quot;, &quot;key&quot;: &quot;click.talk_to_us&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20494144087&quot;, &quot;key&quot;: &quot;click.dismiss_enterprise_trial&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20499722759&quot;, &quot;key&quot;: &quot;completed_all_tasks&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20500710104&quot;, &quot;key&quot;: &quot;completed_onboarding_tasks&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20513160672&quot;, &quot;key&quot;: &quot;click.read_doc&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20516196762&quot;, &quot;key&quot;: &quot;actions_enabled&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20518980986&quot;, &quot;key&quot;: &quot;click.dismiss_trial_banner&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20535446721&quot;, &quot;key&quot;: &quot;click.issue_actions_prompt.dismiss_prompt&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20557002247&quot;, &quot;key&quot;: &quot;click.issue_actions_prompt.setup_workflow&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20595070227&quot;, &quot;key&quot;: &quot;click.pull_request_setup_workflow&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20626600314&quot;, &quot;key&quot;: &quot;click.seats_input&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20642310305&quot;, &quot;key&quot;: &quot;click.decrease_seats_number&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20662990045&quot;, &quot;key&quot;: &quot;click.increase_seats_number&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20679620969&quot;, &quot;key&quot;: &quot;click.public_product_roadmap&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20761240940&quot;, &quot;key&quot;: &quot;click.dismiss_survey_banner&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20767210721&quot;, &quot;key&quot;: &quot;click.take_survey&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20795281201&quot;, &quot;key&quot;: &quot;click.archive_list&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20966790249&quot;, &quot;key&quot;: &quot;contact_sales.submit&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20996500333&quot;, &quot;key&quot;: &quot;contact_sales.existing_customer&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;20996890162&quot;, &quot;key&quot;: &quot;contact_sales.blank_message_field&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21000470317&quot;, &quot;key&quot;: &quot;contact_sales.personal_email&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21002790172&quot;, &quot;key&quot;: &quot;contact_sales.blank_phone_field&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21354412592&quot;, &quot;key&quot;: &quot;click.dismiss_create_readme&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21366102546&quot;, &quot;key&quot;: &quot;click.dismiss_zero_user_content&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21370252505&quot;, &quot;key&quot;: &quot;account_did_downgrade&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21370840408&quot;, &quot;key&quot;: &quot;click.cta_create_readme&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21375451068&quot;, &quot;key&quot;: &quot;click.cta_create_new_repository&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21385390948&quot;, &quot;key&quot;: &quot;click.zero_user_content&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21467712175&quot;, &quot;key&quot;: &quot;click.downgrade_keep&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21484112202&quot;, &quot;key&quot;: &quot;click.downgrade&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21495292213&quot;, &quot;key&quot;: &quot;click.downgrade_survey_exit&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21508241468&quot;, &quot;key&quot;: &quot;click.downgrade_survey_submit&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21512030356&quot;, &quot;key&quot;: &quot;click.downgrade_support&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21539090022&quot;, &quot;key&quot;: &quot;click.downgrade_exit&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21543640644&quot;, &quot;key&quot;: &quot;click_fetch_upstream&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21646510300&quot;, &quot;key&quot;: &quot;click.move_your_work&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21656151116&quot;, &quot;key&quot;: &quot;click.add_branch_protection_rule&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21663860599&quot;, &quot;key&quot;: &quot;click.downgrade_dialog_open&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21687860483&quot;, &quot;key&quot;: &quot;click.learn_about_protected_branches&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21689050333&quot;, &quot;key&quot;: &quot;click.dismiss_protect_this_branch&quot;}, {&quot;experimentIds&quot;: [], &quot;id&quot;: &quot;21864370109&quot;, &quot;key&quot;: &quot;click.sign_in&quot;}], &quot;revision&quot;: &quot;1367&quot;}" />


  <script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/wp-runtime-915f2337d415.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_smoothscroll-polyfill_dist_smoothscroll_js-node_modules_stacktrace-parse-297da6-aaa32681a0b3.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/environment-28efc4e97933.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_selector-observer_dist_index_esm_js-58d8ed1c5cb7.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_delegated-events_dist_index_js-node_modules_github_details-dialog-elemen-63debe-4a2f37f7419e.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_auto-complete-element_dist_index_js-node_modules_github_catalyst_-6afc16-fa4f01d20b81.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_clipboard-copy-element_dist_index_esm_js-node_modules_github_mark-f079ea-692b8e7bcdfd.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_filter-input-element_dist_index_js-node_modules_github_remote-inp-b4f804-93a75d194dbb.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_github_text-ex-3415a8-72e8230400a2.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_primer_view-components_app_components_primer_primer_js-node_modules_gith-6a1af4-18c0f3667dbb.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/github-elements-0712051e5ba7.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/element-registry-710dad493558.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_lit-html_lit-html_js-e954e8c01c93.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js-ac3bd901e26b.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_alive-client_dist-bf5aa2-cb53b34c4b84.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_primer_behaviors_dist_esm_dimensions_js-node_modules_github_hotkey_dist_-9fc4f4-0d86101e85d9.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_remote-form_dist_index_js-node_modules_github_template-parts_lib_-273494-2c3a60646ab4.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_paste-markdown_dist_index_esm_js-node_modules_github_quote-select-84b903-e4c363354688.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_hydro-analytics_ts-app_assets_modules_github_soft-nav_state_ts-ui_p-e465e4-4b5f869b18ef.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_updatable-content_ts-f93b73f25792.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_sticky-scroll-into-view_ts-1f7a0e72d76c.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_keyboard-shortcuts-helper_ts-app_assets_modules_github_be-f5afdb-eed34f623608.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_user-content_ts-app_assets_modules_github_blob-anchor_ts--b39cba-04786f2d5e49.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_behaviors_commenting_edit_ts-app_assets_modules_github_behaviors_ht-83c235-785fd139e4cf.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/behaviors-f9954912d996.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_delegated-events_dist_index_js-node_modules_github_catalyst_lib_index_js-06ff531-596c6d852b03.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/notifications-global-869bd2ddc368.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_optimizely_optimizely-sdk_dist_optimizely_browser_es_min_js-node_modules-77839b-550a5f909f1b.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/optimizely-9af516d3f5fe.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_virtualized-list_es_index_js-node_modules_github_memoize_dist_esm_index_-ced8cc-ffd5e4d6ee17.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_filter-input-element_dist_index_js-node_modules_github_mini-throt-a33094-133bfae4158f.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_github_mini-th-85225b-d5c5eb0b8bb2.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_ref-selector_ts-eb4fbb464325.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/repositories-d397304cee7d.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_clipboard-copy-element_dist_index_esm_js-node_modules_github_remo-8e6bec-4a54aa10cc28.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_scroll-anchoring_di-e71893-c446bed4261b.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_diffs_blob-lines_ts-app_assets_modules_github_diffs_linkable-line-n-dca161-e8e74ef0e251.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/diffs-b77240d2f242.js"></script>
  

  <title>aoc/README.md at master Â· mebeim/aoc</title>



    

  <meta name="request-id" content="06E9:0AAB:B8B31:14221C:63C39924" data-turbo-transient="true" /><meta name="html-safe-nonce" content="1c72dd1c7615d6d74f8c6df62d5f1314c76c81cc331b43d5474d3d002c476139" data-turbo-transient="true" /><meta name="visitor-payload" content="eyJyZWZlcnJlciI6Imh0dHBzOi8vZ2l0aHViLmNvbS9tZWJlaW0vYW9jL3RyZWUvbWFzdGVyLzIwMjIiLCJyZXF1ZXN0X2lkIjoiMDZFOTowQUFCOkI4QjMxOjE0MjIxQzo2M0MzOTkyNCIsInZpc2l0b3JfaWQiOiI2MDc4NzE0NjQ1MDEzMTkxOTk4IiwicmVnaW9uX2VkZ2UiOiJjZW50cmFsaW5kaWEiLCJyZWdpb25fcmVuZGVyIjoiaWFkIn0=" data-turbo-transient="true" /><meta name="visitor-hmac" content="65846fcf3f655afd3e93f7ec3faea7387db0541616430a092b5d53c31e14a57a" data-turbo-transient="true" />


    <meta name="hovercard-subject-tag" content="repository:160425765" data-turbo-transient>


  <meta name="github-keyboard-shortcuts" content="repository,source-code,file-tree" data-turbo-transient="true" />
  

  <meta name="selected-link" value="repo_source" data-turbo-transient>

    <meta name="google-site-verification" content="c1kuD-K2HIVF635lypcsWPoD4kilo5-jA_wBFyT4uMY">
  <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
  <meta name="google-site-verification" content="Apib7-x98H0j5cPqHWwSMm6dNU4GmODRoqxLiDzdx9I">

<meta name="octolytics-url" content="https://collector.github.com/github/collect" /><meta name="octolytics-actor-id" content="8001516" /><meta name="octolytics-actor-login" content="naik-amey" /><meta name="octolytics-actor-hash" content="ff13e343934fdb59c6ae8e3628daf30900cf12de79c83b78de77c477e1159385" />

  <meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-turbo-transient="true" />

  




  

    <meta name="user-login" content="naik-amey">

  <link rel="sudo-modal" href="/sessions/sudo_modal">

    <meta name="viewport" content="width=device-width">
    
      <meta name="description" content="ðŸŽ„ My solutions and walkthroughs for Advent of Code (https://adventofcode.com) and more related stuff. - aoc/README.md at master Â· mebeim/aoc">
      <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <meta property="fb:app_id" content="1401488693436528">
    <meta name="apple-itunes-app" content="app-id=1477376905" />
      <meta name="twitter:image:src" content="https://opengraph.githubassets.com/44970e3fd2cd5be86a094e0f9e22d7f3de6937bfb3ed1c567ac17efb8abc4e0d/mebeim/aoc" /><meta name="twitter:site" content="@github" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:title" content="aoc/README.md at master Â· mebeim/aoc" /><meta name="twitter:description" content="ðŸŽ„ My solutions and walkthroughs for Advent of Code (https://adventofcode.com) and more related stuff. - aoc/README.md at master Â· mebeim/aoc" />
      <meta property="og:image" content="https://opengraph.githubassets.com/44970e3fd2cd5be86a094e0f9e22d7f3de6937bfb3ed1c567ac17efb8abc4e0d/mebeim/aoc" /><meta property="og:image:alt" content="ðŸŽ„ My solutions and walkthroughs for Advent of Code (https://adventofcode.com) and more related stuff. - aoc/README.md at master Â· mebeim/aoc" /><meta property="og:image:width" content="1200" /><meta property="og:image:height" content="600" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="aoc/README.md at master Â· mebeim/aoc" /><meta property="og:url" content="https://github.com/mebeim/aoc" /><meta property="og:description" content="ðŸŽ„ My solutions and walkthroughs for Advent of Code (https://adventofcode.com) and more related stuff. - aoc/README.md at master Â· mebeim/aoc" />
      
    <link rel="assets" href="https://github.githubassets.com/">
      <link rel="shared-web-socket" href="wss://alive.github.com/_sockets/u/8001516/ws?session=eyJ2IjoiVjMiLCJ1Ijo4MDAxNTE2LCJzIjoxMDE4NTAwOTQxLCJjIjoxNzM0MDM0MzIyLCJ0IjoxNjczNzYzMTIwfQ==--5bb6f589636aa4216ead69f35fc430cf31043c1d34db341ad03a00d0a0208cb7" data-refresh-url="/_alive" data-session-id="e00c0da7a6cb8d3187af691272a9a8570ca18c4823283cd504de857f7b02edff">
      <link rel="shared-web-socket-src" href="/assets-cdn/worker/socket-worker-b87581f5816c.js">


        <meta name="hostname" content="github.com">


      <meta name="keyboard-shortcuts-preference" content="all">
      <script type="application/json" id="memex_keyboard_shortcuts_preference">"all"</script>

        <meta name="expected-hostname" content="github.com">

    <meta name="enabled-features" content="TURBO_EXPERIMENT_RISKY,IMAGE_METRIC_TRACKING,GEOJSON_AZURE_MAPS">


  <meta http-equiv="x-pjax-version" content="18ffb100c4174b0254641e5e8740ab8dc2cad01e5ece142b5a06fad52e558f24" data-turbo-track="reload">
  <meta http-equiv="x-pjax-csp-version" content="40aca5a152a13213a876f7628c466cd600db12fb858cdddccc3f1cc387eb7dad" data-turbo-track="reload">
  <meta http-equiv="x-pjax-css-version" content="a66966e4ba21f5287b6a011fa4f0b760137a691f77e2d0ae9c943af4db4dd7ab" data-turbo-track="reload">
  <meta http-equiv="x-pjax-js-version" content="2b649cf1d8800ff7cca90e384b1e9b57b887abbbbcd69756a4bc3c435de560ac" data-turbo-track="reload">

  <meta name="turbo-cache-control" content="no-preview" data-turbo-transient="">

        <meta data-hydrostats="publish">

  <meta name="go-import" content="github.com/mebeim/aoc git https://github.com/mebeim/aoc.git">

  <meta name="octolytics-dimension-user_id" content="14198070" /><meta name="octolytics-dimension-user_login" content="mebeim" /><meta name="octolytics-dimension-repository_id" content="160425765" /><meta name="octolytics-dimension-repository_nwo" content="mebeim/aoc" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="160425765" /><meta name="octolytics-dimension-repository_network_root_nwo" content="mebeim/aoc" />



    <link rel="canonical" href="https://github.com/mebeim/aoc/blob/master/2022/README.md" data-turbo-transient>
  <meta name="turbo-body-classes" content="logged-in env-production page-responsive page-blob">


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <meta name="browser-optimizely-client-errors-url" content="https://api.github.com/_private/browser/optimizely_client/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="alternate icon" class="js-site-favicon" type="image/png" href="https://github.githubassets.com/favicons/favicon.png">
  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">

<meta name="theme-color" content="#1e2327">
<meta name="color-scheme" content="dark light" />


  <link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-in env-production page-responsive page-blob" style="word-wrap: break-word;">
    <div data-turbo-body class="logged-in env-production page-responsive page-blob" style="word-wrap: break-word;">
      


    <div class="position-relative js-header-wrapper ">
      <a href="#start-of-content" class="p-3 color-bg-accent-emphasis color-fg-on-emphasis show-on-focus js-skip-to-content">Skip to content</a>
      <span data-view-component="true" class="progress-pjax-loader Progress position-fixed width-full">
    <span style="width: 0%;" data-view-component="true" class="Progress-item progress-pjax-loader-bar left-0 top-0 color-bg-accent-emphasis"></span>
</span>      
      


        <script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_github_command-pale-4090c9-fc81c2b8560e.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/vendors-node_modules_github_clipboard-copy-element_dist_index_esm_js-node_modules_delegated-e-b37f7d-6dbeacf8e3ba.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/app_assets_modules_github_command-palette_items_help-item_ts-app_assets_modules_github_comman-48ad9d-1115dce523df.js"></script>
<script crossorigin="anonymous" defer="defer" type="application/javascript" src="https://github.githubassets.com/assets/command-palette-6ad9ddab59d7.js"></script>

            <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap" role="banner">

    <div class="Header-item mt-n1 mb-n1  d-none d-md-flex">
      <a
  class="Header-link"
  href="https://github.com/"
  data-hotkey="g d"
  aria-label="Homepage "
  data-turbo="false"
  data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;go to dashboard&quot;,&quot;label&quot;:&quot;icon:logo&quot;}"
>
  <svg height="32" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="32" data-view-component="true" class="octicon octicon-mark-github v-align-middle">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>

    </div>

    <div class="Header-item d-md-none">
        <button aria-label="Toggle navigation" aria-expanded="false" type="button" data-view-component="true" class="Header-link js-details-target btn-link">    <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-three-bars">
    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
</svg>
</button>    </div>

    <div class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
              



<div class="header-search flex-auto position-relative js-site-search flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to"
>
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" role="search" aria-label="Site" data-scope-type="Repository" data-scope-id="160425765" data-scoped-search-url="/mebeim/aoc/search" data-owner-scoped-search-url="/users/mebeim/search" data-unscoped-search-url="/search" data-turbo="false" action="/mebeim/aoc/search" accept-charset="UTF-8" method="get">
      <label class="form-control header-search-wrapper input-sm p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
        <input type="text"
          class="form-control js-site-search-focus header-search-input jump-to-field js-jump-to-field js-site-search-field is-clearable"
          data-hotkey=s,/
          name="q"
          data-test-selector="nav-search-input"
          placeholder="Search or jump toâ€¦"
          data-unscoped-placeholder="Search or jump toâ€¦"
          data-scoped-placeholder="Search or jump toâ€¦"
          autocapitalize="off"
          role="combobox"
          aria-haspopup="listbox"
          aria-expanded="false"
          aria-autocomplete="list"
          aria-controls="jump-to-results"
          aria-label="Search or jump toâ€¦"
          data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations"
          spellcheck="false"
          autocomplete="off"
        >
        <input type="hidden" value="5_6Yok7QRpcDvD6Wjd-oprCQP2EicDdPApPI-26yymjO1bwuBE2wsdwjKM15ecxOvSto6TeWJKwBpR1LDfUI-Q" data-csrf="true" class="js-data-jump-to-suggestions-path-csrf" />
        <input type="hidden" class="js-site-search-type-field" name="type" >
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="20" aria-hidden="true" class="mr-1 header-search-key-slash"><path fill="none" stroke="#979A9C" opacity=".4" d="M3.5.5h12c1.7 0 3 1.3 3 3v13c0 1.7-1.3 3-3 3h-12c-1.7 0-3-1.3-3-3v-13c0-1.7 1.3-3 3-3z"></path><path fill="#979A9C" d="M11.8 6L8 15.1h-.9L10.8 6h1z"></path></svg>


          <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
            
<ul class="d-none js-jump-to-suggestions-template-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-suggestion" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="" data-item-type="suggestion">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo js-jump-to-octicon-repo d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
      <svg title="Project" aria-label="Project" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project js-jump-to-octicon-project d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path>
</svg>
      <svg title="Search" aria-label="Search" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search js-jump-to-octicon-search d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">â†µ</span>
    </div>

    <div aria-hidden="true" class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">â†µ</span>
    </div>
  </a>
</li>

</ul>

<ul class="d-none js-jump-to-no-results-template-container">
  <li class="d-flex flex-justify-center flex-items-center f5 d-none js-jump-to-suggestion p-2">
    <span class="color-fg-muted">No suggested jump to results</span>
  </li>
</ul>

<ul id="jump-to-results" role="listbox" class="p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="" data-item-type="scoped_search">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo js-jump-to-octicon-repo d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
      <svg title="Project" aria-label="Project" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project js-jump-to-octicon-project d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path>
</svg>
      <svg title="Search" aria-label="Search" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search js-jump-to-octicon-search d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">â†µ</span>
    </div>

    <div aria-hidden="true" class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">â†µ</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-owner-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="" data-item-type="owner_scoped_search">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo js-jump-to-octicon-repo d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
      <svg title="Project" aria-label="Project" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project js-jump-to-octicon-project d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path>
</svg>
      <svg title="Search" aria-label="Search" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search js-jump-to-octicon-search d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this user">
        In this user
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">â†µ</span>
    </div>

    <div aria-hidden="true" class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">â†µ</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-global-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="" data-item-type="global_search">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg title="Repository" aria-label="Repository" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo js-jump-to-octicon-repo d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
      <svg title="Project" aria-label="Project" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-project js-jump-to-octicon-project d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M1.75 0A1.75 1.75 0 000 1.75v12.5C0 15.216.784 16 1.75 16h12.5A1.75 1.75 0 0016 14.25V1.75A1.75 1.75 0 0014.25 0H1.75zM1.5 1.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25V1.75zM11.75 3a.75.75 0 00-.75.75v7.5a.75.75 0 001.5 0v-7.5a.75.75 0 00-.75-.75zm-8.25.75a.75.75 0 011.5 0v5.5a.75.75 0 01-1.5 0v-5.5zM8 3a.75.75 0 00-.75.75v3.5a.75.75 0 001.5 0v-3.5A.75.75 0 008 3z"></path>
</svg>
      <svg title="Search" aria-label="Search" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search js-jump-to-octicon-search d-none flex-shrink-0">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">â†µ</span>
    </div>

    <div aria-hidden="true" class="border rounded-2 flex-shrink-0 color-bg-subtle px-1 color-fg-muted ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">â†µ</span>
    </div>
  </a>
</li>


    <li class="d-flex flex-justify-center flex-items-center p-0 f5 js-jump-to-suggestion">
      <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="m-3 anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
    </li>
</ul>

          </div>
      </label>
</form>  </div>
</div>

        <nav id="global-nav" class="d-flex flex-column flex-md-row flex-self-stretch flex-md-self-auto" aria-label="Global">
    <a class="Header-link py-md-3 d-block d-md-none py-2 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:dashboard:user" aria-label="Dashboard" data-turbo="false" href="/dashboard">Dashboard</a>

  <a class="js-selected-navigation-item Header-link mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-hotkey="g p" data-ga-click="Header, click, Nav menu - item:pulls context:user" aria-label="Pull requests you created" data-turbo="false" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls" href="/pulls">
      Pull<span class="d-inline d-md-none d-lg-inline"> request</span>s
</a>
  <a class="js-selected-navigation-item Header-link mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-hotkey="g i" data-ga-click="Header, click, Nav menu - item:issues context:user" aria-label="Issues you created" data-turbo="false" data-selected-links="/issues /issues/assigned /issues/mentioned /issues" href="/issues">Issues</a>

      <a class="js-selected-navigation-item Header-link mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:workspaces context:user" data-turbo="false" data-selected-links="/codespaces /codespaces" href="/codespaces">Codespaces</a>

    <div class="d-flex position-relative">
      <a class="js-selected-navigation-item Header-link flex-auto mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-octo-click="marketplace_click" data-octo-dimensions="location:nav_bar" data-turbo="false" data-selected-links=" /marketplace" href="/marketplace">Marketplace</a>
    </div>

  <a class="js-selected-navigation-item Header-link mt-md-n3 mb-md-n3 py-2 py-md-3 mr-0 mr-md-3 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:explore" data-turbo="false" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="/explore">Explore</a>

      <a class="js-selected-navigation-item Header-link d-block d-md-none py-2 py-md-3 border-top border-md-top-0 border-white-fade" data-ga-click="Header, click, Nav menu - item:Sponsors" data-hydro-click="{&quot;event_type&quot;:&quot;sponsors.button_click&quot;,&quot;payload&quot;:{&quot;button&quot;:&quot;HEADER_SPONSORS_DASHBOARD&quot;,&quot;sponsorable_login&quot;:&quot;naik-amey&quot;,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="6f1b406d0509c771bc7ff15191dc84b994a9c4be414a2ee0e42359f40fc8ec9e" data-turbo="false" data-selected-links=" /sponsors/accounts" href="/sponsors/accounts">Sponsors</a>

    <a class="Header-link d-block d-md-none mr-0 mr-md-3 py-2 py-md-3 border-top border-md-top-0 border-white-fade" data-turbo="false" href="/settings/profile">Settings</a>

    <a class="Header-link d-block d-md-none mr-0 mr-md-3 py-2 py-md-3 border-top border-md-top-0 border-white-fade" data-turbo="false" href="/naik-amey">
      <img class="avatar avatar-user" loading="lazy" decoding="async" src="https://avatars.githubusercontent.com/u/8001516?s=40&amp;v=4" width="20" height="20" alt="@naik-amey" />
      naik-amey
</a>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-turbo="false" action="/logout" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="wr04RP965VE6Aagg9amD6eN0fVeV4xMSKtX8J6o64MRq6QGzjNVgLYL5bKuTO_XlExhpXsGri9EXmxTqYVh3SQ" />
      <button
        type="submit"
        class="Header-link mr-0 mr-md-3 py-2 py-md-3 border-top border-md-top-0 border-white-fade d-md-none btn-link d-block width-full text-left"
        style="padding-left: 2px;"
        data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;sign out&quot;,&quot;label&quot;:&quot;icon:logout&quot;}"
      >
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-sign-out v-align-middle">
    <path fill-rule="evenodd" d="M2 2.75C2 1.784 2.784 1 3.75 1h2.5a.75.75 0 010 1.5h-2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h2.5a.75.75 0 010 1.5h-2.5A1.75 1.75 0 012 13.25V2.75zm10.44 4.5H6.75a.75.75 0 000 1.5h5.69l-1.97 1.97a.75.75 0 101.06 1.06l3.25-3.25a.75.75 0 000-1.06l-3.25-3.25a.75.75 0 10-1.06 1.06l1.97 1.97z"></path>
</svg>
        Sign out
      </button>
</form></nav>

    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
        <a
  class="Header-link"
  href="https://github.com/"
  data-hotkey="g d"
  aria-label="Homepage "
  data-turbo="false"
  data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;go to dashboard&quot;,&quot;label&quot;:&quot;icon:logo&quot;}"
>
  <svg height="32" aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="32" data-view-component="true" class="octicon octicon-mark-github v-align-middle">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>

    </div>

    <div class="Header-item mr-0 mr-md-3 flex-order-1 flex-md-order-none">
        

<notification-indicator data-channel="eyJjIjoibm90aWZpY2F0aW9uLWNoYW5nZWQ6ODAwMTUxNiIsInQiOjE2NzM3NjMxMjB9--7ec19ecb913a736adc3a3a88a5c8c32000a469b1af1c212c19f95506591d8020" data-indicator-mode="global" data-tooltip-global="You have unread notifications" data-tooltip-unavailable="Notifications are unavailable at the moment." data-tooltip-none="You have no unread notifications" data-view-component="true" class="js-socket-channel">
  <a id="AppHeader-notifications-button" href="/notifications"
    class="Header-link notification-indicator position-relative tooltipped tooltipped-sw"

    

    data-hotkey="g n"
    data-target="notification-indicator.link"
    aria-label="Notifications"

      data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;go to notifications&quot;,&quot;label&quot;:&quot;icon:unread&quot;}"
  >

    <span
      data-target="notification-indicator.badge"
      class="mail-status unread" >
    </span>

      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-bell">
    <path d="M8 16a2 2 0 001.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 008 16z"></path><path fill-rule="evenodd" d="M8 1.5A3.5 3.5 0 004.5 5v2.947c0 .346-.102.683-.294.97l-1.703 2.556a.018.018 0 00-.003.01l.001.006c0 .002.002.004.004.006a.017.017 0 00.006.004l.007.001h10.964l.007-.001a.016.016 0 00.006-.004.016.016 0 00.004-.006l.001-.007a.017.017 0 00-.003-.01l-1.703-2.554a1.75 1.75 0 01-.294-.97V5A3.5 3.5 0 008 1.5zM3 5a5 5 0 0110 0v2.947c0 .05.015.098.042.139l1.703 2.555A1.518 1.518 0 0113.482 13H2.518a1.518 1.518 0 01-1.263-2.36l1.703-2.554A.25.25 0 003 7.947V5z"></path>
</svg>
  </a>

</notification-indicator>
    </div>


    <div class="Header-item position-relative d-none d-md-flex">
        <details class="details-overlay details-reset">
  <summary
    class="Header-link"
    aria-label="Create newâ€¦"
    data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;create new&quot;,&quot;label&quot;:&quot;icon:add&quot;}"
  >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-plus">
    <path fill-rule="evenodd" d="M7.75 2a.75.75 0 01.75.75V7h4.25a.75.75 0 110 1.5H8.5v4.25a.75.75 0 11-1.5 0V8.5H2.75a.75.75 0 010-1.5H7V2.75A.75.75 0 017.75 2z"></path>
</svg> <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="dropdown-menu dropdown-menu-sw">
    
<a role="menuitem" class="dropdown-item" href="/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a role="menuitem" class="dropdown-item" href="/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

  <a role="menuitem" class="dropdown-item" href="/codespaces/new">
    New codespace
  </a>

<a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a role="menuitem" class="dropdown-item" href="/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>



  </details-menu>
</details>

    </div>

    <div class="Header-item position-relative mr-0 d-none d-md-flex">
        
  <details class="details-overlay details-reset js-feature-preview-indicator-container" data-feature-preview-indicator-src="/users/naik-amey/feature_preview/indicator_check">

  <summary
    class="Header-link"
    aria-label="View profile and more"
    data-analytics-event="{&quot;category&quot;:&quot;Header&quot;,&quot;action&quot;:&quot;show menu&quot;,&quot;label&quot;:&quot;icon:avatar&quot;}"
  >
    <img src="https://avatars.githubusercontent.com/u/8001516?s=40&amp;v=4" alt="@naik-amey" size="20" height="20" width="20" data-view-component="true" class="avatar avatar-small circle" />
      <span class="unread-indicator js-feature-preview-indicator" style="top: 1px;" hidden></span>
    <span class="dropdown-caret"></span>
  </summary>
  <details-menu
      class="dropdown-menu dropdown-menu-sw"
      style="width: 180px"
      
      preload>
      <include-fragment src="/users/8001516/menu" loading="lazy">
        <p class="text-center mt-3" data-hide-on-error>
          <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
        </p>
        <p class="ml-1 mb-2 mt-2 color-fg-default" data-show-on-error>
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
          Sorry, something went wrong.
        </p>
      </include-fragment>
  </details-menu>
</details>

    </div>
</header>

            
    </div>

  <div id="start-of-content" class="show-on-focus"></div>







    <div id="js-flash-container" data-turbo-replace>





  <template class="js-flash-template">
    
<div class="flash flash-full   {{ className }}">
  <div class="px-2" >
    <button autofocus class="flash-close js-flash-close" type="button" aria-label="Dismiss this message">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
    </button>
    <div aria-atomic="true" role="alert" class="js-flash-alert">
      
      <div>{{ message }}</div>

    </div>
  </div>
</div>
  </template>
</div>


    
  <include-fragment class="js-notification-shelf-include-fragment" data-base-src="https://github.com/notifications/beta/shelf"></include-fragment>





      <details
  class="details-reset details-overlay details-overlay-dark js-command-palette-dialog"
  id="command-palette-pjax-container"
  data-turbo-replace
>
  <summary aria-label="command palette trigger" tabindex="-1"></summary>
  <details-dialog class="command-palette-details-dialog d-flex flex-column flex-justify-center height-fit" aria-label="command palette">
    <command-palette
      class="command-palette color-bg-default rounded-3 border color-shadow-small"
      return-to=/mebeim/aoc/blob/master/2022/README.md
      user-id="8001516"
      activation-hotkey="Mod+k,Mod+Alt+k"
      command-mode-hotkey="Mod+Shift+k"
      data-action="
        command-palette-input-ready:command-palette#inputReady
        command-palette-page-stack-updated:command-palette#updateInputScope
        itemsUpdated:command-palette#itemsUpdated
        keydown:command-palette#onKeydown
        loadingStateChanged:command-palette#loadingStateChanged
        selectedItemChanged:command-palette#selectedItemChanged
        pageFetchError:command-palette#pageFetchError
      ">

        <command-palette-mode
          data-char="#"
            data-scope-types="[&quot;&quot;]"
            data-placeholder="Search issues and pull requests"
        ></command-palette-mode>
        <command-palette-mode
          data-char="#"
            data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-placeholder="Search issues, pull requests, discussions, and projects"
        ></command-palette-mode>
        <command-palette-mode
          data-char="!"
            data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-placeholder="Search projects"
        ></command-palette-mode>
        <command-palette-mode
          data-char="@"
            data-scope-types="[&quot;&quot;]"
            data-placeholder="Search or jump to a user, organization, or repository"
        ></command-palette-mode>
        <command-palette-mode
          data-char="@"
            data-scope-types="[&quot;owner&quot;]"
            data-placeholder="Search or jump to a repository"
        ></command-palette-mode>
        <command-palette-mode
          data-char="/"
            data-scope-types="[&quot;repository&quot;]"
            data-placeholder="Search files"
        ></command-palette-mode>
        <command-palette-mode
          data-char="?"
        ></command-palette-mode>
        <command-palette-mode
          data-char="&gt;"
            data-placeholder="Run a command"
        ></command-palette-mode>
        <command-palette-mode
          data-char=""
            data-scope-types="[&quot;&quot;]"
            data-placeholder="Search or jump to..."
        ></command-palette-mode>
        <command-palette-mode
          data-char=""
            data-scope-types="[&quot;owner&quot;]"
            data-placeholder="Search or jump to..."
        ></command-palette-mode>
      <command-palette-mode
        class="js-command-palette-default-mode"
        data-char=""
        data-placeholder="Search or jump to..."
      ></command-palette-mode>

      <command-palette-input placeholder="Search or jump to..."

        data-action="
          command-palette-input:command-palette#onInput
          command-palette-select:command-palette#onSelect
          command-palette-descope:command-palette#onDescope
          command-palette-cleared:command-palette#onInputClear
        "
      >
        <div class="js-search-icon d-flex flex-items-center mr-2" style="height: 26px">
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-search color-fg-muted">
    <path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path>
</svg>
        </div>
        <div class="js-spinner d-flex flex-items-center mr-2 color-fg-muted" hidden>
          <svg aria-label="Loading" class="anim-rotate" viewBox="0 0 16 16" fill="none" width="16" height="16">
            <circle
              cx="8"
              cy="8"
              r="7"
              stroke="currentColor"
              stroke-opacity="0.25"
              stroke-width="2"
              vector-effect="non-scaling-stroke"
            ></circle>
            <path
              d="M15 8a7.002 7.002 0 00-7-7"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              vector-effect="non-scaling-stroke"
            ></path>
          </svg>
        </div>
        <command-palette-scope >
          <div data-target="command-palette-scope.placeholder" hidden class="color-fg-subtle">/&nbsp;&nbsp;<span class="text-semibold color-fg-default">...</span>&nbsp;&nbsp;/&nbsp;&nbsp;</div>
              <command-palette-token
                data-text="mebeim"
                data-id="MDQ6VXNlcjE0MTk4MDcw"
                data-type="owner"
                data-value="mebeim"
                data-targets="command-palette-scope.tokens"
                class="color-fg-default text-semibold"
                style="white-space:nowrap;line-height:20px;"
                >mebeim<span class="color-fg-subtle text-normal">&nbsp;&nbsp;/&nbsp;&nbsp;</span></command-palette-token>
              <command-palette-token
                data-text="aoc"
                data-id="MDEwOlJlcG9zaXRvcnkxNjA0MjU3NjU="
                data-type="repository"
                data-value="aoc"
                data-targets="command-palette-scope.tokens"
                class="color-fg-default text-semibold"
                style="white-space:nowrap;line-height:20px;"
                >aoc<span class="color-fg-subtle text-normal">&nbsp;&nbsp;/&nbsp;&nbsp;</span></command-palette-token>
        </command-palette-scope>
        <div class="command-palette-input-group flex-1 form-control border-0 box-shadow-none" style="z-index: 0">
          <div class="command-palette-typeahead position-absolute d-flex flex-items-center Truncate">
            <span class="typeahead-segment input-mirror" data-target="command-palette-input.mirror"></span>
            <span class="Truncate-text" data-target="command-palette-input.typeaheadText"></span>
            <span class="typeahead-segment" data-target="command-palette-input.typeaheadPlaceholder"></span>
          </div>
          <input
            class="js-overlay-input typeahead-input d-none"
            disabled
            tabindex="-1"
            aria-label="Hidden input for typeahead"
          >
          <input
            type="text"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
            spellcheck="false"
            class="js-input typeahead-input form-control border-0 box-shadow-none input-block width-full no-focus-indicator"
            aria-label="Command palette input"
            aria-haspopup="listbox"
            aria-expanded="false"
            aria-autocomplete="list"
            aria-controls="command-palette-page-stack"
            role="combobox"
            data-action="
              input:command-palette-input#onInput
              keydown:command-palette-input#onKeydown
            "
          >
        </div>
          <div data-view-component="true" class="position-relative d-inline-block">
    <button aria-keyshortcuts="Meta+Delete" data-action="click:command-palette-input#onClear keypress:command-palette-input#onClear" data-target="command-palette-input.clearButton" id="command-palette-clear-button" hidden="hidden" type="button" data-view-component="true" class="btn-octicon command-palette-input-clear-button">      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x-circle-fill">
    <path fill-rule="evenodd" d="M2.343 13.657A8 8 0 1113.657 2.343 8 8 0 012.343 13.657zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z"></path>
</svg>
</button>    <tool-tip for="command-palette-clear-button" data-direction="w" data-type="label" data-view-component="true" class="sr-only position-absolute">Clear Command Palette</tool-tip>
</div>
      </command-palette-input>

      <command-palette-page-stack
        data-default-scope-id="MDEwOlJlcG9zaXRvcnkxNjA0MjU3NjU="
        data-default-scope-type="Repository"
        data-action="command-palette-page-octicons-cached:command-palette-page-stack#cacheOcticons"
      >
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">#</kbd> to search pull requests
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">#</kbd> to search issues
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">#</kbd> to search discussions
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">!</kbd> to search projects
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;owner&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">@</kbd> to search teams
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">@</kbd> to search people and organizations
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type <kbd class="hx_kbd">&gt;</kbd> to activate command mode
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode=""
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Go to your accessibility settings to change your keyboard shortcuts
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type author:@me to search your content
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type is:pr to filter to pull requests
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type is:issue to filter to issues
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type is:project to filter to projects
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
          <command-palette-tip
            class="color-fg-muted f6 px-3 py-1 my-2"
              data-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
            data-mode="#"
            data-value="">
            <div class="d-flex flex-items-start flex-justify-between">
              <div>
                <span class="text-bold">Tip:</span>
                  Type is:open to filter to open content
              </div>
              <div class="ml-2 flex-shrink-0">
                Type <kbd class="hx_kbd">?</kbd> for help and tips
              </div>
            </div>
          </command-palette-tip>
        <command-palette-tip class="mx-3 my-2 flash flash-error d-flex flex-items-center" data-scope-types="*" data-on-error>
          <div>
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
          </div>
          <div class="px-2">
            Weâ€™ve encountered an error and some results aren't available at this time. Type a new search or try again later.
          </div>
        </command-palette-tip>
        <command-palette-tip class="h4 color-fg-default pl-3 pb-2 pt-3" data-on-empty data-scope-types="*" data-match-mode="[^?]|^$">
          No results matched your search
        </command-palette-tip>

        <div hidden>

            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="arrow-right-color-fg-muted">
              <svg height="16" class="octicon octicon-arrow-right color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="arrow-right-color-fg-default">
              <svg height="16" class="octicon octicon-arrow-right color-fg-default" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="codespaces-color-fg-muted">
              <svg height="16" class="octicon octicon-codespaces color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M2 1.75C2 .784 2.784 0 3.75 0h8.5C13.216 0 14 .784 14 1.75v5a1.75 1.75 0 01-1.75 1.75h-8.5A1.75 1.75 0 012 6.75v-5zm1.75-.25a.25.25 0 00-.25.25v5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25v-5a.25.25 0 00-.25-.25h-8.5zM0 11.25c0-.966.784-1.75 1.75-1.75h12.5c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25v-3zM1.75 11a.25.25 0 00-.25.25v3c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-3a.25.25 0 00-.25-.25H1.75z"></path><path fill-rule="evenodd" d="M3 12.75a.75.75 0 01.75-.75h.5a.75.75 0 010 1.5h-.5a.75.75 0 01-.75-.75zm4 0a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="copy-color-fg-muted">
              <svg height="16" class="octicon octicon-copy color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="dash-color-fg-muted">
              <svg height="16" class="octicon octicon-dash color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M2 7.75A.75.75 0 012.75 7h10a.75.75 0 010 1.5h-10A.75.75 0 012 7.75z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="file-color-fg-muted">
              <svg height="16" class="octicon octicon-file color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 019 4.25V1.5H3.75zm6.75.062V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16h-9.5A1.75 1.75 0 012 14.25V1.75z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="gear-color-fg-muted">
              <svg height="16" class="octicon octicon-gear color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.429 1.525a6.593 6.593 0 011.142 0c.036.003.108.036.137.146l.289 1.105c.147.56.55.967.997 1.189.174.086.341.183.501.29.417.278.97.423 1.53.27l1.102-.303c.11-.03.175.016.195.046.219.31.41.641.573.989.014.031.022.11-.059.19l-.815.806c-.411.406-.562.957-.53 1.456a4.588 4.588 0 010 .582c-.032.499.119 1.05.53 1.456l.815.806c.08.08.073.159.059.19a6.494 6.494 0 01-.573.99c-.02.029-.086.074-.195.045l-1.103-.303c-.559-.153-1.112-.008-1.529.27-.16.107-.327.204-.5.29-.449.222-.851.628-.998 1.189l-.289 1.105c-.029.11-.101.143-.137.146a6.613 6.613 0 01-1.142 0c-.036-.003-.108-.037-.137-.146l-.289-1.105c-.147-.56-.55-.967-.997-1.189a4.502 4.502 0 01-.501-.29c-.417-.278-.97-.423-1.53-.27l-1.102.303c-.11.03-.175-.016-.195-.046a6.492 6.492 0 01-.573-.989c-.014-.031-.022-.11.059-.19l.815-.806c.411-.406.562-.957.53-1.456a4.587 4.587 0 010-.582c.032-.499-.119-1.05-.53-1.456l-.815-.806c-.08-.08-.073-.159-.059-.19a6.44 6.44 0 01.573-.99c.02-.029.086-.075.195-.045l1.103.303c.559.153 1.112.008 1.529-.27.16-.107.327-.204.5-.29.449-.222.851-.628.998-1.189l.289-1.105c.029-.11.101-.143.137-.146zM8 0c-.236 0-.47.01-.701.03-.743.065-1.29.615-1.458 1.261l-.29 1.106c-.017.066-.078.158-.211.224a5.994 5.994 0 00-.668.386c-.123.082-.233.09-.3.071L3.27 2.776c-.644-.177-1.392.02-1.82.63a7.977 7.977 0 00-.704 1.217c-.315.675-.111 1.422.363 1.891l.815.806c.05.048.098.147.088.294a6.084 6.084 0 000 .772c.01.147-.038.246-.088.294l-.815.806c-.474.469-.678 1.216-.363 1.891.2.428.436.835.704 1.218.428.609 1.176.806 1.82.63l1.103-.303c.066-.019.176-.011.299.071.213.143.436.272.668.386.133.066.194.158.212.224l.289 1.106c.169.646.715 1.196 1.458 1.26a8.094 8.094 0 001.402 0c.743-.064 1.29-.614 1.458-1.26l.29-1.106c.017-.066.078-.158.211-.224a5.98 5.98 0 00.668-.386c.123-.082.233-.09.3-.071l1.102.302c.644.177 1.392-.02 1.82-.63.268-.382.505-.789.704-1.217.315-.675.111-1.422-.364-1.891l-.814-.806c-.05-.048-.098-.147-.088-.294a6.1 6.1 0 000-.772c-.01-.147.039-.246.088-.294l.814-.806c.475-.469.679-1.216.364-1.891a7.992 7.992 0 00-.704-1.218c-.428-.609-1.176-.806-1.82-.63l-1.103.303c-.066.019-.176.011-.299-.071a5.991 5.991 0 00-.668-.386c-.133-.066-.194-.158-.212-.224L10.16 1.29C9.99.645 9.444.095 8.701.031A8.094 8.094 0 008 0zm1.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM11 8a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="lock-color-fg-muted">
              <svg height="16" class="octicon octicon-lock color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 4v2h-.25A1.75 1.75 0 002 7.75v5.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-5.5A1.75 1.75 0 0012.25 6H12V4a4 4 0 10-8 0zm6.5 2V4a2.5 2.5 0 00-5 0v2h5zM12 7.5h.25a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-5.5a.25.25 0 01.25-.25H12z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="moon-color-fg-muted">
              <svg height="16" class="octicon octicon-moon color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="person-color-fg-muted">
              <svg height="16" class="octicon octicon-person color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M10.5 5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm.061 3.073a4 4 0 10-5.123 0 6.004 6.004 0 00-3.431 5.142.75.75 0 001.498.07 4.5 4.5 0 018.99 0 .75.75 0 101.498-.07 6.005 6.005 0 00-3.432-5.142z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="pencil-color-fg-muted">
              <svg height="16" class="octicon octicon-pencil color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25a1.75 1.75 0 01.445-.758l8.61-8.61zm1.414 1.06a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086zM11.189 6.25L9.75 4.81l-6.286 6.287a.25.25 0 00-.064.108l-.558 1.953 1.953-.558a.249.249 0 00.108-.064l6.286-6.286z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="issue-opened-open">
              <svg height="16" class="octicon octicon-issue-opened open" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path><path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="git-pull-request-draft-color-fg-muted">
              <svg height="16" class="octicon octicon-git-pull-request-draft color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M2.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.25 1a2.25 2.25 0 00-.75 4.372v5.256a2.251 2.251 0 101.5 0V5.372A2.25 2.25 0 003.25 1zm0 11a.75.75 0 100 1.5.75.75 0 000-1.5zm9.5 3a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm0-3a.75.75 0 100 1.5.75.75 0 000-1.5z"></path><path d="M14 7.5a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm0-4.25a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="search-color-fg-muted">
              <svg height="16" class="octicon octicon-search color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="sun-color-fg-muted">
              <svg height="16" class="octicon octicon-sun color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="sync-color-fg-muted">
              <svg height="16" class="octicon octicon-sync color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="trash-color-fg-muted">
              <svg height="16" class="octicon octicon-trash color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M6.5 1.75a.25.25 0 01.25-.25h2.5a.25.25 0 01.25.25V3h-3V1.75zm4.5 0V3h2.25a.75.75 0 010 1.5H2.75a.75.75 0 010-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75zM4.496 6.675a.75.75 0 10-1.492.15l.66 6.6A1.75 1.75 0 005.405 15h5.19c.9 0 1.652-.681 1.741-1.576l.66-6.6a.75.75 0 00-1.492-.149l-.66 6.6a.25.25 0 01-.249.225h-5.19a.25.25 0 01-.249-.225l-.66-6.6z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="key-color-fg-muted">
              <svg height="16" class="octicon octicon-key color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M6.5 5.5a4 4 0 112.731 3.795.75.75 0 00-.768.18L7.44 10.5H6.25a.75.75 0 00-.75.75v1.19l-.06.06H4.25a.75.75 0 00-.75.75v1.19l-.06.06H1.75a.25.25 0 01-.25-.25v-1.69l5.024-5.023a.75.75 0 00.181-.768A3.995 3.995 0 016.5 5.5zm4-5.5a5.5 5.5 0 00-5.348 6.788L.22 11.72a.75.75 0 00-.22.53v2C0 15.216.784 16 1.75 16h2a.75.75 0 00.53-.22l.5-.5a.75.75 0 00.22-.53V14h.75a.75.75 0 00.53-.22l.5-.5a.75.75 0 00.22-.53V12h.75a.75.75 0 00.53-.22l.932-.932A5.5 5.5 0 1010.5 0zm.5 6a1 1 0 100-2 1 1 0 000 2z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="comment-discussion-color-fg-muted">
              <svg height="16" class="octicon octicon-comment-discussion color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 2.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-3.5a.75.75 0 00-.53.22L3.5 11.44V9.25a.75.75 0 00-.75-.75h-1a.25.25 0 01-.25-.25v-5.5zM1.75 1A1.75 1.75 0 000 2.75v5.5C0 9.216.784 10 1.75 10H2v1.543a1.457 1.457 0 002.487 1.03L7.061 10h3.189A1.75 1.75 0 0012 8.25v-5.5A1.75 1.75 0 0010.25 1h-8.5zM14.5 4.75a.25.25 0 00-.25-.25h-.5a.75.75 0 110-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0114.25 12H14v1.543a1.457 1.457 0 01-2.487 1.03L9.22 12.28a.75.75 0 111.06-1.06l2.22 2.22v-2.19a.75.75 0 01.75-.75h1a.25.25 0 00.25-.25v-5.5z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="bell-color-fg-muted">
              <svg height="16" class="octicon octicon-bell color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path d="M8 16a2 2 0 001.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 008 16z"></path><path fill-rule="evenodd" d="M8 1.5A3.5 3.5 0 004.5 5v2.947c0 .346-.102.683-.294.97l-1.703 2.556a.018.018 0 00-.003.01l.001.006c0 .002.002.004.004.006a.017.017 0 00.006.004l.007.001h10.964l.007-.001a.016.016 0 00.006-.004.016.016 0 00.004-.006l.001-.007a.017.017 0 00-.003-.01l-1.703-2.554a1.75 1.75 0 01-.294-.97V5A3.5 3.5 0 008 1.5zM3 5a5 5 0 0110 0v2.947c0 .05.015.098.042.139l1.703 2.555A1.518 1.518 0 0113.482 13H2.518a1.518 1.518 0 01-1.263-2.36l1.703-2.554A.25.25 0 003 7.947V5z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="bell-slash-color-fg-muted">
              <svg height="16" class="octicon octicon-bell-slash color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1.5c-.997 0-1.895.416-2.534 1.086A.75.75 0 014.38 1.55 5 5 0 0113 5v2.373a.75.75 0 01-1.5 0V5A3.5 3.5 0 008 1.5zM4.182 4.31L1.19 2.143a.75.75 0 10-.88 1.214L3 5.305v2.642a.25.25 0 01-.042.139L1.255 10.64A1.518 1.518 0 002.518 13h11.108l1.184.857a.75.75 0 10.88-1.214l-1.375-.996a1.196 1.196 0 00-.013-.01L4.198 4.321a.733.733 0 00-.016-.011zm7.373 7.19L4.5 6.391v1.556c0 .346-.102.683-.294.97l-1.703 2.556a.018.018 0 00-.003.01.015.015 0 00.005.012.017.017 0 00.006.004l.007.001h9.037zM8 16a2 2 0 001.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 008 16z"></path></svg>
            </div>
            <div data-targets="command-palette-page-stack.localOcticons" data-octicon-id="paintbrush-color-fg-muted">
              <svg height="16" class="octicon octicon-paintbrush color-fg-muted" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.134 1.535C9.722 2.562 8.16 4.057 6.889 5.312 5.8 6.387 5.041 7.401 4.575 8.294a3.745 3.745 0 00-3.227 1.054c-.43.431-.69 1.066-.86 1.657a11.982 11.982 0 00-.358 1.914A21.263 21.263 0 000 15.203v.054l.75-.007-.007.75h.054a14.404 14.404 0 00.654-.012 21.243 21.243 0 001.63-.118c.62-.07 1.3-.18 1.914-.357.592-.17 1.226-.43 1.657-.861a3.745 3.745 0 001.055-3.217c.908-.461 1.942-1.216 3.04-2.3 1.279-1.262 2.764-2.825 3.775-4.249.501-.706.923-1.428 1.125-2.096.2-.659.235-1.469-.368-2.07-.606-.607-1.42-.55-2.069-.34-.66.213-1.376.646-2.076 1.155zm-3.95 8.48a3.76 3.76 0 00-1.19-1.192 9.758 9.758 0 011.161-1.607l1.658 1.658a9.853 9.853 0 01-1.63 1.142zM.742 16l.007-.75-.75.008A.75.75 0 00.743 16zM12.016 2.749c-1.224.89-2.605 2.189-3.822 3.384l1.718 1.718c1.21-1.205 2.51-2.597 3.387-3.833.47-.662.78-1.227.912-1.662.134-.444.032-.551.009-.575h-.001V1.78c-.014-.014-.112-.113-.548.027-.432.14-.995.462-1.655.942zM1.62 13.089a19.56 19.56 0 00-.104 1.395 19.55 19.55 0 001.396-.104 10.528 10.528 0 001.668-.309c.526-.151.856-.325 1.011-.48a2.25 2.25 0 00-3.182-3.182c-.155.155-.329.485-.48 1.01a10.515 10.515 0 00-.309 1.67z"></path></svg>
            </div>

            <command-palette-item-group
              data-group-id="top"
              data-group-title="Top result"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="0"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="commands"
              data-group-title="Commands"
              data-group-hint="Type &gt; to filter"
              data-group-limits="{&quot;static_items_page&quot;:50,&quot;issue&quot;:50,&quot;pull_request&quot;:50,&quot;discussion&quot;:50}"
              data-default-priority="1"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="global_commands"
              data-group-title="Global Commands"
              data-group-hint="Type &gt; to filter"
              data-group-limits="{&quot;issue&quot;:0,&quot;pull_request&quot;:0,&quot;discussion&quot;:0}"
              data-default-priority="2"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="this_page"
              data-group-title="This Page"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="3"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="files"
              data-group-title="Files"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="4"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="default"
              data-group-title="Default"
              data-group-hint=""
              data-group-limits="{&quot;static_items_page&quot;:50}"
              data-default-priority="5"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="pages"
              data-group-title="Pages"
              data-group-hint=""
              data-group-limits="{&quot;repository&quot;:10}"
              data-default-priority="6"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="access_policies"
              data-group-title="Access Policies"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="7"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="organizations"
              data-group-title="Organizations"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="8"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="repositories"
              data-group-title="Repositories"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="9"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="references"
              data-group-title="Issues, pull requests, and discussions"
              data-group-hint="Type # to filter"
              data-group-limits="{}"
              data-default-priority="10"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="teams"
              data-group-title="Teams"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="11"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="users"
              data-group-title="Users"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="12"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="projects"
              data-group-title="Projects"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="13"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="footer"
              data-group-title="Footer"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="14"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="modes_help"
              data-group-title="Modes"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="15"
            >
            </command-palette-item-group>
            <command-palette-item-group
              data-group-id="filters_help"
              data-group-title="Use filters in issues, pull requests, discussions, and projects"
              data-group-hint=""
              data-group-limits="{}"
              data-default-priority="16"
            >
            </command-palette-item-group>

            <command-palette-page
              data-page-title="mebeim"
              data-scope-id="MDQ6VXNlcjE0MTk4MDcw"
              data-scope-type="owner"
              data-targets="command-palette-page-stack.defaultPages"
              hidden
            >
            </command-palette-page>
            <command-palette-page
              data-page-title="aoc"
              data-scope-id="MDEwOlJlcG9zaXRvcnkxNjA0MjU3NjU="
              data-scope-type="repository"
              data-targets="command-palette-page-stack.defaultPages"
              hidden
            >
            </command-palette-page>
        </div>

        <command-palette-page data-is-root>
        </command-palette-page>
          <command-palette-page
            data-page-title="mebeim"
            data-scope-id="MDQ6VXNlcjE0MTk4MDcw"
            data-scope-type="owner"
          >
          </command-palette-page>
          <command-palette-page
            data-page-title="aoc"
            data-scope-id="MDEwOlJlcG9zaXRvcnkxNjA0MjU3NjU="
            data-scope-type="repository"
          >
          </command-palette-page>
      </command-palette-page-stack>

      <server-defined-provider data-type="search-links" data-targets="command-palette.serverDefinedProviderElements"></server-defined-provider>
      <server-defined-provider data-type="help" data-targets="command-palette.serverDefinedProviderElements">
          <command-palette-help
            data-group="modes_help"
              data-prefix="#"
              data-scope-types="[&quot;&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>issues</strong> and <strong>pull requests</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">#</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="#"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>issues, pull requests, discussions,</strong> and <strong>projects</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">#</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="@"
              data-scope-types="[&quot;&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>organizations, repositories,</strong> and <strong>users</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">@</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="!"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>projects</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">!</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="/"
              data-scope-types="[&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Search for <strong>files</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">/</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="modes_help"
              data-prefix="&gt;"
          >
            <span data-target="command-palette-help.titleElement">Activate <strong>command mode</strong></span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd">&gt;</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# author:@me"
          >
            <span data-target="command-palette-help.titleElement">Search your issues, pull requests, and discussions</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># author:@me</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# author:@me"
          >
            <span data-target="command-palette-help.titleElement">Search your issues, pull requests, and discussions</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># author:@me</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:pr"
          >
            <span data-target="command-palette-help.titleElement">Filter to pull requests</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:pr</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:issue"
          >
            <span data-target="command-palette-help.titleElement">Filter to issues</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:issue</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:discussion"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Filter to discussions</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:discussion</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:project"
              data-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          >
            <span data-target="command-palette-help.titleElement">Filter to projects</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:project</kbd>
              </span>
          </command-palette-help>
          <command-palette-help
            data-group="filters_help"
              data-prefix="# is:open"
          >
            <span data-target="command-palette-help.titleElement">Filter to open issues, pull requests, and discussions</span>
              <span data-target="command-palette-help.hintElement">
                <kbd class="hx_kbd"># is:open</kbd>
              </span>
          </command-palette-help>
      </server-defined-provider>

        <server-defined-provider
          data-type="commands"
          data-fetch-debounce="0"
            data-src="/command_palette/commands"
          data-supported-modes="[]"
            data-supports-commands
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="prefetched"
          data-fetch-debounce="0"
            data-src="/command_palette/jump_to_page_navigation"
          data-supported-modes="[&quot;&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;,&quot;repository&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/issues"
          data-supported-modes="[&quot;#&quot;,&quot;#&quot;]"
            data-supported-scope-types="[&quot;owner&quot;,&quot;repository&quot;,&quot;&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/jump_to"
          data-supported-modes="[&quot;@&quot;,&quot;@&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/jump_to_members_only"
          data-supported-modes="[&quot;@&quot;,&quot;@&quot;,&quot;&quot;,&quot;&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="prefetched"
          data-fetch-debounce="0"
            data-src="/command_palette/jump_to_members_only_prefetched"
          data-supported-modes="[&quot;@&quot;,&quot;@&quot;,&quot;&quot;,&quot;&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="files"
          data-fetch-debounce="0"
            data-src="/command_palette/files"
          data-supported-modes="[&quot;/&quot;]"
            data-supported-scope-types="[&quot;repository&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/discussions"
          data-supported-modes="[&quot;#&quot;]"
            data-supported-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/projects"
          data-supported-modes="[&quot;#&quot;,&quot;!&quot;]"
            data-supported-scope-types="[&quot;owner&quot;,&quot;repository&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="prefetched"
          data-fetch-debounce="0"
            data-src="/command_palette/recent_issues"
          data-supported-modes="[&quot;#&quot;,&quot;#&quot;]"
            data-supported-scope-types="[&quot;owner&quot;,&quot;repository&quot;,&quot;&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/teams"
          data-supported-modes="[&quot;@&quot;,&quot;&quot;]"
            data-supported-scope-types="[&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
        <server-defined-provider
          data-type="remote"
          data-fetch-debounce="200"
            data-src="/command_palette/name_with_owner_repository"
          data-supported-modes="[&quot;@&quot;,&quot;@&quot;,&quot;&quot;,&quot;&quot;]"
            data-supported-scope-types="[&quot;&quot;,&quot;owner&quot;]"
          
          data-targets="command-palette.serverDefinedProviderElements"
          ></server-defined-provider>
    </command-palette>
  </details-dialog>
</details>

<div class="position-fixed bottom-0 left-0 ml-5 mb-5 js-command-palette-toasts" style="z-index: 1000">
  <div hidden class="Toast Toast--loading">
    <span class="Toast-icon">
      <svg class="Toast--spinner" viewBox="0 0 32 32" width="18" height="18" aria-hidden="true">
        <path
          fill="#959da5"
          d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"
        />
        <path fill="#ffffff" d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"></path>
      </svg>
    </span>
    <span class="Toast-content"></span>
  </div>

  <div hidden class="anim-fade-in fast Toast Toast--error">
    <span class="Toast-icon">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-stop">
    <path fill-rule="evenodd" d="M4.47.22A.75.75 0 015 0h6a.75.75 0 01.53.22l4.25 4.25c.141.14.22.331.22.53v6a.75.75 0 01-.22.53l-4.25 4.25A.75.75 0 0111 16H5a.75.75 0 01-.53-.22L.22 11.53A.75.75 0 010 11V5a.75.75 0 01.22-.53L4.47.22zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5H5.31zM8 4a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 018 4zm0 8a1 1 0 100-2 1 1 0 000 2z"></path>
</svg>
    </span>
    <span class="Toast-content"></span>
  </div>

  <div hidden class="anim-fade-in fast Toast Toast--warning">
    <span class="Toast-icon">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    </span>
    <span class="Toast-content"></span>
  </div>


  <div hidden class="anim-fade-in fast Toast Toast--success">
    <span class="Toast-icon">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </span>
    <span class="Toast-content"></span>
  </div>

  <div hidden class="anim-fade-in fast Toast">
    <span class="Toast-icon">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-info">
    <path fill-rule="evenodd" d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z"></path>
</svg>
    </span>
    <span class="Toast-content"></span>
  </div>
</div>


  <div
    class="application-main "
    data-commit-hovercards-enabled
    data-discussion-hovercards-enabled
    data-issue-and-pr-hovercards-enabled
  >
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <main id="js-repo-pjax-container" >
      
  


    





  
  <div id="repository-container-header"  class="pt-3 hide-full-screen" style="background-color: var(--color-page-header-bg);" data-turbo-replace>

      <div class="d-flex flex-wrap flex-justify-end mb-3  px-3 px-md-4 px-lg-5" style="gap: 1rem;">

        <div class="flex-auto min-width-0 width-fit mr-3">
            
  <div class=" d-flex flex-wrap flex-items-center wb-break-word f3 text-normal">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo color-fg-muted mr-2">
    <path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
</svg>
    
    <span class="author flex-self-stretch" itemprop="author">
      <a class="url fn" rel="author" data-hovercard-type="user" data-hovercard-url="/users/mebeim/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mebeim">mebeim</a>
    </span>
    <span class="mx-1 flex-self-stretch color-fg-muted">/</span>
    <strong itemprop="name" class="mr-2 flex-self-stretch">
      <a data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" href="/mebeim/aoc">aoc</a>
    </strong>

    <span></span><span class="Label Label--secondary v-align-middle mr-1">Public</span>
  </div>


        </div>

          <ul class="pagehead-actions flex-shrink-0 d-none d-md-inline" style="padding: 2px 0;">

      

  <li>
          <notifications-list-subscription-form
      data-action="notifications-dialog-label-toggled:notifications-list-subscription-form#handleDialogLabelToggle"
      class="f5 position-relative"
    >
      <details
        class="details-reset details-overlay f5 position-relative"
        data-target="notifications-list-subscription-form.details"
        data-action="toggle:notifications-list-subscription-form#detailsToggled"
      >

        <summary data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;WATCH_BUTTON&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="04b684ff8603624d4a60d7ba520f03c7b8867cd633359bf9a4aaae9e1f1a52c2" data-ga-click="Repository, click Watch settings, action:blob#show" aria-label="Notification settings" data-view-component="true" class="btn-sm btn">    <span data-menu-button>
            <span
              hidden
              
              data-target="notifications-list-subscription-form.unwatchButtonCopy"
            >
              <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-eye">
    <path fill-rule="evenodd" d="M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z"></path>
</svg>
              Unwatch
            </span>
            <span
              hidden
              
              data-target="notifications-list-subscription-form.stopIgnoringButtonCopy"
            >
              <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-bell-slash">
    <path fill-rule="evenodd" d="M8 1.5c-.997 0-1.895.416-2.534 1.086A.75.75 0 014.38 1.55 5 5 0 0113 5v2.373a.75.75 0 01-1.5 0V5A3.5 3.5 0 008 1.5zM4.182 4.31L1.19 2.143a.75.75 0 10-.88 1.214L3 5.305v2.642a.25.25 0 01-.042.139L1.255 10.64A1.518 1.518 0 002.518 13h11.108l1.184.857a.75.75 0 10.88-1.214l-1.375-.996a1.196 1.196 0 00-.013-.01L4.198 4.321a.733.733 0 00-.016-.011zm7.373 7.19L4.5 6.391v1.556c0 .346-.102.683-.294.97l-1.703 2.556a.018.018 0 00-.003.01.015.015 0 00.005.012.017.017 0 00.006.004l.007.001h9.037zM8 16a2 2 0 001.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 008 16z"></path>
</svg>
              Stop ignoring
            </span>
            <span
              
              
              data-target="notifications-list-subscription-form.watchButtonCopy"
            >
              <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-eye">
    <path fill-rule="evenodd" d="M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z"></path>
</svg>
              Watch
            </span>
          </span>
            <span id="repo-notifications-counter" data-target="notifications-list-subscription-form.socialCount" data-pjax-replace="true" data-turbo-replace="true" title="16" data-view-component="true" class="Counter">16</span>
          <span class="dropdown-caret"></span>
</summary>
        <details-menu
          class="SelectMenu  "
          role="menu"
          data-target="notifications-list-subscription-form.menu"
          
        >
          <div class="SelectMenu-modal notifications-component-menu-modal">
            <header class="SelectMenu-header">
              <h3 class="SelectMenu-title">Notifications</h3>
              <button class="SelectMenu-closeButton" type="button" aria-label="Close menu" data-action="click:notifications-list-subscription-form#closeMenu">
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
              </button>
            </header>

            <div class="SelectMenu-list">
              <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-target="notifications-list-subscription-form.form" data-action="submit:notifications-list-subscription-form#submitForm" data-turbo="false" action="/notifications/subscribe" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="qcJtMK9ROZxybgndB0QXMGJpsWoy1eChaSiONAn0BgM0VqO2auVLFD1XJQsYT3gZezik7WgEVVeGcM-9VtH_fg" autocomplete="off" />

                <input type="hidden" name="repository_id" value="160425765">

                <button
                  type="submit"
                  name="do"
                  value="included"
                  class="SelectMenu-item flex-items-start"
                  role="menuitemradio"
                  aria-checked="true"
                  data-targets="notifications-list-subscription-form.subscriptionButtons"
                  
                >
                  <span class="f5">
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  </span>
                  <div>
                    <div class="f5 text-bold">
                      Participating and @mentions
                    </div>
                    <div class="text-small color-fg-muted text-normal pb-1">
                      Only receive notifications from this repository when participating or @mentioned.
                    </div>
                  </div>
                </button>

                <button
                  type="submit"
                  name="do"
                  value="subscribed"
                  class="SelectMenu-item flex-items-start"
                  role="menuitemradio"
                  aria-checked="false"
                  data-targets="notifications-list-subscription-form.subscriptionButtons"
                >
                  <span class="f5">
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  </span>
                  <div>
                    <div class="f5 text-bold">
                      All Activity
                    </div>
                    <div class="text-small color-fg-muted text-normal pb-1">
                      Notified of all notifications on this repository.
                    </div>
                  </div>
                </button>

                <button
                  type="submit"
                  name="do"
                  value="ignore"
                  class="SelectMenu-item flex-items-start"
                  role="menuitemradio"
                  aria-checked="false"
                  data-targets="notifications-list-subscription-form.subscriptionButtons"
                >
                  <span class="f5">
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                  </span>
                  <div>
                    <div class="f5 text-bold">
                      Ignore
                    </div>
                    <div class="text-small color-fg-muted text-normal pb-1">
                      Never be notified.
                    </div>
                  </div>
                </button>
</form>
              <button
                class="SelectMenu-item flex-items-start pr-3"
                type="button"
                role="menuitemradio"
                data-target="notifications-list-subscription-form.customButton"
                data-action="click:notifications-list-subscription-form#openCustomDialog"
                aria-haspopup="true"
                aria-checked="false"
                
              >
                <span class="f5">
                  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
                </span>
                <div>
                  <div class="d-flex flex-items-start flex-justify-between">
                    <div class="f5 text-bold">Custom</div>
                    <div class="f5 pr-1">
                      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-arrow-right">
    <path fill-rule="evenodd" d="M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z"></path>
</svg>
                    </div>
                  </div>
                  <div class="text-small color-fg-muted text-normal pb-1">
                    Select events you want to be notified of in addition to participating and @mentions.
                  </div>
                </div>
              </button>

            </div>
          </div>
        </details-menu>

        <details-dialog
          class="notifications-component-dialog "
          data-target="notifications-list-subscription-form.customDialog"
          aria-label="Custom dialog"
          hidden
        >
          <div class="SelectMenu-modal notifications-component-dialog-modal overflow-visible">
            <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-target="notifications-list-subscription-form.customform" data-action="submit:notifications-list-subscription-form#submitCustomForm" data-turbo="false" action="/notifications/subscribe" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="_McrYzU6e3ojSxfDvCdpxFHcawxks4mSiPqpVb9Zo05hU-Xl8I4J8mxyOxWjLAbtSI1-iz5iPGRnoujc4HxaMw" autocomplete="off" />

              <input type="hidden" name="repository_id" value="160425765">

              <header class="d-sm-none SelectMenu-header pb-0 border-bottom-0 px-2 px-sm-3">
                <h1 class="f3 SelectMenu-title d-inline-flex">
                  <button
                    class="color-bg-default border-0 px-2 py-0 m-0 Link--secondary f5"
                    aria-label="Return to menu"
                    type="button"
                    data-action="click:notifications-list-subscription-form#closeCustomDialog"
                  >
                    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-arrow-left">
    <path fill-rule="evenodd" d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"></path>
</svg>
                  </button>
                  Custom
                </h1>
              </header>

              <header class="d-none d-sm-flex flex-items-start pt-1">
                <button
                  class="border-0 px-2 pt-1 m-0 Link--secondary f5"
                  style="background-color: transparent;"
                  aria-label="Return to menu"
                  type="button"
                  data-action="click:notifications-list-subscription-form#closeCustomDialog"
                >
                  <svg style="position: relative; left: 2px; top: 1px" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-arrow-left">
    <path fill-rule="evenodd" d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"></path>
</svg>
                </button>

                <h1 class="pt-1 pr-4 pb-0 pl-0 f5 text-bold">
                  Custom
                </h1>
              </header>

              <fieldset>
                <legend>
                  <div class="text-small color-fg-muted pt-0 pr-3 pb-3 pl-6 pl-sm-5 border-bottom mb-3">
                    Select events you want to be notified of in addition to participating and @mentions.
                  </div>
                </legend>
                <div data-target="notifications-list-subscription-form.labelInputs">
                </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="Issue"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Issues
                    </label>


                  </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="PullRequest"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Pull requests
                    </label>


                  </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="Release"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Releases
                    </label>


                  </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="Discussion"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Discussions
                    </label>


                  </div>
                  <div class="form-checkbox mr-3 ml-6 ml-sm-5 mb-2 mt-0">
                    <label class="f5 text-normal">
                      <input
                        type="checkbox"
                        name="thread_types[]"
                        value="SecurityAlert"
                        data-targets="notifications-list-subscription-form.threadTypeCheckboxes"
                        data-action="change:notifications-list-subscription-form#threadTypeCheckboxesUpdated"
                        
                      >
                      Security alerts
                    </label>


                  </div>
              </fieldset>
              <div class="pt-2 pb-3 px-3 d-flex flex-justify-start flex-row-reverse">
                  <button name="do" value="custom" data-target="notifications-list-subscription-form.customSubmit" disabled="disabled" type="submit" data-view-component="true" class="btn-primary btn-sm btn ml-2">    Apply
</button>

                  <button data-action="click:notifications-list-subscription-form#resetForm" data-close-dialog="" type="button" data-view-component="true" class="btn-sm btn">    Cancel
</button>
              </div>
</form>          </div>
        </details-dialog>


        <div class="notifications-component-dialog-overlay"></div>
      </details>
    </notifications-list-subscription-form>



  </li>

  <li>
        <div data-view-component="true" class="d-flex">
        <div data-view-component="true" class="position-relative d-inline-block">
    <a icon="repo-forked" id="fork-button" href="/mebeim/aoc/fork" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;FORK_BUTTON&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="c4e78f6dacfdbb54721b44a58abf18267a5d05edc7bd4278248ad752c10ef5af" data-ga-click="Repository, show fork modal, action:blob#show; text:Fork" data-view-component="true" class="btn-sm btn BtnGroup-item border-right-0">      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo-forked mr-2">
    <path fill-rule="evenodd" d="M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z"></path>
</svg>Fork
          <span id="repo-network-counter" data-pjax-replace="true" data-turbo-replace="true" title="17" data-view-component="true" class="Counter">17</span>
</a>    <tool-tip for="fork-button" data-direction="s" data-type="description" data-view-component="true" class="sr-only position-absolute">Fork your own copy of mebeim/aoc</tool-tip>
</div>
      <details group_item="true" id="my-forks-menu-160425765" data-view-component="true" class="details-reset details-overlay BtnGroup-parent d-inline-block position-relative">
              <summary aria-label="See your forks of this repository" data-view-component="true" class="btn-sm btn BtnGroup-item px-2 float-none">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
</summary>
  <details-menu
    class="SelectMenu right-0"
      src="/mebeim/aoc/my_forks_menu_content?can_fork=true"
      
      role="menu"
      
>
    <div class="SelectMenu-modal">
        <button class="SelectMenu-closeButton position-absolute right-0 m-2" type="button" aria-label="Close menu" data-toggle-for="details-b5d2f7">
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
        </button>
      <div
        id="filter-menu-b5d2f7"
        class="d-flex flex-column flex-1 overflow-hidden"
>
        <div
          class="SelectMenu-list"
          >

            <include-fragment class="SelectMenu-loading" aria-label="Loading">
              <svg role="menuitem" style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
            </include-fragment>
        </div>
        
      </div>
    </div>
  </details-menu>
</details></div>
  </li>

  <li>
        <template class="js-unstar-confirmation-dialog-template">
  <div class="Box-header">
    <h2 class="Box-title">Unstar this repository?</h2>
  </div>
  <div class="Box-body">
    <p class="mb-3">
      This will remove {{ repoNameWithOwner }} from the {{ listsWithCount }} that it's been added to.
    </p>
    <div class="form-actions">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-social-confirmation-form" data-turbo="false" action="{{ confirmUrl }}" accept-charset="UTF-8" method="post">
        <input type="hidden" name="authenticity_token" value="{{ confirmCsrfToken }}">
        <input type="hidden" name="confirm" value="true">
          <button data-close-dialog="true" type="submit" data-view-component="true" class="btn-danger btn width-full">    Unstar
</button>
</form>    </div>
  </div>
</template>

  <div data-view-component="true" class="js-toggler-container js-social-container starring-container d-flex">
    <div data-view-component="true" class="starred BtnGroup flex-1">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-social-form BtnGroup-parent flex-auto js-deferred-toggler-target" data-turbo="false" action="/mebeim/aoc/unstar" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="WNKDKJzTirYum_0ktnyqpGgcooTBwsGotv33FzQtqafN6-2iYgN_9Z0olVTP8cMKtjBN-l73WMo-QwYL-chRYg" autocomplete="off" />
          <input type="hidden" value="gcAHnTzQuJS7IcIyipBV2EtThoi60-LjYYoF2UIafLEU-WkXwgBN1wiSqkLzHTx2lX9p9iXme4HpNPTFj_-EdA" data-csrf="true" class="js-confirm-csrf-token" />
        <input type="hidden" name="context" value="repository">
          <button data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;UNSTAR_BUTTON&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="dd8ff3f6db872d09888593fadb70c1a57348884dbace26d2d1e97d8afe1ac7b7" data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar" aria-label="Unstar this repository (321)" type="submit" data-view-component="true" class="rounded-left-2 btn-sm btn BtnGroup-item">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-star-fill starred-button-icon d-inline-block mr-2">
    <path fill-rule="evenodd" d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"></path>
</svg><span data-view-component="true" class="d-inline">
            Starred
</span>            <span id="repo-stars-counter-unstar" aria-label="321 users starred this repository" data-singular-suffix="user starred this repository" data-plural-suffix="users starred this repository" data-turbo-replace="true" title="321" data-view-component="true" class="Counter js-social-count">321</span>
</button></form>        <details id="details-user-list-160425765" data-view-component="true" class="details-reset details-overlay BtnGroup-parent js-user-list-menu d-inline-block position-relative">
        <summary aria-label="Add this repository to a list" data-view-component="true" class="btn-sm btn BtnGroup-item px-2 float-none">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
</summary>
  <details-menu
    class="SelectMenu right-0"
      src="/mebeim/aoc/lists"
      
      role="menu"
      
>
    <div class="SelectMenu-modal">
        <button class="SelectMenu-closeButton position-absolute right-0 m-2" type="button" aria-label="Close menu" data-toggle-for="details-e87693">
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
        </button>
      <div
        id="filter-menu-e87693"
        class="d-flex flex-column flex-1 overflow-hidden"
>
        <div
          class="SelectMenu-list"
          >

            <include-fragment class="SelectMenu-loading" aria-label="Loading">
              <svg role="menuitem" style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
            </include-fragment>
        </div>
        
      </div>
    </div>
  </details-menu>
</details>
</div>
    <div data-view-component="true" class="unstarred BtnGroup flex-1">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-social-form BtnGroup-parent flex-auto" data-turbo="false" action="/mebeim/aoc/star" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="0B0I5HnZfas4XUp0AafkNglhIPLBOQBx1G1njo7bgQYynmq9K9exTzc2OYASZEI8hNKa0MNQHOF80hL188fTJQ" autocomplete="off" />
        <input type="hidden" name="context" value="repository">
          <button data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;STAR_BUTTON&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="69493fa1098f678ca4f06e4763cdbc679df920028b4e2d862a985164e5f98f1e" data-ga-click="Repository, click star button, action:blob#show; text:Star" aria-label="Star this repository (321)" type="submit" data-view-component="true" class="js-toggler-target rounded-left-2 btn-sm btn BtnGroup-item">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-star d-inline-block mr-2">
    <path fill-rule="evenodd" d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25zm0 2.445L6.615 5.5a.75.75 0 01-.564.41l-3.097.45 2.24 2.184a.75.75 0 01.216.664l-.528 3.084 2.769-1.456a.75.75 0 01.698 0l2.77 1.456-.53-3.084a.75.75 0 01.216-.664l2.24-2.183-3.096-.45a.75.75 0 01-.564-.41L8 2.694v.001z"></path>
</svg><span data-view-component="true" class="d-inline">
            Star
</span>            <span id="repo-stars-counter-star" aria-label="321 users starred this repository" data-singular-suffix="user starred this repository" data-plural-suffix="users starred this repository" data-turbo-replace="true" title="321" data-view-component="true" class="Counter js-social-count">321</span>
</button></form>        <details id="details-user-list-160425765" data-view-component="true" class="details-reset details-overlay BtnGroup-parent js-user-list-menu d-inline-block position-relative">
        <summary aria-label="Add this repository to a list" data-view-component="true" class="btn-sm btn BtnGroup-item px-2 float-none">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-triangle-down">
    <path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path>
</svg>
</summary>
  <details-menu
    class="SelectMenu right-0"
      src="/mebeim/aoc/lists"
      
      role="menu"
      
>
    <div class="SelectMenu-modal">
        <button class="SelectMenu-closeButton position-absolute right-0 m-2" type="button" aria-label="Close menu" data-toggle-for="details-e87693">
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
        </button>
      <div
        id="filter-menu-e87693"
        class="d-flex flex-column flex-1 overflow-hidden"
>
        <div
          class="SelectMenu-list"
          >

            <include-fragment class="SelectMenu-loading" aria-label="Loading">
              <svg role="menuitem" style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
            </include-fragment>
        </div>
        
      </div>
    </div>
  </details-menu>
</details>
</div></div>
  </li>

    

</ul>

      </div>

        <div id="responsive-meta-container" data-turbo-replace>
</div>


          <nav data-pjax="#js-repo-pjax-container" aria-label="Repository" data-view-component="true" class="js-repo-nav js-sidenav-container-pjax js-responsive-underlinenav overflow-hidden UnderlineNav px-3 px-md-4 px-lg-5">

  <ul data-view-component="true" class="UnderlineNav-body list-style-none">
      <li data-view-component="true" class="d-inline-flex">
  <a id="code-tab" href="/mebeim/aoc" data-tab-item="i0code-tab" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages repo_deployments /mebeim/aoc" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g c" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Code&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" aria-current="page" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item selected">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path>
</svg>
        <span data-content="Code">Code</span>
          <span id="code-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="Not available" data-view-component="true" class="Counter"></span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="issues-tab" href="/mebeim/aoc/issues" data-tab-item="i1issues-tab" data-selected-links="repo_issues repo_labels repo_milestones /mebeim/aoc/issues" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g i" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Issues&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-issue-opened UnderlineNav-octicon d-none d-sm-inline">
    <path d="M8 9.5a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path><path fill-rule="evenodd" d="M8 0a8 8 0 100 16A8 8 0 008 0zM1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z"></path>
</svg>
        <span data-content="Issues">Issues</span>
          <span id="issues-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="0" hidden="hidden" data-view-component="true" class="Counter">0</span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="pull-requests-tab" href="/mebeim/aoc/pulls" data-tab-item="i2pull-requests-tab" data-selected-links="repo_pulls checks /mebeim/aoc/pulls" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g p" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Pull requests&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-git-pull-request UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"></path>
</svg>
        <span data-content="Pull requests">Pull requests</span>
          <span id="pull-requests-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="0" hidden="hidden" data-view-component="true" class="Counter">0</span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="discussions-tab" href="/mebeim/aoc/discussions" data-tab-item="i3discussions-tab" data-selected-links="repo_discussions /mebeim/aoc/discussions" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g g" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Discussions&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-comment-discussion UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M1.5 2.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-3.5a.75.75 0 00-.53.22L3.5 11.44V9.25a.75.75 0 00-.75-.75h-1a.25.25 0 01-.25-.25v-5.5zM1.75 1A1.75 1.75 0 000 2.75v5.5C0 9.216.784 10 1.75 10H2v1.543a1.457 1.457 0 002.487 1.03L7.061 10h3.189A1.75 1.75 0 0012 8.25v-5.5A1.75 1.75 0 0010.25 1h-8.5zM14.5 4.75a.25.25 0 00-.25-.25h-.5a.75.75 0 110-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0114.25 12H14v1.543a1.457 1.457 0 01-2.487 1.03L9.22 12.28a.75.75 0 111.06-1.06l2.22 2.22v-2.19a.75.75 0 01.75-.75h1a.25.25 0 00.25-.25v-5.5z"></path>
</svg>
        <span data-content="Discussions">Discussions</span>
          <span id="discussions-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="Not available" data-view-component="true" class="Counter"></span>


    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="security-tab" href="/mebeim/aoc/security" data-tab-item="i4security-tab" data-selected-links="security overview alerts policy token_scanning code_scanning /mebeim/aoc/security" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-hotkey="g s" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Security&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-shield UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M7.467.133a1.75 1.75 0 011.066 0l5.25 1.68A1.75 1.75 0 0115 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.7 1.7 0 01-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 011.217-1.667l5.25-1.68zm.61 1.429a.25.25 0 00-.153 0l-5.25 1.68a.25.25 0 00-.174.238V7c0 1.358.275 2.666 1.057 3.86.784 1.194 2.121 2.34 4.366 3.297a.2.2 0 00.154 0c2.245-.956 3.582-2.104 4.366-3.298C13.225 9.666 13.5 8.36 13.5 7V3.48a.25.25 0 00-.174-.237l-5.25-1.68zM9 10.5a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.75a.75.75 0 10-1.5 0v3a.75.75 0 001.5 0v-3z"></path>
</svg>
        <span data-content="Security">Security</span>
          <include-fragment src="/mebeim/aoc/security/overall-count" accept="text/fragment+html"></include-fragment>

    
</a></li>
      <li data-view-component="true" class="d-inline-flex">
  <a id="insights-tab" href="/mebeim/aoc/pulse" data-tab-item="i5insights-tab" data-selected-links="repo_graphs repo_contributors dependency_graph dependabot_updates pulse people community /mebeim/aoc/pulse" data-pjax="#repo-content-pjax-container" data-turbo-frame="repo-content-turbo-frame" data-analytics-event="{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Insights&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}" data-view-component="true" class="UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item">
    
                <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-graph UnderlineNav-octicon d-none d-sm-inline">
    <path fill-rule="evenodd" d="M1.5 1.75a.75.75 0 00-1.5 0v12.5c0 .414.336.75.75.75h14.5a.75.75 0 000-1.5H1.5V1.75zm14.28 2.53a.75.75 0 00-1.06-1.06L10 7.94 7.53 5.47a.75.75 0 00-1.06 0L3.22 8.72a.75.75 0 001.06 1.06L7 7.06l2.47 2.47a.75.75 0 001.06 0l5.25-5.25z"></path>
</svg>
        <span data-content="Insights">Insights</span>
          <span id="insights-repo-tab-count" data-pjax-replace="" data-turbo-replace="" title="Not available" data-view-component="true" class="Counter"></span>


    
</a></li>
</ul>
    <div style="visibility:hidden;" data-view-component="true" class="UnderlineNav-actions js-responsive-underlinenav-overflow position-absolute pr-3 pr-md-4 pr-lg-5 right-0">      <details data-view-component="true" class="details-overlay details-reset position-relative">
  <summary role="button" data-view-component="true">          <div class="UnderlineNav-item mr-0 border-0">
            <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
            <span class="sr-only">More</span>
          </div>
</summary>
  <details-menu role="menu" data-view-component="true" class="dropdown-menu dropdown-menu-sw">          <ul>
              <li data-menu-item="i0code-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item selected dropdown-item" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages repo_deployments /mebeim/aoc" href="/mebeim/aoc">
                  Code
</a>              </li>
              <li data-menu-item="i1issues-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_issues repo_labels repo_milestones /mebeim/aoc/issues" href="/mebeim/aoc/issues">
                  Issues
</a>              </li>
              <li data-menu-item="i2pull-requests-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_pulls checks /mebeim/aoc/pulls" href="/mebeim/aoc/pulls">
                  Pull requests
</a>              </li>
              <li data-menu-item="i3discussions-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_discussions /mebeim/aoc/discussions" href="/mebeim/aoc/discussions">
                  Discussions
</a>              </li>
              <li data-menu-item="i4security-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="security overview alerts policy token_scanning code_scanning /mebeim/aoc/security" href="/mebeim/aoc/security">
                  Security
</a>              </li>
              <li data-menu-item="i5insights-tab" hidden>
                <a role="menuitem" class="js-selected-navigation-item dropdown-item" data-selected-links="repo_graphs repo_contributors dependency_graph dependabot_updates pulse people community /mebeim/aoc/pulse" href="/mebeim/aoc/pulse">
                  Insights
</a>              </li>
          </ul>
</details-menu>
</details></div>
</nav>

  </div>

  



  <turbo-frame id="repo-content-turbo-frame" target="_top" data-turbo-action="advance" class="">
      <div id="repo-content-pjax-container" class="repository-content " >
      <a href="https://github.dev/" class="d-none js-github-dev-shortcut" data-hotkey=".">Open in github.dev</a>
  <a href="https://github.dev/" class="d-none js-github-dev-new-tab-shortcut" data-hotkey="Shift+.,Shift+&gt;,&gt;" target="_blank">Open in a new github.dev tab</a>



    
      
  <div class="clearfix container-xl px-3 px-md-4 px-lg-5 mt-4">
    
    
<div data-test-selector="blob-container">
  

  



    
<a class="d-none js-permalink-shortcut" data-hotkey="y" href="/mebeim/aoc/blob/8b5f3ef09cb6ddd98a99f8139dd3007ffa3e3d36/2022/README.md">Permalink</a>

<div class="d-flex flex-items-start flex-shrink-0 pb-3 flex-wrap flex-md-nowrap flex-justify-between flex-md-justify-start">
  
<div class="position-relative">
  <details
    class="js-branch-select-menu details-reset details-overlay mr-0 mb-0 "
    id="branch-select-menu"
    data-hydro-click-payload="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;REFS_SELECTOR_MENU&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="a013d765248bc94355371ca39b0632fedc2b7d66ff14e047004f76003828e4c0">
    <summary class="btn css-truncate"
            data-hotkey="w"
            title="Switch branches or tags">
      <svg text="gray" aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-git-branch">
    <path fill-rule="evenodd" d="M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z"></path>
</svg>
      <span class="css-truncate-target" data-menu-button>master</span>
      <span class="dropdown-caret"></span>
    </summary>

    
<div class="SelectMenu">
  <div class="SelectMenu-modal">
    <header class="SelectMenu-header">
      <span class="SelectMenu-title">Switch branches/tags</span>
      <button class="SelectMenu-closeButton" type="button" data-toggle-for="branch-select-menu"><svg aria-label="Close menu" aria-hidden="false" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg></button>
    </header>

    <input-demux data-action="tab-container-change:input-demux#storeInput tab-container-changed:input-demux#updateInput">
      <tab-container class="d-flex flex-column js-branches-tags-tabs" style="min-height: 0;">
        <div class="SelectMenu-filter">
          <input data-target="input-demux.source"
                 id="context-commitish-filter-field"
                 class="SelectMenu-input form-control"
                 aria-owns="ref-list-branches"
                 data-controls-ref-menu-id="ref-list-branches"
                 autofocus
                 autocomplete="off"
                 aria-label="Filter branches/tags"
                 placeholder="Filter branches/tags"
                 type="text"
          >
        </div>

        <div class="SelectMenu-tabs" role="tablist" data-target="input-demux.control" >
          <button class="SelectMenu-tab" type="button" role="tab" aria-selected="true">Branches</button>
          <button class="SelectMenu-tab" type="button" role="tab">Tags</button>
        </div>

        <div role="tabpanel" id="ref-list-branches" data-filter-placeholder="Filter branches/tags" tabindex="" class="d-flex flex-column flex-auto overflow-auto">
          <ref-selector
            type="branch"
            data-targets="input-demux.sinks"
            data-action="
              input-entered:ref-selector#inputEntered
              tab-selected:ref-selector#tabSelected
              focus-list:ref-selector#focusFirstListMember
            "
            query-endpoint="/mebeim/aoc/refs"
            
            cache-key="v0:1639444328.3499992"
            current-committish="bWFzdGVy"
            default-branch="bWFzdGVy"
            name-with-owner="bWViZWltL2FvYw=="
            prefetch-on-mouseover
          >

            <template data-target="ref-selector.fetchFailedTemplate">
              <div class="SelectMenu-message" data-index="{{ index }}">Could not load branches</div>
            </template>

              <template data-target="ref-selector.noMatchTemplate">
    <div class="SelectMenu-message">Nothing to show</div>
</template>


            <div data-target="ref-selector.listContainer" role="menu" class="SelectMenu-list " data-turbo-frame="repo-content-turbo-frame">
              <div class="SelectMenu-loading pt-3 pb-0 overflow-hidden" aria-label="Menu is loading">
                <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
              </div>
            </div>

              

<template data-target="ref-selector.itemTemplate">
  <a href="https://github.com/mebeim/aoc/blob/{{ urlEncodedRefName }}/2022/README.md" class="SelectMenu-item" role="menuitemradio" rel="nofollow" aria-checked="{{ isCurrent }}" data-index="{{ index }}" >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    <span class="flex-1 css-truncate css-truncate-overflow {{ isFilteringClass }}">{{ refName }}</span>
    <span hidden="{{ isNotDefault }}" class="Label Label--secondary flex-self-start">default</span>
  </a>
</template>


              <footer class="SelectMenu-footer"><a href="/mebeim/aoc/branches">View all branches</a></footer>
          </ref-selector>

        </div>

        <div role="tabpanel" id="tags-menu" data-filter-placeholder="Find a tag" tabindex="" hidden class="d-flex flex-column flex-auto overflow-auto">
          <ref-selector
            type="tag"
            data-action="
              input-entered:ref-selector#inputEntered
              tab-selected:ref-selector#tabSelected
              focus-list:ref-selector#focusFirstListMember
            "
            data-targets="input-demux.sinks"
            query-endpoint="/mebeim/aoc/refs"
            cache-key="v0:1639444328.3499992"
            current-committish="bWFzdGVy"
            default-branch="bWFzdGVy"
            name-with-owner="bWViZWltL2FvYw=="
          >

            <template data-target="ref-selector.fetchFailedTemplate">
              <div class="SelectMenu-message" data-index="{{ index }}">Could not load tags</div>
            </template>

            <template data-target="ref-selector.noMatchTemplate">
              <div class="SelectMenu-message" data-index="{{ index }}">Nothing to show</div>
            </template>

              

<template data-target="ref-selector.itemTemplate">
  <a href="https://github.com/mebeim/aoc/blob/{{ urlEncodedRefName }}/2022/README.md" class="SelectMenu-item" role="menuitemradio" rel="nofollow" aria-checked="{{ isCurrent }}" data-index="{{ index }}" >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check SelectMenu-icon SelectMenu-icon--check">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    <span class="flex-1 css-truncate css-truncate-overflow {{ isFilteringClass }}">{{ refName }}</span>
    <span hidden="{{ isNotDefault }}" class="Label Label--secondary flex-self-start">default</span>
  </a>
</template>


            <div data-target="ref-selector.listContainer" role="menu" class="SelectMenu-list" data-turbo-frame="repo-content-turbo-frame">
              <div class="SelectMenu-loading pt-3 pb-0 overflow-hidden" aria-label="Menu is loading">
                <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
              </div>
            </div>
              <footer class="SelectMenu-footer"><a href="/mebeim/aoc/tags">View all tags</a></footer>
          </ref-selector>
        </div>
      </tab-container>
    </input-demux>
  </div>
</div>

  </details>

</div>


<div class="Overlay--hidden Overlay-backdrop--center" data-modal-dialog-overlay>
  <modal-dialog role="dialog" id="warn-tag-match-create-branch-dialog" aria-modal="true" aria-labelledby="warn-tag-match-create-branch-dialog-header" data-view-component="true" class="Overlay Overlay--width-large Overlay--height-auto Overlay--motion-scaleFade">
      <header class="Overlay-header Overlay-header--large Overlay-header--divided">
        <div class="Overlay-headerContentWrap">
          <div class="Overlay-titleWrap">
            <h1 id="warn-tag-match-create-branch-dialog-header" class="Overlay-title">Name already in use</h1>
          </div>
          <div class="Overlay-actionWrap">
            <button data-close-dialog-id="warn-tag-match-create-branch-dialog" aria-label="Close" type="button" data-view-component="true" class="close-button Overlay-closeButton"><svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg></button>
          </div>
        </div>
      </header>
    <div class="Overlay-body ">
      
          <div data-view-component="true">      A tag already exists with the provided branch name. Many Git commands accept both tag and branch names, so creating this branch may cause unexpected behavior. Are you sure you want to create this branch?
</div>

    </div>
      <footer class="Overlay-footer Overlay-footer--alignEnd">
            <button data-close-dialog-id="warn-tag-match-create-branch-dialog" type="button" data-view-component="true" class="btn">    Cancel
</button>
            <button data-submit-dialog-id="warn-tag-match-create-branch-dialog" type="button" data-view-component="true" class="btn-danger btn">    Create
</button>
      </footer>
</modal-dialog></div>


  <h2 id="blob-path" class="breadcrumb flex-auto flex-self-center min-width-0 text-normal mx-2 width-full width-md-auto flex-order-1 flex-md-order-none mt-3 mt-md-0">
    <span class="js-repo-root text-bold"><span class="js-path-segment d-inline-block wb-break-all"><a data-turbo-frame="repo-content-turbo-frame" href="/mebeim/aoc"><span>aoc</span></a></span></span><span class="separator">/</span><span class="js-path-segment d-inline-block wb-break-all"><a data-turbo-frame="repo-content-turbo-frame" href="/mebeim/aoc/tree/master/2022"><span>2022</span></a></span><span class="separator">/</span><strong class="final-path">README.md</strong>
  </h2>
    <a href="/mebeim/aoc/find/master" data-pjax="" data-hotkey="t" data-view-component="true" class="btn mr-2 d-none d-md-block">    Go to file
</a>
  <details id="blob-more-options-details" data-view-component="true" class="details-overlay details-reset position-relative">
    <summary role="button" data-view-component="true" class="btn">    <svg aria-label="More options" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
</summary>
  <div data-view-component="true">      <ul class="dropdown-menu dropdown-menu-sw">
        <li class="d-block d-md-none">
          <a class="dropdown-item d-flex flex-items-baseline" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;FIND_FILE_BUTTON&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="a92e70292ab4af39ddb0a6cb471c59c9894d633fc9167c26459d6f867036bcb0" data-ga-click="Repository, find file, location:repo overview" data-hotkey="t" href="/mebeim/aoc/find/master">
            <span class="flex-auto">Go to file</span>
            <span class="text-small color-fg-muted" aria-hidden="true">T</span>
</a>        </li>
        <li data-toggle-for="blob-more-options-details">
            <button data-toggle-for="jumpto-line-details-dialog" type="button" data-view-component="true" class="dropdown-item btn-link">    <span class="d-flex flex-items-baseline">
              <span class="flex-auto">Go to line</span>
              <span class="text-small color-fg-muted" aria-hidden="true">L</span>
            </span>
</button>        </li>
        <li class="dropdown-divider" role="none"></li>
        <li>
          <clipboard-copy data-toggle-for="blob-more-options-details" aria-label="Copy path" value="2022/README.md" data-view-component="true" class="dropdown-item cursor-pointer">
    
            Copy path

</clipboard-copy>        </li>
        <li>
          <clipboard-copy data-toggle-for="blob-more-options-details" aria-label="Copy permalink" value="https://github.com/mebeim/aoc/blob/8b5f3ef09cb6ddd98a99f8139dd3007ffa3e3d36/2022/README.md" data-view-component="true" class="dropdown-item cursor-pointer">
    
            <span class="d-flex flex-items-baseline">
              <span class="flex-auto">Copy permalink</span>
            </span>

</clipboard-copy>        </li>
      </ul>
</div>
</details></div>





    <div id="spoof-warning" class="mt-0 pb-3" hidden aria-hidden>
  <div data-view-component="true" class="flash flash-warn mt-0 clearfix">
  
  
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert float-left mt-1">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>

      <div class="overflow-hidden">This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.</div>


  
</div></div>

    <include-fragment src="/mebeim/aoc/spoofed_commit_check/8b5f3ef09cb6ddd98a99f8139dd3007ffa3e3d36" data-test-selector="spoofed-commit-check"></include-fragment>

    <div class="Box d-flex flex-column flex-shrink-0 mb-3">
  <include-fragment src="/mebeim/aoc/contributors/master/2022/README.md" class="commit-loader">
    <div class="Box-header d-flex flex-items-center">
      <div class="Skeleton avatar avatar-user flex-shrink-0 ml-n1 mr-n1 mt-n1 mb-n1" style="width:24px;height:24px;"></div>
      <div class="Skeleton Skeleton--text col-5 ml-2">&nbsp;</div>
    </div>

    <div class="Box-body d-flex flex-items-center" >
      <div class="Skeleton Skeleton--text col-1">&nbsp;</div>
      <span class="color-fg-danger h6 loader-error">Cannot retrieve contributors at this time</span>
    </div>
</include-fragment></div>



      








    <readme-toc>

    <div data-target="readme-toc.content" class="Box mt-3 position-relative">
      
  <div
    class="Box-header js-blob-header blob-header js-sticky js-position-sticky top-0 p-2 d-flex flex-shrink-0 flex-md-row flex-items-center"
    style="position: sticky; z-index: 1;"
  >

      <details
  data-target="readme-toc.trigger"
  data-menu-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;trigger&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}"
  data-menu-hydro-click-hmac="e1e37a909516b2fce13a2ef5c34bb89304537d13d799479c025d6c6a9737528f"
  class="dropdown details-reset details-overlay"
>
  <summary
    class="btn btn-octicon m-0 mr-2 p-2"
    aria-haspopup="true"
    aria-label="Table of Contents">
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-list-unordered">
    <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
</svg>
  </summary>


  <details-menu class="SelectMenu" role="menu">
    <div class="SelectMenu-modal rounded-3 mt-1" style="max-height:340px;">

        <div class="SelectMenu-filter">
          <input
            class="SelectMenu-input form-control js-filterable-field"
            id="toc-filter-field"
            type="text"
            autocomplete="off"
            spellcheck="false"
            autofocus
            placeholder="Filter headings"
            aria-label="Filter headings">
        </div>

      <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" data-filterable-for="toc-filter-field" data-filterable-type="substring">
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 text-emphasized" style="-webkit-box-orient: vertical; padding-left: 12px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#advent-of-code-2022-walkthrough">Advent of Code 2022 walkthrough</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#table-of-contents">Table of Contents</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-1---calorie-counting">Day 1 - Calorie Counting</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-2---rock-paper-scissors">Day 2 - Rock Paper Scissors</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-1">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-1">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-3---rucksack-reorganization">Day 3 - Rucksack Reorganization</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-2">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-2">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-4---camp-cleanup">Day 4 - Camp Cleanup</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-3">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-3">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-5---supply-stacks">Day 5 - Supply Stacks</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-4">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-4">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-6---tuning-trouble">Day 6 - Tuning Trouble</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-5">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-5">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-7---no-space-left-on-device">Day 7 - No Space Left On Device</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-6">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-6">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-8---treetop-tree-house">Day 8 - Treetop Tree House</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-7">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-7">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#reflections">Reflections</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-9---rope-bridge">Day 9 - Rope Bridge</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-8">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-8">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-10---cathode-ray-tube">Day 10 - Cathode-Ray Tube</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-9">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-9">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-11---monkey-in-the-middle">Day 11 - Monkey in the Middle</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-10">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-10">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-12---hill-climbing-algorithm">Day 12 - Hill Climbing Algorithm</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-11">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-11">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-13---distress-signal">Day 13 - Distress Signal</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-12">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-12">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-14---regolith-reservoir">Day 14 - Regolith Reservoir</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-13">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-13">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-15---beacon-exclusion-zone">Day 15 - Beacon Exclusion Zone</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-14">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-14">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-16---proboscidea-volcanium">Day 16 - Proboscidea Volcanium</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-15">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-15">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-18---boiling-boulders">Day 18 - Boiling Boulders</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-16">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-16">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-19---not-enough-minerals">Day 19 - Not Enough Minerals</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-17">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-17">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-20---grove-positioning-system">Day 20 - Grove Positioning System</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-18">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-18">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-21---monkey-math">Day 21 - Monkey Math</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-19">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-19">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-22---monkey-map">Day 22 - Monkey Map</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-20">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-20">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-24---blizzard-basin">Day 24 - Blizzard Basin</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-1-21">Part 1</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 36px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#part-2-21">Part 2</a>
          <a role="menuitem" class="filter-item SelectMenu-item ws-normal wb-break-word line-clamp-2 py-1 " style="-webkit-box-orient: vertical; padding-left: 24px;" data-action="click:readme-toc#blur" data-targets="readme-toc.entries" data-hydro-click="{&quot;event_type&quot;:&quot;repository_toc_menu.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;entry&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="222067214619c11fd3d817e0aa713433075667975b3343d9bdddcb6926cfc20e" href="#day-25---full-of-hot-air">Day 25 - Full of Hot Air</a>
      </div>
    </div>
  </details-menu>
</details>


  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1">

      6096 lines (4884 sloc)
      <span class="file-info-divider"></span>
    228 KB
  </div>

  <div class="d-flex py-1 py-md-0 flex-auto flex-order-1 flex-md-order-2 flex-sm-grow-0 flex-justify-between hide-sm hide-md">
        <div class="BtnGroup">
      <a href="/mebeim/aoc/blob/master/2022/README.md?plain=1" data-permalink-href="/mebeim/aoc/blob/8b5f3ef09cb6ddd98a99f8139dd3007ffa3e3d36/2022/README.md?plain=1" aria-label="Display the source blob" data-view-component="true" class="source tooltipped tooltipped tooltipped-n  js-permalink-replaceable-link btn-sm btn BtnGroup-item">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-code">
    <path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path>
</svg>
</a>      <a href="/mebeim/aoc/blob/master/2022/README.md" data-permalink-href="/mebeim/aoc/blob/8b5f3ef09cb6ddd98a99f8139dd3007ffa3e3d36/2022/README.md" aria-label="Display the rendered blob" data-view-component="true" class="rendered tooltipped tooltipped tooltipped-n selected js-permalink-replaceable-link btn-sm btn BtnGroup-item">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-file">
    <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 019 4.25V1.5H3.75zm6.75.062V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16h-9.5A1.75 1.75 0 012 14.25V1.75z"></path>
</svg>
</a>  </div>


    <div class="BtnGroup">
        <a data-permalink-href="/mebeim/aoc/raw/8b5f3ef09cb6ddd98a99f8139dd3007ffa3e3d36/2022/README.md" href="/mebeim/aoc/raw/master/2022/README.md" id="raw-url" data-view-component="true" class="js-permalink-replaceable-link btn-sm btn BtnGroup-item">    Raw
</a>          <a data-permalink-href="/mebeim/aoc/blame/8b5f3ef09cb6ddd98a99f8139dd3007ffa3e3d36/2022/README.md" href="/mebeim/aoc/blame/master/2022/README.md" data-hotkey="b" data-view-component="true" class="js-update-url-with-hash js-permalink-replaceable-link btn-sm btn BtnGroup-item">    Blame
</a>    </div>

    <div class="d-flex">
        
<div class="ml-1" data-test-selector="edit-dropdown-menu-component">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="BtnGroup-parent js-update-url-with-hash " data-turbo="false" action="/mebeim/aoc/edit/master/2022/README.md" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="PQPTmFf3KpET3J2E6oTAQNAoSp1KAjSgqXOCYMnFuTNHdHDvCvK2rPKI47s2DbIBtz4SBHcHoXH0LmdGHuFlQQ" autocomplete="off" />
      <button title="Fork this repository and edit the file" data-hotkey="e" data-disable-with="" data-test-selector="edit-icon-button" type="submit" data-view-component="true" class="btn-sm BtnGroup-item btn">    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-pencil">
    <path fill-rule="evenodd" d="M11.013 1.427a1.75 1.75 0 012.474 0l1.086 1.086a1.75 1.75 0 010 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 01-.927-.928l.929-3.25a1.75 1.75 0 01.445-.758l8.61-8.61zm1.414 1.06a.25.25 0 00-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 000-.354l-1.086-1.086zM11.189 6.25L9.75 4.81l-6.286 6.287a.25.25 0 00-.064.108l-.558 1.953 1.953-.558a.249.249 0 00.108-.064l6.286-6.286z"></path>
</svg>
</button></form>
  <details class="details-reset details-overlay select-menu BtnGroup-parent d-inline-block position-relative">
      <summary data-disable-invalid="" data-disable-with="" data-dropdown-tracking="{&quot;type&quot;:&quot;blob_edit_dropdown.more_options_click&quot;,&quot;context&quot;:{&quot;repository_id&quot;:160425765,&quot;actor_id&quot;:8001516,&quot;github_dev_enabled&quot;:true,&quot;edit_enabled&quot;:true,&quot;small_screen&quot;:false}}" aria-label="Select additional options" data-view-component="true" class="js-blob-dropdown-click select-menu-button btn-sm btn BtnGroup-item float-none px-2">
</summary>    <div class="SelectMenu right-0">
      <div class="SelectMenu-modal width-full">
        <div class="SelectMenu-list SelectMenu-list--borderless py-2">
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="SelectMenu-item js-update-url-with-hash " data-turbo="false" action="/mebeim/aoc/edit/master/2022/README.md" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="xmKBkldL-aKww8WKPvY1xrMzcBbATi4hgnOZMw053lC8FSLlCk5ln1GXu7Xif0eH1CUoj_1Lu_DfLnwV2h0CIg" autocomplete="off" />
              <button title="Fork this repository and edit the file" data-test-selector="edit-text-button" type="submit" data-view-component="true" class="btn-invisible btn width-full d-flex flex-justify-between color-fg-default text-normal p-0">    <div class="mr-5">Edit this file</div>
              <div class="color-fg-muted">E</div>
</button></form>
            <a aria-label="Open this file in github.dev" data-test-selector="github-dev-link" data-dropdown-tracking="{&quot;type&quot;:&quot;blob_edit_dropdown.dev_link_click&quot;,&quot;context&quot;:{&quot;repository_id&quot;:160425765,&quot;actor_id&quot;:8001516,&quot;edit_enabled&quot;:true,&quot;small_screen&quot;:false}}" href="https://github.dev/" data-view-component="true" class="SelectMenu-item js-github-dev-shortcut js-blob-dropdown-click width-full d-flex flex-justify-between color-fg-default f5 text-normal">
              <div class="mr-5 no-wrap">Open in github.dev</div>
              <div class="color-fg-muted">.</div>
</a>
            <a data-platforms="windows,mac" data-test-selector="github-desktop-link" aria-label="Open this file in GitHub Desktop" href="https://desktop.github.com" data-view-component="true" class="SelectMenu-item no-wrap js-remove-unless-platform width-full text-normal color-fg-default f5">
              Open in GitHub Desktop
</a>        </div>
      </div>
    </div>
  </details>
</div>


        
<div data-test-selector="remote-clipboard-copy">
  <remote-clipboard-copy class="d-inline-block btn-octicon" style="height: 26px" data-src="/mebeim/aoc/raw/8b5f3ef09cb6ddd98a99f8139dd3007ffa3e3d36/2022/README.md" data-action="click:remote-clipboard-copy#remoteCopy">
  

  <span data-target="remote-clipboard-copy.idle">      <span class="tooltipped tooltipped-nw cursor-pointer" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;COPY_RAW_CONTENTS_BUTTON&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="a3ec1721b78604aac64525dad6138783a2789f9e3113004f23c20253f96da1ac" aria-label="Copy raw contents">
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
</span></span>
  <span data-target="remote-clipboard-copy.fetching" hidden="hidden">      <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="16" height="16" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
</span>
  <span data-target="remote-clipboard-copy.success" hidden="hidden">      <span class="tooltipped tooltipped-nw" aria-label="Copied!">
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check color-fg-success">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
      </span>
</span>
  <span data-target="remote-clipboard-copy.error" hidden="hidden">      <span class="tooltipped tooltipped-nw" aria-label="Something went wrong. Try again.">
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert color-fg-attention">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
      </span>
</span>
</remote-clipboard-copy></div>


          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="inline-form" data-turbo="false" action="/mebeim/aoc/delete/master/2022/README.md" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="WoNhXyvphNG7ymQdu0iSFktWKEZtT77kW3zu-o5LM0mOBxsSBXk8Jrvi1ZlYccru-DcHVSaKEih7c591SZC-Rg" />
            <button class="btn-octicon btn-octicon-danger tooltipped tooltipped-nw" type="submit"
              aria-label="Fork this repository and delete the file" data-disable-with>
              <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-trash">
    <path fill-rule="evenodd" d="M6.5 1.75a.25.25 0 01.25-.25h2.5a.25.25 0 01.25.25V3h-3V1.75zm4.5 0V3h2.25a.75.75 0 010 1.5H2.75a.75.75 0 010-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75zM4.496 6.675a.75.75 0 10-1.492.15l.66 6.6A1.75 1.75 0 005.405 15h5.19c.9 0 1.652-.681 1.741-1.576l.66-6.6a.75.75 0 00-1.492-.149l-.66 6.6a.25.25 0 01-.249.225h-5.19a.25.25 0 01-.249-.225l-.66-6.6z"></path>
</svg>
            </button>
</form>    </div>
  </div>

    <div class="d-flex hide-lg hide-xl flex-order-2 flex-grow-0">
      <details class="dropdown details-reset details-overlay d-inline-block">
        <summary
          class="js-blob-dropdown-click btn-octicon p-2"
          aria-haspopup="true"
          aria-label="possible actions"
          data-test-selector="small-screen-more-options"
          data-dropdown-tracking="{&quot;type&quot;:&quot;blob_edit_dropdown.more_options_click&quot;,&quot;context&quot;:{&quot;repository_id&quot;:160425765,&quot;actor_id&quot;:8001516,&quot;github_dev_enabled&quot;:true,&quot;edit_enabled&quot;:true,&quot;small_screen&quot;:true}}"
        >
          <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-kebab-horizontal">
    <path d="M8 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm13 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
</svg>
        </summary>

        <ul class="dropdown-menu dropdown-menu-sw" style="width: 175px">
            <li>
                <a class="dropdown-item tooltipped tooltipped-nw js-remove-unless-platform"
                   data-platforms="windows,mac"
                   href="https://desktop.github.com">
                  Open with Desktop
                </a>
            </li>
          <li>
            <a class="dropdown-item" href="/mebeim/aoc/raw/master/2022/README.md">
              View raw
            </a>
          </li>
            <li>
              <remote-clipboard-copy class="dropdown-item" data-src="/mebeim/aoc/raw/master/2022/README.md" data-action="click:remote-clipboard-copy#remoteCopy">
  

  <span data-target="remote-clipboard-copy.idle">                  <span class="cursor-pointer" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;COPY_RAW_CONTENTS_BUTTON&quot;,&quot;repository_id&quot;:160425765,&quot;originating_url&quot;:&quot;https://github.com/mebeim/aoc/blob/master/2022/README.md&quot;,&quot;user_id&quot;:8001516}}" data-hydro-click-hmac="a3ec1721b78604aac64525dad6138783a2789f9e3113004f23c20253f96da1ac">
                    Copy raw contents
</span></span>
  <span data-target="remote-clipboard-copy.fetching" hidden="hidden">                  Copy raw contents
                  <span class="d-inline-block position-relative" style="top: 3px">
                    <svg aria-label="fetching contentsâ€¦" style="box-sizing: content-box; color: var(--color-icon-primary);" width="16" height="16" viewBox="0 0 16 16" fill="none" data-view-component="true" class="anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
                  </span>
</span>
  <span data-target="remote-clipboard-copy.success" hidden="hidden">                  Copy raw contents
                  <svg aria-label="Copied!" role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check color-fg-success">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
</span>
  <span data-target="remote-clipboard-copy.error" hidden="hidden">                  Copy raw contents
                  <svg aria-label="Something went wrong. Try again." role="img" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert color-fg-attention">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
</span>
</remote-clipboard-copy>            </li>
            <li>
              <a class="dropdown-item" href="/mebeim/aoc/blame/master/2022/README.md">
                View blame
              </a>
            </li>

              <li class="dropdown-divider" role="none"></li>
              <li>
                <a class="dropdown-item" href="/mebeim/aoc/edit/master/2022/README.md">Edit file</a>
              </li>
                <li>
                  <a class="dropdown-item js-github-dev-shortcut js-blob-dropdown-click" data-test-selector="small-screen-github-dev-link" data-dropdown-tracking="{&quot;type&quot;:&quot;blob_edit_dropdown.dev_link_click&quot;,&quot;context&quot;:{&quot;repository_id&quot;:160425765,&quot;actor_id&quot;:8001516,&quot;edit_enabled&quot;:true,&quot;small_screen&quot;:true}}" href="https://github.dev/">Open with github.dev</a>
                </li>
              <li>
                <a class="dropdown-item menu-item-danger" href="/mebeim/aoc/delete/master/2022/README.md">Delete file</a>
              </li>
        </ul>
      </details>
    </div>
</div>


        <div id="readme" class="Box-body readme blob js-code-block-container p-5 p-xl-6 gist-border-0">
    <article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-advent-of-code-2022-walkthrough" class="anchor" aria-hidden="true" href="#advent-of-code-2022-walkthrough"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advent of Code 2022 walkthrough</h1>
<h2 dir="auto"><a id="user-content-table-of-contents" class="anchor" aria-hidden="true" href="#table-of-contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of Contents</h2>
<ul dir="auto">
<li><a href="#day-1---calorie-counting">Day 1 - Calorie Counting</a></li>
<li><a href="#day-2---rock-paper-scissors">Day 2 - Rock Paper Scissors</a></li>
<li><a href="#day-3---rucksack-reorganization">Day 3 - Rucksack Reorganization</a></li>
<li><a href="#day-4---camp-cleanup">Day 4 - Camp Cleanup</a></li>
<li><a href="#day-5---supply-stacks">Day 5 - Supply Stacks</a></li>
<li><a href="#day-6---tuning-trouble">Day 6 - Tuning Trouble</a></li>
<li><a href="#day-7---no-space-left-on-device">Day 7 - No Space Left On Device</a></li>
<li><a href="#day-8---treetop-tree-house">Day 8 - Treetop Tree House</a></li>
<li><a href="#day-9---rope-bridge">Day 9 - Rope Bridge</a></li>
<li><a href="#day-10---cathode-ray-tube">Day 10 - Cathode-Ray Tube</a></li>
<li><a href="#day-11---monkey-in-the-middle">Day 11 - Monkey in the Middle</a></li>
<li><a href="#day-12---hill-climbing-algorithm">Day 12 - Hill Climbing Algorithm</a></li>
<li><a href="#day-13---distress-signal">Day 13 - Distress Signal</a></li>
<li><a href="#day-14---regolith-reservoir">Day 14 - Regolith Reservoir</a></li>
<li><a href="#day-15---beacon-exclusion-zone">Day 15 - Beacon Exclusion Zone</a></li>
<li><a href="#day-16---proboscidea-volcanium">Day 16 - Proboscidea Volcanium</a></li>
<li>Day 17 - Pyroclastic Flow: <em>TODO</em></li>
<li><a href="#day-18---boiling-boulders">Day 18 - Boiling Boulders</a></li>
<li><a href="#day-19---not-enough-minerals">Day 19 - Not Enough Minerals</a></li>
<li><a href="#day-20---grove-positioning-system">Day 20 - Grove Positioning System</a></li>
<li><a href="#day-21---monkey-math">Day 21 - Monkey Math</a></li>
<li><a href="#day-22---monkey-map">Day 22 - Monkey Map</a></li>
<li>Day 23 - Unstable Diffusion: <em>TODO</em></li>
<li><a href="#day-24---blizzard-basin">Day 24 - Blizzard Basin</a></li>
<li><a href="#day-25---full-of-hot-air">Day 25 - Full of Hot Air</a></li>
</ul>
<h2 dir="auto"><a id="user-content-day-1---calorie-counting" class="anchor" aria-hidden="true" href="#day-1---calorie-counting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 1 - Calorie Counting</h2>
<p dir="auto"><a href="https://adventofcode.defaultdictcom/2022/day/1" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day01.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1" class="anchor" aria-hidden="true" href="#part-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Welcome to AoC 2022! First day, easiest problem: we are given a list of integers
divided in chunks by empty lines, and we need to find the chunk whose integers
have the greatest sum.</p>
<p dir="auto">There are a couple of easy ways of parsing today's input, I took advantage of a
<a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions" rel="nofollow">list comprehension</a> coupled with the
<a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> to do this in two lines.</p>
<p dir="auto">First, we read the entire input and <a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow"><code>.split()</code></a> its content on
empty lines (i.e. two consecutive newline characters <code>\n\n</code>):</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="fin = open(...)
chunks = fin.read().split('\n\n')
# ['1000\n2000\n3000', '4000', '5000\n6000']"><pre><span class="pl-s1">fin</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(...)
<span class="pl-s1">chunks</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">split</span>(<span class="pl-s">'<span class="pl-cce">\n</span><span class="pl-cce">\n</span>'</span>)
<span class="pl-c"># ['1000\n2000\n3000', '4000', '5000\n6000']</span></pre></div>
<p dir="auto">To transform a single chunk from a single string into a list of integers we can
<code>.split()</code> it again and then use <code>tuple(map(int, chunk))</code> to turn it into a
<a href="https://docs.python.org/3/tutorial/datastructures.html#tuples-and-sequences" rel="nofollow"><code>tuple</code></a> of <code>int</code> (we could also transform it into a
<a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="nofollow"><code>list</code></a>, but for things that should be immutable it's good practice to
use a <code>tuple</code>). To do the same for <em>all</em> chunks we can either use
<a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> again or a <em>list comprehension</em>. In this case, the
latter is easier to write:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="chunks = [tuple(map(int, chunk.split())) for chunk in chunks]
# [(1000, 2000, 3000), (4000,), (5000, 6000)]"><pre><span class="pl-s1">chunks</span> <span class="pl-c1">=</span> [<span class="pl-en">tuple</span>(<span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">chunk</span>.<span class="pl-en">split</span>())) <span class="pl-k">for</span> <span class="pl-s1">chunk</span> <span class="pl-c1">in</span> <span class="pl-s1">chunks</span>]
<span class="pl-c"># [(1000, 2000, 3000), (4000,), (5000, 6000)]</span></pre></div>
<p dir="auto">We end up with a list of tuples, and now we can search for the one whose sum is
the greatest. We can now <code>map()</code> each of those tuples into the <code>sum()</code> of its
elements and then use <a href="https://docs.python.org/3/library/functions.html#max" rel="nofollow"><code>max()</code></a> to find the greatest.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="best = max(map(sum, chunks))
print('Part 1:', best)"><pre><span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-en">map</span>(<span class="pl-s1">sum</span>, <span class="pl-s1">chunks</span>))
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">best</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2" class="anchor" aria-hidden="true" href="#part-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">For the second part, we need to find the top 3 chunks with the greatest sums and
then sum their sums.</p>
<p dir="auto">While in general there are algorithms such as <a href="https://en.wikipedia.org/wiki/Quickselect" rel="nofollow">quickselect</a>
that are able to find the Nth largest elements of an unsorted sequence in
<a href="https://en.wikipedia.org/wiki/Time_complexity#Linear_time" rel="nofollow">linear time</a> (i.e. <em>O(n)</em>), Python sadly does not provide any
such function in its standard library. However we're still very far from needing
such a level of optimization, and the list we are dealing with is pretty small.
The "naive" solution of <a href="https://docs.python.org/3/library/stdtypes.html#list.sort" rel="nofollow"><code>.sort()</code></a>ing the chunks (<em>O(nlogn)</em>) and
then extracting the top 3 works just fine.</p>
<p dir="auto">We pass <code>reverse=True</code> to sort in descending order, and <code>key=sum</code> to sort the
chunks according to the sum of their elements (the <code>key=</code> function is applied to
each chunk before comparing it with others).</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="chunks.sort(key=sum, reverse=True)
best3 = sum(map(sum, chunks[:3]))

print('Part 2:', best3)"><pre><span class="pl-s1">chunks</span>.<span class="pl-en">sort</span>(<span class="pl-s1">key</span><span class="pl-c1">=</span><span class="pl-s1">sum</span>, <span class="pl-s1">reverse</span><span class="pl-c1">=</span><span class="pl-c1">True</span>)
<span class="pl-s1">best3</span> <span class="pl-c1">=</span> <span class="pl-en">sum</span>(<span class="pl-en">map</span>(<span class="pl-s1">sum</span>, <span class="pl-s1">chunks</span>[:<span class="pl-c1">3</span>]))

<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">best3</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-2---rock-paper-scissors" class="anchor" aria-hidden="true" href="#day-2---rock-paper-scissors"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 2 - Rock Paper Scissors</h2>
<p dir="auto"><a href="https://advpairwiseentofcode.com/2022/day/2" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day02.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-1" class="anchor" aria-hidden="true" href="#part-1-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">As you may have guessed from the title, today we're playing probably one of the
oldest games in the world. We are given a list of rounds of rock-paper-scissors
composed of two letters, one for the first player and one for the second one
(us), indicating for each round who made which choice. We have to score each
round and compute the total score for us. Each round, a win is worth 6 points, a
draw 3 and a loss 0. Additionally, we get 1 point if we played rock, 2 if we
played paper and 3 if we played scissors.</p>
<p dir="auto">The rules seem pretty simple. The only annoying thing is that rock, paper and
scissors are identified by <code>ABC</code> for the first player and <code>XYZ</code> for the second.
For any given round there are a total of 9 possible combinations of moves: <code>AX</code>,
<code>AY</code>, <code>AZ</code>, <code>BX</code>, ..., <code>CZ</code>. Given the rules, the easiest solution is to
pre-compute all possible scores for the second player:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="SCORES = (
    1 + 3, # A (rock)     vs X (rock)     -&gt; draw
    2 + 6, # A (rock)     vs Y (paper)    -&gt; win
    3 + 0, # A (rock)     vs Z (scissors) -&gt; loss
    1 + 0, # B (paper)    vs X (rock)     -&gt; loss
    2 + 3, # B (paper)    vs Y (paper)    -&gt; draw
    3 + 6, # B (paper)    vs Z (scissors) -&gt; win
    1 + 6, # C (scissors) vs X (rock)     -&gt; win
    2 + 0, # C (scissors) vs Y (paper)    -&gt; loss
    3 + 3, # C (scissors) vs Z (scissors) -&gt; draw
)"><pre><span class="pl-v">SCORES</span> <span class="pl-c1">=</span> (
    <span class="pl-c1">1</span> <span class="pl-c1">+</span> <span class="pl-c1">3</span>, <span class="pl-c"># A (rock)     vs X (rock)     -&gt; draw</span>
    <span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-c1">6</span>, <span class="pl-c"># A (rock)     vs Y (paper)    -&gt; win</span>
    <span class="pl-c1">3</span> <span class="pl-c1">+</span> <span class="pl-c1">0</span>, <span class="pl-c"># A (rock)     vs Z (scissors) -&gt; loss</span>
    <span class="pl-c1">1</span> <span class="pl-c1">+</span> <span class="pl-c1">0</span>, <span class="pl-c"># B (paper)    vs X (rock)     -&gt; loss</span>
    <span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-c1">3</span>, <span class="pl-c"># B (paper)    vs Y (paper)    -&gt; draw</span>
    <span class="pl-c1">3</span> <span class="pl-c1">+</span> <span class="pl-c1">6</span>, <span class="pl-c"># B (paper)    vs Z (scissors) -&gt; win</span>
    <span class="pl-c1">1</span> <span class="pl-c1">+</span> <span class="pl-c1">6</span>, <span class="pl-c"># C (scissors) vs X (rock)     -&gt; win</span>
    <span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-c1">0</span>, <span class="pl-c"># C (scissors) vs Y (paper)    -&gt; loss</span>
    <span class="pl-c1">3</span> <span class="pl-c1">+</span> <span class="pl-c1">3</span>, <span class="pl-c"># C (scissors) vs Z (scissors) -&gt; draw</span>
)</pre></div>
<p dir="auto">Now if we want to know the score for the round <code>A Z</code> we can simply access
<code>SCORES[2]</code>, for <code>C Y</code> <code>SCORES[7]</code> and so on. The index to use can be calculated
by simply transforming the 3 possible moves into integers: <code>ABC</code> -&gt; <code>036</code> and
<code>XYZ</code> -&gt; <code>012</code> and summing them up. To make the operation easier we can
translate the entire input at once using <a href="https://docs.python.org/3/library/stdtypes.html#str.maketrans" rel="nofollow"><code>str.maketrans()</code></a>
and <a href="https://docs.python.org/3/library/stdtypes.html#str.translate" rel="nofollow"><code>str.translate()</code></a>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="table = str.maketrans('ABCXYZ', '036123')

with open(...):
    data = fin.read().translate(table)"><pre><span class="pl-s1">table</span> <span class="pl-c1">=</span> <span class="pl-s1">str</span>.<span class="pl-en">maketrans</span>(<span class="pl-s">'ABCXYZ'</span>, <span class="pl-s">'036123'</span>)

<span class="pl-k">with</span> <span class="pl-en">open</span>(...):
    <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">translate</span>(<span class="pl-s1">table</span>)</pre></div>
<p dir="auto">The [<code>with</code>][py-with] statement used above is useful to auto-close the file once
done using it. We can also avoid decoding the input by opening it with
<code>open(..., 'rb')</code> since we already know we'll only be reading simple ASCII
characters, but in that case we'd also need to use <code>bytes.maketrans()</code> and
<code>bytes.translate()</code> instead.</p>
<p dir="auto">Now that we read and translated the input moves into integer values, we can
iterate on each line of input, split it, parse the two integers, and use them to
index <code>SCORES</code>. As usual, <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> comes in handy.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="score = 0

for line in data.splitlines():
    a, b = map(int, line.split())
    score += SCORES[a + b]

print('Part 1:', score)"><pre><span class="pl-s1">score</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">data</span>.<span class="pl-en">splitlines</span>():
    <span class="pl-s1">a</span>, <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">line</span>.<span class="pl-en">split</span>())
    <span class="pl-s1">score</span> <span class="pl-c1">+=</span> <span class="pl-v">SCORES</span>[<span class="pl-s1">a</span> <span class="pl-c1">+</span> <span class="pl-s1">b</span>]

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">score</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-1" class="anchor" aria-hidden="true" href="#part-2-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">Now we are told that the second letter does not actually represent the move of
the second player, but rather an instruction: <code>X</code> means we should play a move
that makes us lose, <code>Y</code> means we should draw, and <code>Z</code> means we should win.</p>
<p dir="auto">This doesn't change our algorithm one bit. The only thing that changes is the
move we need to play. For example, for <code>A Y</code> the first player played "rock"
(<code>A</code>), and since we should draw (<code>Y</code>) we need to play rock too, thus the score
for the round would be <code>3 + 1</code> (draw + rock). All we need to do is declare a
second <code>SCORES</code> tuple for the second part with different precomputed scores. We
can then use the same loop we already wrote to compute the scores for both parts
together.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="SCORES1 = ... # SCORES from part 1, unchanged

SCORES2 = (
    0 + 3, # A (rock)     and X (lose) -&gt; play scissors
    3 + 1, # A (rock)     and Y (draw) -&gt; play rock
    6 + 2, # A (rock)     and Z (win)  -&gt; play paper
    0 + 1, # B (paper)    and X (lose) -&gt; play rock
    3 + 2, # B (paper)    and Y (draw) -&gt; play paper
    6 + 3, # B (paper)    and Z (win)  -&gt; play scissors
    0 + 2, # C (scissors) and X (lose) -&gt; play paper
    3 + 3, # C (scissors) and Y (draw) -&gt; play scissors
    6 + 1, # C (scissors) and Z (win)  -&gt; play rock
)

score1 = score2 = 0

for line in data.splitlines():
    a, b = map(int, line.split())
    score1 += SCORES1[a + b]
    score2 += SCORES2[a + b]

print('Part 1:', score1)
print('Part 2:', score2)"><pre><span class="pl-v">SCORES1</span> <span class="pl-c1">=</span> ... <span class="pl-c"># SCORES from part 1, unchanged</span>

<span class="pl-v">SCORES2</span> <span class="pl-c1">=</span> (
    <span class="pl-c1">0</span> <span class="pl-c1">+</span> <span class="pl-c1">3</span>, <span class="pl-c"># A (rock)     and X (lose) -&gt; play scissors</span>
    <span class="pl-c1">3</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-c"># A (rock)     and Y (draw) -&gt; play rock</span>
    <span class="pl-c1">6</span> <span class="pl-c1">+</span> <span class="pl-c1">2</span>, <span class="pl-c"># A (rock)     and Z (win)  -&gt; play paper</span>
    <span class="pl-c1">0</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-c"># B (paper)    and X (lose) -&gt; play rock</span>
    <span class="pl-c1">3</span> <span class="pl-c1">+</span> <span class="pl-c1">2</span>, <span class="pl-c"># B (paper)    and Y (draw) -&gt; play paper</span>
    <span class="pl-c1">6</span> <span class="pl-c1">+</span> <span class="pl-c1">3</span>, <span class="pl-c"># B (paper)    and Z (win)  -&gt; play scissors</span>
    <span class="pl-c1">0</span> <span class="pl-c1">+</span> <span class="pl-c1">2</span>, <span class="pl-c"># C (scissors) and X (lose) -&gt; play paper</span>
    <span class="pl-c1">3</span> <span class="pl-c1">+</span> <span class="pl-c1">3</span>, <span class="pl-c"># C (scissors) and Y (draw) -&gt; play scissors</span>
    <span class="pl-c1">6</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-c"># C (scissors) and Z (win)  -&gt; play rock</span>
)

<span class="pl-s1">score1</span> <span class="pl-c1">=</span> <span class="pl-s1">score2</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">data</span>.<span class="pl-en">splitlines</span>():
    <span class="pl-s1">a</span>, <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">line</span>.<span class="pl-en">split</span>())
    <span class="pl-s1">score1</span> <span class="pl-c1">+=</span> <span class="pl-v">SCORES1</span>[<span class="pl-s1">a</span> <span class="pl-c1">+</span> <span class="pl-s1">b</span>]
    <span class="pl-s1">score2</span> <span class="pl-c1">+=</span> <span class="pl-v">SCORES2</span>[<span class="pl-s1">a</span> <span class="pl-c1">+</span> <span class="pl-s1">b</span>]

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">score1</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">score2</span>)</pre></div>
<p dir="auto">An alternative solution to using a lookup table for pre-calculated scores would
be to "exploit" the nature of the scores themselves. It's easy to notice in the
above lookup tables that we are always repeating the same numbers over and over,
and in particular we are cycling among them depending on the move of the first
player. Thus, given any two moves (appropriately converted to integers) we can
calculate the score for the round using a simple closed-form mathematical
formula using the modulo operator. I implemented a simplified version of this
approach in my <a href="/mebeim/aoc/blob/master/2022/misc/day02/mathematical.py">alternative solution</a>.</p>
<h2 dir="auto"><a id="user-content-day-3---rucksack-reorganization" class="anchor" aria-hidden="true" href="#day-3---rucksack-reorganization"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 3 - Rucksack Reorganization</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/3" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day03.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-2" class="anchor" aria-hidden="true" href="#part-1-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">For today's problem, we are dealing with strings. We are given a list of strings
of even length, one per line of input, composed of seemingly random uppercase
and lowercase letters. For each input string, there is exactly one common letter
that appears in both of its halves. Once found, we need to calculate its
"priority" using a simple rule given in the problem statement. The answer we are
looking for is the sum of all the priorities for such common letters.</p>
<p dir="auto">First of all, let's write a short function to calculate the "priority" value of
a letter given the instructions in the problem statement. It's basically equal
to the letter's position in the English alphabet, plus 26 in case it's
uppercase. Knowing this, and given that we are dealing with <a href="https://en.wikipedia.org/wiki/ASCII" rel="nofollow">ASCII</a>
characters, the <a href="https://docs.python.org/3/library/functions.html#ord" rel="nofollow"><code>ord()</code></a> builtin comes in handy, as we can use
<code>ord(x) - ord('a')</code> to calculate the position of the letter in the variable <code>x</code>
in the English alphabet. Note that for this to work we must have <code>len(x) == 1</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def prio(x):
    if 'a' &lt;= x &lt;= 'z':
        return ord(x) - ord('a') + 1
    return ord(x) - ord('A') + 27"><pre><span class="pl-k">def</span> <span class="pl-en">prio</span>(<span class="pl-s1">x</span>):
    <span class="pl-k">if</span> <span class="pl-s">'a'</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">x</span> <span class="pl-c1">&lt;=</span> <span class="pl-s">'z'</span>:
        <span class="pl-k">return</span> <span class="pl-en">ord</span>(<span class="pl-s1">x</span>) <span class="pl-c1">-</span> <span class="pl-en">ord</span>(<span class="pl-s">'a'</span>) <span class="pl-c1">+</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-en">ord</span>(<span class="pl-s1">x</span>) <span class="pl-c1">-</span> <span class="pl-en">ord</span>(<span class="pl-s">'A'</span>) <span class="pl-c1">+</span> <span class="pl-c1">27</span></pre></div>
<p dir="auto">We can optimize the function a bit by pre-computing everything that is constant,
like for example <code>ord('A') + 27</code>. Furthermore, since we are guaranteed to only
have to deal with lowercase and uppercase ASCII letters, the check for lowercase
can be simplified to <code>x &gt;= 'a'</code>, as lowercase letters come after uppercase ones.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def prio(x):
    if x &gt;= 'a':
        return ord(x) - 96
    return ord(x) - 38"><pre><span class="pl-k">def</span> <span class="pl-en">prio</span>(<span class="pl-s1">x</span>):
    <span class="pl-k">if</span> <span class="pl-s1">x</span> <span class="pl-c1">&gt;=</span> <span class="pl-s">'a'</span>:
        <span class="pl-k">return</span> <span class="pl-en">ord</span>(<span class="pl-s1">x</span>) <span class="pl-c1">-</span> <span class="pl-c1">96</span>
    <span class="pl-k">return</span> <span class="pl-en">ord</span>(<span class="pl-s1">x</span>) <span class="pl-c1">-</span> <span class="pl-c1">38</span></pre></div>
<p dir="auto">We can also make use of a <a href="https://docs.python.org/3/reference/expressions.html#conditional-expressions" rel="nofollow">ternary operator</a> if we wish to
simplify things even further:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def prio(x):
    return ord(x) - (96 if x &gt;= 'a' else 38)"><pre><span class="pl-k">def</span> <span class="pl-en">prio</span>(<span class="pl-s1">x</span>):
    <span class="pl-k">return</span> <span class="pl-en">ord</span>(<span class="pl-s1">x</span>) <span class="pl-c1">-</span> (<span class="pl-c1">96</span> <span class="pl-k">if</span> <span class="pl-s1">x</span> <span class="pl-c1">&gt;=</span> <span class="pl-s">'a'</span> <span class="pl-k">else</span> <span class="pl-c1">38</span>)</pre></div>
<p dir="auto">Now we are ready to solve the actual problem. We'll iterate over the input one
line at a time and split each line in half. We can do this through
<a href="https://docs.python.org/3/glossary.html#term-slice" rel="nofollow">slicing</a>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="fin = open(...)

for line in fin:
    mid = len(line) // 2
    a, b = line[:mid], line[mid:]"><pre><span class="pl-s1">fin</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(...)

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">mid</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">line</span>) <span class="pl-c1">//</span> <span class="pl-c1">2</span>
    <span class="pl-s1">a</span>, <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>[:<span class="pl-s1">mid</span>], <span class="pl-s1">line</span>[<span class="pl-s1">mid</span>:]</pre></div>
<p dir="auto">A careful reader is going to notice one small thing in the above code: we are
iterating with <code>for line in fin</code> to get lines of input, however, these lines
will still contain the trailing newline character (<code>\n</code>), which will therefore
end up in <code>b</code>. We are actually splitting the string in half correctly, since the
length is odd and doing <code>odd // 2</code> is the same as doing <code>(odd - 1) // 2</code>.
Nonetheless, we can strip the final newline from each line if we wish, using
<a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> and <a href="https://docs.python.org/3/library/stdtypes.html#str.rstrip" rel="nofollow"><code>str.rstrip()</code></a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for line in map(str.rstrip, fin):
    # ..."><pre><span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-en">map</span>(<span class="pl-s1">str</span>.<span class="pl-s1">rstrip</span>, <span class="pl-s1">fin</span>):
    <span class="pl-c"># ...</span></pre></div>
<p dir="auto">Now that we have the two halves we can simply iterate over the first one and
check which letter is present in the second one. When we find such a sletter, we
calculate its priority and stop the search, moving on to the next line of input.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="total = 0

for line in fin:
    mid = len(line) // 2
    a, b = line[:mid], line[mid:]

    for letter in a:
        if letter in b:
            total += prio(letter)
            break

print('Part 1:', total)"><pre><span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">mid</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">line</span>) <span class="pl-c1">//</span> <span class="pl-c1">2</span>
    <span class="pl-s1">a</span>, <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>[:<span class="pl-s1">mid</span>], <span class="pl-s1">line</span>[<span class="pl-s1">mid</span>:]

    <span class="pl-k">for</span> <span class="pl-s1">letter</span> <span class="pl-c1">in</span> <span class="pl-s1">a</span>:
        <span class="pl-k">if</span> <span class="pl-s1">letter</span> <span class="pl-c1">in</span> <span class="pl-s1">b</span>:
            <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-en">prio</span>(<span class="pl-s1">letter</span>)
            <span class="pl-k">break</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">total</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-2" class="anchor" aria-hidden="true" href="#part-2-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">We still need to search for common letters, but this time among groups of 3
lines of input, and compute the same sum of priorities that we did before. For
example, given the following input:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="asdfgXjkl
qwXertyui
zxcvbnXab
lksjhagAa
Awuytiqwe
mmvxbbzAz"><pre lang="none" class="notranslate"><code>asdfgXjkl
qwXertyui
zxcvbnXab
lksjhagAa
Awuytiqwe
mmvxbbzAz
</code></pre></div>
<p dir="auto">The first 3 lines of input all contain <code>'X'</code>, while the following 3 all contain
<code>'A'</code>, so the total would be <code>prio('X') + prio('A')</code>.</p>
<p dir="auto">We can keep using the same input loop we wrote for part 1, accumulating lines
into a small temporary list (the current group). When the group list reaches a
length of <code>3</code> we will find the common letter among the lines in the group and
update the total priority for part 2.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="group = []
total = group_total = 0

for line in fin:
    # .. same code as part 1 ...

    group.append(line)

    if len(group) == 3:
        a, b, c = group
        group = []

        for item in a:
            if item in b and item in c:
                group_total += prio(item)
                break

print('Part 1:', total)
print('Part 2:', group_total)"><pre><span class="pl-s1">group</span> <span class="pl-c1">=</span> []
<span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-s1">group_total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-c"># .. same code as part 1 ...</span>

    <span class="pl-s1">group</span>.<span class="pl-en">append</span>(<span class="pl-s1">line</span>)

    <span class="pl-k">if</span> <span class="pl-en">len</span>(<span class="pl-s1">group</span>) <span class="pl-c1">==</span> <span class="pl-c1">3</span>:
        <span class="pl-s1">a</span>, <span class="pl-s1">b</span>, <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-s1">group</span>
        <span class="pl-s1">group</span> <span class="pl-c1">=</span> []

        <span class="pl-k">for</span> <span class="pl-s1">item</span> <span class="pl-c1">in</span> <span class="pl-s1">a</span>:
            <span class="pl-k">if</span> <span class="pl-s1">item</span> <span class="pl-c1">in</span> <span class="pl-s1">b</span> <span class="pl-c1">and</span> <span class="pl-s1">item</span> <span class="pl-c1">in</span> <span class="pl-s1">c</span>:
                <span class="pl-s1">group_total</span> <span class="pl-c1">+=</span> <span class="pl-en">prio</span>(<span class="pl-s1">item</span>)
                <span class="pl-k">break</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">total</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">group_total</span>)</pre></div>
<p dir="auto">Easy peasy! Daily puzzle solved once again.</p>
<h2 dir="auto"><a id="user-content-day-4---camp-cleanup" class="anchor" aria-hidden="true" href="#day-4---camp-cleanup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 4 - Camp Cleanup</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/4" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day04.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-3" class="anchor" aria-hidden="true" href="#part-1-3"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Our job today is rather straightforward. We are given a list of pairs of integer
ranges (in the form <code>&lt;start&gt;-&lt;end&gt;,&lt;start&gt;-&lt;end&gt;</code>), and we want to count the
pairs for which one of the two ranges is fully contained within the other. A
range is fully contained within another even if they share one or both their
ends. For example, <code>2-3</code> is fully contained within <code>0-3</code>.</p>
<p dir="auto">Let's start by parsing the input. Quite simple: <a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow"><code>.split()</code></a> each
input line on the comma (<code>,</code>), split each of the two parts on the dash (<code>-</code>),
and turn the numbers into <code>int</code>s. We can do the integer conversion on the fly
using <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map</code></a>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="fin = open(...)

for line in fin:
    a, b   = line.strip().split(',')
    a1, a2 = map(int, a.split('-'))
    b1, b2 = map(int, b.split('-'))"><pre><span class="pl-s1">fin</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(...)

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">a</span>, <span class="pl-s1">b</span>   <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">strip</span>().<span class="pl-en">split</span>(<span class="pl-s">','</span>)
    <span class="pl-s1">a1</span>, <span class="pl-s1">a2</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">a</span>.<span class="pl-en">split</span>(<span class="pl-s">'-'</span>))
    <span class="pl-s1">b1</span>, <span class="pl-s1">b2</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">b</span>.<span class="pl-en">split</span>(<span class="pl-s">'-'</span>))</pre></div>
<p dir="auto">Now for each line of input we know the start and end of the two ranges. There
are a few different ways in which we could check if one range is within another,
for example computing their overlap:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    a1|------------|a2
b1|---------|b2
    o1|-----|o2
      overlap"><pre lang="text" class="notranslate"><code>    a1|------------|a2
b1|---------|b2
    o1|-----|o2
      overlap
</code></pre></div>
<p dir="auto">If the length of the overlap is equal to the length of one of the two
ranges, then that range is fully contained within the other. Or, to put it in
other words, the extremes of the overlap (<code>o1</code> and <code>o2</code>) coincide with the
extremes of the inner range.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    a1|--------------|a2
         b1|-----|b2
         o1|-----|o2
           overlap"><pre lang="text" class="notranslate"><code>    a1|--------------|a2
         b1|-----|b2
         o1|-----|o2
           overlap
</code></pre></div>
<p dir="auto">We can compute the extremes of the overlap by simply calculating the maximum
between the two range start values and the minimum between the two range end
values. For this purpose, we have the <a href="https://docs.python.org/3/library/functions.html#max" rel="nofollow"><code>max()</code></a> and
<a href="https://docs.python.org/3/library/functions.html#min" rel="nofollow"><code>min()</code></a> builtins.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="full_overlap = 0

for line in fin:
    a, b   = line.strip().split(',')
    a1, a2 = map(int, a.split('-'))
    b1, b2 = map(int, b.split('-'))

    o1 = max(a1, b1)
    o2 = min(a2, b2)

    if o1 == a1 and o2 == a2 or o1 == b1 and o2 == b2:
        full_overlap += 1

print('Part 1:', full_overlap)"><pre><span class="pl-s1">full_overlap</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">a</span>, <span class="pl-s1">b</span>   <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">strip</span>().<span class="pl-en">split</span>(<span class="pl-s">','</span>)
    <span class="pl-s1">a1</span>, <span class="pl-s1">a2</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">a</span>.<span class="pl-en">split</span>(<span class="pl-s">'-'</span>))
    <span class="pl-s1">b1</span>, <span class="pl-s1">b2</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">b</span>.<span class="pl-en">split</span>(<span class="pl-s">'-'</span>))

    <span class="pl-s1">o1</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-s1">a1</span>, <span class="pl-s1">b1</span>)
    <span class="pl-s1">o2</span> <span class="pl-c1">=</span> <span class="pl-en">min</span>(<span class="pl-s1">a2</span>, <span class="pl-s1">b2</span>)

    <span class="pl-k">if</span> <span class="pl-s1">o1</span> <span class="pl-c1">==</span> <span class="pl-s1">a1</span> <span class="pl-c1">and</span> <span class="pl-s1">o2</span> <span class="pl-c1">==</span> <span class="pl-s1">a2</span> <span class="pl-c1">or</span> <span class="pl-s1">o1</span> <span class="pl-c1">==</span> <span class="pl-s1">b1</span> <span class="pl-c1">and</span> <span class="pl-s1">o2</span> <span class="pl-c1">==</span> <span class="pl-s1">b2</span>:
        <span class="pl-s1">full_overlap</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">full_overlap</span>)</pre></div>
<p dir="auto">And as easy as that, we have our solution!</p>
<p dir="auto">Another way full overlap could have been checked is through simple logic
formulas:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for line in fin:
    # ...

    #        b inside a               a inside b
    if a1 &lt;= b1 and a2 &gt;= b2 or b1 &lt;= a1 and b2 &gt;= a2:
        full_overlap += 1"><pre><span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-c"># ...</span>

    <span class="pl-c">#        b inside a               a inside b</span>
    <span class="pl-k">if</span> <span class="pl-s1">a1</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">b1</span> <span class="pl-c1">and</span> <span class="pl-s1">a2</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">b2</span> <span class="pl-c1">or</span> <span class="pl-s1">b1</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">a1</span> <span class="pl-c1">and</span> <span class="pl-s1">b2</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">a2</span>:
        <span class="pl-s1">full_overlap</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span></pre></div>
<p dir="auto">However, as we'll shortly see, computing the overlap also helps us solve part 2
effortlessly.</p>
<h3 dir="auto"><a id="user-content-part-2-3" class="anchor" aria-hidden="true" href="#part-2-3"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">Now we want to count the number of range pairs that overlap in any way, either
<em>partially</em> or fully (part 1).</p>
<p dir="auto">We know that all the cases counted in part 1 will also count for part two, since
if one range is fully contained within another, there is a full overlap. To also
take into account <em>partial</em> overlaps, we can simply check the two extremes of
the overlap we just calculated.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    a1|------------|a2     |            a1|--------|a2
b1|---------|b2            |   b1|--|b2
    o1|-----|o2            |        |o2 o1|
      overlap (o2 &gt;= o1)   |       no overlap (o2 &lt; o1)"><pre lang="text" class="notranslate"><code>    a1|------------|a2     |            a1|--------|a2
b1|---------|b2            |   b1|--|b2
    o1|-----|o2            |        |o2 o1|
      overlap (o2 &gt;= o1)   |       no overlap (o2 &lt; o1)
</code></pre></div>
<p dir="auto">As can be seen in the above example, if the end of the overlap (<code>o2</code>) is after
the start (<code>o1</code>) then we have a valid range and an overlap (partial or full)
must exist.</p>
<p dir="auto">All of this simply means adding one check to our part 1 code, and since we know
that a full overlap is a special case of a partial overlap, we can move the part
1 check inside the part 2 one.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="overlap = full_overlap = 0

for line in fin:
    # ... same as part 1 ...

    if o2 &gt;= o1:
        overlap += 1
        if o1 == a1 and o2 == a2 or o1 == b1 and o2 == b2:
            full_overlap += 1

print('Part 1:', full_overlap)
print('Part 2:', overlap)"><pre><span class="pl-s1">overlap</span> <span class="pl-c1">=</span> <span class="pl-s1">full_overlap</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-c"># ... same as part 1 ...</span>

    <span class="pl-k">if</span> <span class="pl-s1">o2</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">o1</span>:
        <span class="pl-s1">overlap</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
        <span class="pl-k">if</span> <span class="pl-s1">o1</span> <span class="pl-c1">==</span> <span class="pl-s1">a1</span> <span class="pl-c1">and</span> <span class="pl-s1">o2</span> <span class="pl-c1">==</span> <span class="pl-s1">a2</span> <span class="pl-c1">or</span> <span class="pl-s1">o1</span> <span class="pl-c1">==</span> <span class="pl-s1">b1</span> <span class="pl-c1">and</span> <span class="pl-s1">o2</span> <span class="pl-c1">==</span> <span class="pl-s1">b2</span>:
            <span class="pl-s1">full_overlap</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">full_overlap</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">overlap</span>)</pre></div>
<p dir="auto">Et voilÃ ! 8 out of 50 stars.</p>
<h2 dir="auto"><a id="user-content-day-5---supply-stacks" class="anchor" aria-hidden="true" href="#day-5---supply-stacks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 5 - Supply Stacks</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/5" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day05.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-4" class="anchor" aria-hidden="true" href="#part-1-4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Do you like simulations? Today we're gonna need to simulate a crane moving
crates stacked on top of each other. We start with a few stacks of crates, given
as input in the following form:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    [D]
[N] [C]
[Z] [M] [P]
 1   2   3"><pre lang="none" class="notranslate"><code>    [D]
[N] [C]
[Z] [M] [P]
 1   2   3
</code></pre></div>
<p dir="auto">This represents the initial configuration of N stacks of crates (in the above
example we have N = 3, but in the real input N = 9). Following the initial
configuration is an empty line followed by a list of instructions, one per line,
of the form <code>move &lt;n&gt; from &lt;i&gt; to &lt;j&gt;</code>, meaning "move the top <code>n</code> crates from
stack <code>i</code> to stack <code>j</code>, one at a time.</p>
<p dir="auto">After executing all instructions, we need to answer with a string of letters
representing the topmost crate of each stack in order. For example, if the above
configuration was the final one, we would answer <code>NDP</code>.</p>
<p dir="auto">Today's input is particularly annoying to parse: we are given stacks in fancy
ASCII art columns, and we need to somehow turn each one into a string or list in
order to work with it. The easiest way to approach this is probably to just read
the entirety of the first few lines of input, stopping at the first empty line,
and then <em>transpose</em> them to obtain a list of columns. In other words, do
something like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=" +----------&gt; ' [[ '
 |+---------&gt; ' NZ1'
 ||+--------&gt; ' ]] '
 |||+-------&gt; '    '
 ||||+------&gt; '[[[ '
 |||||+-----&gt; 'DCM2'
 ||||||+----&gt; ...
 |||||||
'    [D]    '
'[N] [C]    '
'[Z] [M] [P]'
' 1   2   3 '"><pre lang="none" class="notranslate"><code> +----------&gt; ' [[ '
 |+---------&gt; ' NZ1'
 ||+--------&gt; ' ]] '
 |||+-------&gt; '    '
 ||||+------&gt; '[[[ '
 |||||+-----&gt; 'DCM2'
 ||||||+----&gt; ...
 |||||||
'    [D]    '
'[N] [C]    '
'[Z] [M] [P]'
' 1   2   3 '
</code></pre></div>
<p dir="auto">After reading the initial ASCII art and stopping at the first empty line:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="fin = open(...)
raw = []

for line in fin:
    if line == '\n':
        break
    raw.append(line)

# raw = ['    [D]    \n',
#        '[N] [C]    \n',
#        '[Z] [M] [P]\n',
#        ' 1   2   3 \n']"><pre><span class="pl-s1">fin</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(...)
<span class="pl-s1">raw</span> <span class="pl-c1">=</span> []

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">if</span> <span class="pl-s1">line</span> <span class="pl-c1">==</span> <span class="pl-s">'<span class="pl-cce">\n</span>'</span>:
        <span class="pl-k">break</span>
    <span class="pl-s1">raw</span>.<span class="pl-en">append</span>(<span class="pl-s1">line</span>)

<span class="pl-c"># raw = ['    [D]    \n',</span>
<span class="pl-c">#        '[N] [C]    \n',</span>
<span class="pl-c">#        '[Z] [M] [P]\n',</span>
<span class="pl-c">#        ' 1   2   3 \n']</span></pre></div>
<p dir="auto">We can transpose the <code>raw</code> list with the help of <a href="https://docs.python.org/3/library/functions.html#zip" rel="nofollow"><code>zip()</code></a> plus
an <a href="https://docs.python.org/3/tutorial/controlflow.html#unpacking-argument-lists" rel="nofollow">unpacking operator</a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="columns = list(zip(*raw))
# [(' ', '[', '[', ' ', '\n'),
#  (' ', 'N', 'Z', '1', '\n'),
#   ...                      ]"><pre><span class="pl-s1">columns</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-en">zip</span>(<span class="pl-c1">*</span><span class="pl-s1">raw</span>))
<span class="pl-c"># [(' ', '[', '[', ' ', '\n'),</span>
<span class="pl-c">#  (' ', 'N', 'Z', '1', '\n'),</span>
<span class="pl-c">#   ...                      ]</span></pre></div>
<p dir="auto">This seemingly esoteric single-line transposition works because <code>zip()</code> yields
tuples consisting of the i-th element of each line in <code>raw</code>, i.e. it effectively
yields columns.</p>
<p dir="auto">We went from strings to tuples, but that's no problem for now. The next thing to
do is skip all the useless columns (those consisting of only spaces and square
brackets) and keep the rest, turning good columns into strings through
<a href="https://docs.python.org/3/library/stdtypes.html#str.join" rel="nofollow"><code>str.join()</code></a> and discarding leading whitespace with
<a href="https://docs.python.org/3/library/stdtypes.html#str.lstrip" rel="nofollow"><code>str.lstrip()</code></a>.</p>
<p dir="auto">Fortunately, all we need to identify good columns is
<a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow"><code>enumerate()</code></a>, skip the first column and then only keep
one every 4, which can be achieved using the modulo (<code>%</code>) operator.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Indexes in the instructions are 1-based, fill stacks[0] with some useless
# value so that later we can do stacks[i] instead of stacks[i - 1].
stacks = [None]

for i, column in enumerate(zip(*raw)):
    if i % 4 == 1:
        # column = (' ', 'N', 'Z', '1', '\n')
        column = ''.join(column[:-1]) # -&gt; ' NZ'
        column = column.lstrip()      # -&gt; 'NZ'
        stacks.append(column)

# Make a copy to use for part 2
original = stacks[:]"><pre><span class="pl-c"># Indexes in the instructions are 1-based, fill stacks[0] with some useless</span>
<span class="pl-c"># value so that later we can do stacks[i] instead of stacks[i - 1].</span>
<span class="pl-s1">stacks</span> <span class="pl-c1">=</span> [<span class="pl-c1">None</span>]

<span class="pl-k">for</span> <span class="pl-s1">i</span>, <span class="pl-s1">column</span> <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-en">zip</span>(<span class="pl-c1">*</span><span class="pl-s1">raw</span>)):
    <span class="pl-k">if</span> <span class="pl-s1">i</span> <span class="pl-c1">%</span> <span class="pl-c1">4</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-c"># column = (' ', 'N', 'Z', '1', '\n')</span>
        <span class="pl-s1">column</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>.<span class="pl-en">join</span>(<span class="pl-s1">column</span>[:<span class="pl-c1">-</span><span class="pl-c1">1</span>]) <span class="pl-c"># -&gt; ' NZ'</span>
        <span class="pl-s1">column</span> <span class="pl-c1">=</span> <span class="pl-s1">column</span>.<span class="pl-en">lstrip</span>()      <span class="pl-c"># -&gt; 'NZ'</span>
        <span class="pl-s1">stacks</span>.<span class="pl-en">append</span>(<span class="pl-s1">column</span>)

<span class="pl-c"># Make a copy to use for part 2</span>
<span class="pl-s1">original</span> <span class="pl-c1">=</span> <span class="pl-s1">stacks</span>[:]</pre></div>
<p dir="auto">Now that we <em>finally</em> have the initial stacks parsed, let's also parse the
instructions. This is quite simple: iterate over input lines, split them and
extract the three numbers at positions <code>1</code>, <code>3</code> and <code>5</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="moves = []

for line in fin:
    line = line.split()
    moves.append((int(line[1]), int(line[3]), int(line[5])))"><pre><span class="pl-s1">moves</span> <span class="pl-c1">=</span> []

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">line</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">split</span>()
    <span class="pl-s1">moves</span>.<span class="pl-en">append</span>((<span class="pl-en">int</span>(<span class="pl-s1">line</span>[<span class="pl-c1">1</span>]), <span class="pl-en">int</span>(<span class="pl-s1">line</span>[<span class="pl-c1">3</span>]), <span class="pl-en">int</span>(<span class="pl-s1">line</span>[<span class="pl-c1">5</span>])))</pre></div>
<p dir="auto">We have the instructions parsed, now let's simply follow them:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for n, i, j in moves:
    for _ in range(n):
        crate = stacks[i][0]          # Extract top of stacks[i]
        stacks[i] = stacks[1:]        # Remove it from stacks[i]
        stacks[j] = crate + stacks[j] # Add it to top of stacks[j]"><pre><span class="pl-k">for</span> <span class="pl-s1">n</span>, <span class="pl-s1">i</span>, <span class="pl-s1">j</span> <span class="pl-c1">in</span> <span class="pl-s1">moves</span>:
    <span class="pl-k">for</span> <span class="pl-s1">_</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">n</span>):
        <span class="pl-s1">crate</span> <span class="pl-c1">=</span> <span class="pl-s1">stacks</span>[<span class="pl-s1">i</span>][<span class="pl-c1">0</span>]          <span class="pl-c"># Extract top of stacks[i]</span>
        <span class="pl-s1">stacks</span>[<span class="pl-s1">i</span>] <span class="pl-c1">=</span> <span class="pl-s1">stacks</span>[<span class="pl-c1">1</span>:]        <span class="pl-c"># Remove it from stacks[i]</span>
        <span class="pl-s1">stacks</span>[<span class="pl-s1">j</span>] <span class="pl-c1">=</span> <span class="pl-s1">crate</span> <span class="pl-c1">+</span> <span class="pl-s1">stacks</span>[<span class="pl-s1">j</span>] <span class="pl-c"># Add it to top of stacks[j]</span></pre></div>
<p dir="auto">We can optimize the above operation by extracting all <code>n</code> crates at once and
reversing their order with <code>crates[::-1]</code>, a common Python trick to reverse an
indexable iterable through <a href="https://docs.python.org/3/glossary.html#term-slice" rel="nofollow">slicing</a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for n, i, j in moves:
    crates = stacks[i][:n][::-1]
    stacks[i] = stacks[i][n:]
    stacks[j] = crates + stacks[j]"><pre><span class="pl-k">for</span> <span class="pl-s1">n</span>, <span class="pl-s1">i</span>, <span class="pl-s1">j</span> <span class="pl-c1">in</span> <span class="pl-s1">moves</span>:
    <span class="pl-s1">crates</span> <span class="pl-c1">=</span> <span class="pl-s1">stacks</span>[<span class="pl-s1">i</span>][:<span class="pl-s1">n</span>][::<span class="pl-c1">-</span><span class="pl-c1">1</span>]
    <span class="pl-s1">stacks</span>[<span class="pl-s1">i</span>] <span class="pl-c1">=</span> <span class="pl-s1">stacks</span>[<span class="pl-s1">i</span>][<span class="pl-s1">n</span>:]
    <span class="pl-s1">stacks</span>[<span class="pl-s1">j</span>] <span class="pl-c1">=</span> <span class="pl-s1">crates</span> <span class="pl-c1">+</span> <span class="pl-s1">stacks</span>[<span class="pl-s1">j</span>]</pre></div>
<p dir="auto">Finally, we can extract the topmost element of each stack using a simple
<a href="https://www.python.org/dev/peps/pep-0289/" rel="nofollow">generator expression</a> and <code>.join()</code> the result into a
string:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="top = ''.join(s[0] for s in stacks[1:]) # Skip stacks[0], which is None
print('Part 1:', top)"><pre><span class="pl-s1">top</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>.<span class="pl-en">join</span>(<span class="pl-s1">s</span>[<span class="pl-c1">0</span>] <span class="pl-k">for</span> <span class="pl-s1">s</span> <span class="pl-c1">in</span> <span class="pl-s1">stacks</span>[<span class="pl-c1">1</span>:]) <span class="pl-c"># Skip stacks[0], which is None</span>
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">top</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-4" class="anchor" aria-hidden="true" href="#part-2-4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">For part two, we need to follow the same list of instructions as part 1, but
this time moving <em>all</em> of the topmost <code>n</code> crates from a given stack to another
at once, meaning that their final order on top of the second stack will <em>not</em> be
reversed.</p>
<p dir="auto">Well, given the code we already wrote, this is really child's play. We can use
the same code as part 1, removing the reversing operation (<code>[::-1]</code>):</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Restore initial state from the copy we made earlier
stacks = original

for n, i, j in moves:
    crates = stacks[i][:n] # &lt;- removed [::-1] from here
    stacks[i] = stacks[i][n:]
    stacks[j] = crates + stacks[j]

top = ''.join(s[0] for s in stacks[1:])
print('Part 2:', top)"><pre><span class="pl-c"># Restore initial state from the copy we made earlier</span>
<span class="pl-s1">stacks</span> <span class="pl-c1">=</span> <span class="pl-s1">original</span>

<span class="pl-k">for</span> <span class="pl-s1">n</span>, <span class="pl-s1">i</span>, <span class="pl-s1">j</span> <span class="pl-c1">in</span> <span class="pl-s1">moves</span>:
    <span class="pl-s1">crates</span> <span class="pl-c1">=</span> <span class="pl-s1">stacks</span>[<span class="pl-s1">i</span>][:<span class="pl-s1">n</span>] <span class="pl-c"># &lt;- removed [::-1] from here</span>
    <span class="pl-s1">stacks</span>[<span class="pl-s1">i</span>] <span class="pl-c1">=</span> <span class="pl-s1">stacks</span>[<span class="pl-s1">i</span>][<span class="pl-s1">n</span>:]
    <span class="pl-s1">stacks</span>[<span class="pl-s1">j</span>] <span class="pl-c1">=</span> <span class="pl-s1">crates</span> <span class="pl-c1">+</span> <span class="pl-s1">stacks</span>[<span class="pl-s1">j</span>]

<span class="pl-s1">top</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>.<span class="pl-en">join</span>(<span class="pl-s1">s</span>[<span class="pl-c1">0</span>] <span class="pl-k">for</span> <span class="pl-s1">s</span> <span class="pl-c1">in</span> <span class="pl-s1">stacks</span>[<span class="pl-c1">1</span>:])
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">top</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-6---tuning-trouble" class="anchor" aria-hidden="true" href="#day-6---tuning-trouble"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 6 - Tuning Trouble</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/6" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day06.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-5" class="anchor" aria-hidden="true" href="#part-1-5"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Today's problem feels like it could have been a day 1 problem. In fact, I
believe it was even easiest than this year's day 1. We are given a long string
of seemingly random characters as input, and we need to find the first group of
4 consecutive characters that are all different, called the "start-of-packet".
Once found, our answer will be the 1-based index of the character immediately
following the start-of-packet.</p>
<p dir="auto">After reading the whole file as a string:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    data = fin.read()"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">data</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>()</pre></div>
<p dir="auto">We can extract groups of 4 consecutive characters starting at index <code>i</code> just
doing <code>data[i:i + 4]</code>. To check whether they are all different, a quick and easy
way is to simply put them all inside a <code>set</code> and calculate the size of the set:
if the size is 4, it means all 4 were different.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for i in range(len(data) - 4):
    if len(set(data[i:i + 4])) == 4:
        sop = i + 4
        break

print('Part 1:', sop)"><pre><span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-en">len</span>(<span class="pl-s1">data</span>) <span class="pl-c1">-</span> <span class="pl-c1">4</span>):
    <span class="pl-k">if</span> <span class="pl-en">len</span>(<span class="pl-en">set</span>(<span class="pl-s1">data</span>[<span class="pl-s1">i</span>:<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">4</span>])) <span class="pl-c1">==</span> <span class="pl-c1">4</span>:
        <span class="pl-s1">sop</span> <span class="pl-c1">=</span> <span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">4</span>
        <span class="pl-k">break</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">sop</span>)</pre></div>
<p dir="auto">You technically do not need to build the entire set in order to perform this
check: you can add the characters to the set one by one and stop at the first
one that is already present. However, since we are talking about merely 4
characters, such an optimization would just be pointless.</p>
<h3 dir="auto"><a id="user-content-part-2-5" class="anchor" aria-hidden="true" href="#part-2-5"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">We need to... do the same thing as before, only that we are looking for a
"start-of-message" consisting of <em>14</em> different consecutive characters now.</p>
<p dir="auto">Well, the code is the same as part 1, so let's just move it into a function. We
also know for a fact that our "start-of-message" cannot appear before the
"start-of-packet" (we do not have 4 consecutive different characters before the
start-of-packet, let alone 14), so let's also give our function the ability to
skip the start of the data for performance.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def find_start(data, header_len, start=0):
    for i in range(start, len(data) - header_len):
        if len(set(data[i:i + header_len])) == header_len:
            return i + header_len"><pre><span class="pl-k">def</span> <span class="pl-en">find_start</span>(<span class="pl-s1">data</span>, <span class="pl-s1">header_len</span>, <span class="pl-s1">start</span><span class="pl-c1">=</span><span class="pl-c1">0</span>):
    <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">start</span>, <span class="pl-en">len</span>(<span class="pl-s1">data</span>) <span class="pl-c1">-</span> <span class="pl-s1">header_len</span>):
        <span class="pl-k">if</span> <span class="pl-en">len</span>(<span class="pl-en">set</span>(<span class="pl-s1">data</span>[<span class="pl-s1">i</span>:<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-s1">header_len</span>])) <span class="pl-c1">==</span> <span class="pl-s1">header_len</span>:
            <span class="pl-k">return</span> <span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-s1">header_len</span></pre></div>
<p dir="auto">Here we go, we can now get both part 1 and part 2 answers using this function:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="sop = find_start(data, 4)
som = find_start(data, 14, sop)
print('Part 1:', sop)
print('Part 2:', som)"><pre><span class="pl-s1">sop</span> <span class="pl-c1">=</span> <span class="pl-en">find_start</span>(<span class="pl-s1">data</span>, <span class="pl-c1">4</span>)
<span class="pl-s1">som</span> <span class="pl-c1">=</span> <span class="pl-en">find_start</span>(<span class="pl-s1">data</span>, <span class="pl-c1">14</span>, <span class="pl-s1">sop</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">sop</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">som</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-7---no-space-left-on-device" class="anchor" aria-hidden="true" href="#day-7---no-space-left-on-device"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 7 - No Space Left On Device</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/7" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day07.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-6" class="anchor" aria-hidden="true" href="#part-1-6"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">First challenging problem of the year today! We are dealing with a filesystem,
and we are given the output of a shell session where the only two commands used
are <code>cd</code> to change directory and <code>ls</code> to list the current directory's contents.
Each line of input that starts with <code>$</code> indicates a command, and the following
lines that don't start with <code>$</code> are the command's output.</p>
<p dir="auto">Simply enough, only the <code>ls</code> command generates output. Each directory can
contain other directories or files, and the <code>ls</code> command prints out a list where
each directory name is preceded by the string <code>dir</code> and each file name is
preceded by its size.</p>
<p dir="auto">The total size of a directory is the sum of the sizes of the files it contains,
either directly or inside other subdirectories. We are asked to find all
directories with total size up to 100000 and sum all their sizes.</p>
<p dir="auto">First of all, let's see an example input to help us understand what we're
talking about:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ cd /
$ ls
dir a
1000 b.txt
699 c.dat
$ cd a
$ ls
100 d
200 e"><pre lang="none" class="notranslate"><code>$ cd /
$ ls
dir a
1000 b.txt
699 c.dat
$ cd a
$ ls
100 d
200 e
</code></pre></div>
<p dir="auto">Given the above shell session, we can infer the contents of <code>/</code> and <code>/a</code>, and we
know that the filesystem looks like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="/
â”œâ”€â”€ a
â”‚Â Â  â”œâ”€â”€ d, size 100
â”‚Â Â  â””â”€â”€ e, size 200
â”œâ”€â”€ b.txt, size 1000
â””â”€â”€ c.dat, size 699"><pre lang="none" class="notranslate"><code>/
â”œâ”€â”€ a
â”‚Â Â  â”œâ”€â”€ d, size 100
â”‚Â Â  â””â”€â”€ e, size 200
â”œâ”€â”€ b.txt, size 1000
â””â”€â”€ c.dat, size 699
</code></pre></div>
<p dir="auto">The total size of the directory <code>/a</code> is <code>100 + 200 = 300</code>, and the total size of
<code>/</code> is <code>300 + 1000 + 699 = 1999</code>.</p>
<p dir="auto">Since the size of a directory will need to be calculated recursively entering
all its descendant directories and finding all the files contained within them,
it's pretty obvious that we'll need to somehow reconstruct the structure of the
filesystem to fulfill our request. We can represent the filesystem as a
<a href="https://en.wikipedia.org/wiki/Tree_(data_structure)" rel="nofollow">tree</a> structure, where the root is <code>/</code>.</p>
<p dir="auto">Parsing the input line by line, one option would be to store the size of each
file and the contents of each directory in a dictionary, for example like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="fs = {
    '/': ['a', 'b.txt', 'c.dat'],
    'a': ['d', 'e'],
    'd': 100,
    'e': 200,
    'b.txt': 1000,
    'c.dat': 699,
}"><pre><span class="pl-s1">fs</span> <span class="pl-c1">=</span> {
    <span class="pl-s">'/'</span>: [<span class="pl-s">'a'</span>, <span class="pl-s">'b.txt'</span>, <span class="pl-s">'c.dat'</span>],
    <span class="pl-s">'a'</span>: [<span class="pl-s">'d'</span>, <span class="pl-s">'e'</span>],
    <span class="pl-s">'d'</span>: <span class="pl-c1">100</span>,
    <span class="pl-s">'e'</span>: <span class="pl-c1">200</span>,
    <span class="pl-s">'b.txt'</span>: <span class="pl-c1">1000</span>,
    <span class="pl-s">'c.dat'</span>: <span class="pl-c1">699</span>,
}</pre></div>
<p dir="auto">However, this is not enough, because directory and file names are not unique.
There could be for example multiple directories, each containing a file with the
same name. Even worse, there could be one directory containing a file, and
another one containing a directory with the same name as the file! Indeed, we
should already know, the thing that uniquely identifies a file or directory in a
filesystem is not its name, but its <em>path</em>. The path to the file <code>d</code> in the
above example would be <code>/a/d</code>.</p>
<p dir="auto">Given the input, and starting with an empty path, we should be able to keep
track of the current path by simply looking at the <code>cd</code> commands that are
performed. For simplicity, we'll use a <code>tuple</code> to represent a path instead of a
string of path components separated by slashes, meaning that the path <code>/a/d</code>
will be represented by the tuple <code>('/', 'a', 'd')</code>. This will make it easier to
add and remove path components as needed.</p>
<p dir="auto">The output we want is a dictionary of the form <code>{path: list_of_contents}</code>. Since
we do not care about file names at all, instead of storing their names we'll
simply store their size as an integer. Later, when iterating over the list of
contents of a given path, we'll know that anything that is an integer is the
size of a file. Furthermore, we also do not care about directories that we do
not explicitly enter through the <code>cd</code> command. If some <code>ls</code> command lists 100
directories, but we only enter one of them, that's the only one we care about.
We can therefore skip all the lines of <code>ls</code> output that start with <code>dir</code>. Our
input seems to be "well-formed", and seems to suggest that we actually enter
with <code>cd</code> every single directory that is listed by a <code>ls</code> command, but still.</p>
<p dir="auto">We'll parse the input one line at a time, like so:</p>
<ul dir="auto">
<li>Each time we encounter a <code>cd</code> command, we'll add a component to the current
path. If we encounter the special component <code>..</code> we'll remove the last
component from the current path instead.</li>
<li>Each time we encounter a <code>ls</code> command, we'll start reading the following lines
until the next command. Each line can either be <code>dir &lt;dirname&gt;</code> or
<code>&lt;size&gt; &lt;filename&gt;</code>. We will completely skip lines starting with <code>dir</code>, and
for the others we'll only parse the file size as an integer, adding it to the
list of the contents of the current directory.</li>
</ul>
<p dir="auto">As already said, we'll use a dictionary to keep track of the contents of each
path we encounter. More precisely, to make things easier, a
<a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow"><code>defaultdict</code></a> of <code>list</code> comes in handy, so that we
can just do <code>fs[path].append(...)</code> without worrying about <code>path</code> not being
already present in <code>fs</code>. A <a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow"><code>deque</code></a> (double-ended queue)
is also useful to process the input line by line while being able to peek at the
next line without consuming it, since we want to stop parsing the output of the
<code>ls</code> command whenever we encounter a line starting with <code>$</code>. We can peek the
first element of a <code>deque</code> with <code>d[0]</code>, and consume it by popping it with
<code>d.popleft()</code>. The same could be done with a normal list through <code>l.pop(0)</code>, but
the operation is much more expensive as it internally requires to move all
elements of the list back one position after removing the first one.</p>
<p dir="auto">Here's a function that implements the above logic taking advantage of
<code>defaultdict</code> and <code>deque</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from collections import deque, defaultdict

def parse_filesystem(fin):
    lines = deque(fin)
    fs    = defaultdict(list)
    path  = ()

    while lines:
        line    = lines.popleft().split() # ['$', 'cd', 'foo']
        command = line[1]
        args    = line[2:] # ['foo'] or [] in case the command is `ls`

        if command == 'ls':
            # The `ls` command outputs a list of directory contents, keep going
            # until we either run out of lines or the next line is a command
            while lines and not lines[0].startswith('$'):
                # Get the size of the file
                size = lines.popleft().split()[0]

                # Skip if not a file
                if size == 'dir':
                    continue

                # Add the size of the file to the contents of the current path
                fs[path].append(int(size))
        else:
            # The `cd` command has no output, but changes the current path
            if args[0] == '..':
                # Discard last path component (go up one directory)
                path = path[:-1]
            else:
                # Calculate path of the directory we are moving into
                new_path = path + (args[0],)
                # Add its path to the contents of the current directory
                fs[path].append(new_path)
                # Move into the new directory
                path = new_path

    return fs"><pre><span class="pl-k">from</span> <span class="pl-s1">collections</span> <span class="pl-k">import</span> <span class="pl-s1">deque</span>, <span class="pl-s1">defaultdict</span>

<span class="pl-k">def</span> <span class="pl-en">parse_filesystem</span>(<span class="pl-s1">fin</span>):
    <span class="pl-s1">lines</span> <span class="pl-c1">=</span> <span class="pl-en">deque</span>(<span class="pl-s1">fin</span>)
    <span class="pl-s1">fs</span>    <span class="pl-c1">=</span> <span class="pl-en">defaultdict</span>(<span class="pl-s1">list</span>)
    <span class="pl-s1">path</span>  <span class="pl-c1">=</span> ()

    <span class="pl-k">while</span> <span class="pl-s1">lines</span>:
        <span class="pl-s1">line</span>    <span class="pl-c1">=</span> <span class="pl-s1">lines</span>.<span class="pl-en">popleft</span>().<span class="pl-en">split</span>() <span class="pl-c"># ['$', 'cd', 'foo']</span>
        <span class="pl-s1">command</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>[<span class="pl-c1">1</span>]
        <span class="pl-s1">args</span>    <span class="pl-c1">=</span> <span class="pl-s1">line</span>[<span class="pl-c1">2</span>:] <span class="pl-c"># ['foo'] or [] in case the command is `ls`</span>

        <span class="pl-k">if</span> <span class="pl-s1">command</span> <span class="pl-c1">==</span> <span class="pl-s">'ls'</span>:
            <span class="pl-c"># The `ls` command outputs a list of directory contents, keep going</span>
            <span class="pl-c"># until we either run out of lines or the next line is a command</span>
            <span class="pl-k">while</span> <span class="pl-s1">lines</span> <span class="pl-c1">and</span> <span class="pl-c1">not</span> <span class="pl-s1">lines</span>[<span class="pl-c1">0</span>].<span class="pl-en">startswith</span>(<span class="pl-s">'$'</span>):
                <span class="pl-c"># Get the size of the file</span>
                <span class="pl-s1">size</span> <span class="pl-c1">=</span> <span class="pl-s1">lines</span>.<span class="pl-en">popleft</span>().<span class="pl-en">split</span>()[<span class="pl-c1">0</span>]

                <span class="pl-c"># Skip if not a file</span>
                <span class="pl-k">if</span> <span class="pl-s1">size</span> <span class="pl-c1">==</span> <span class="pl-s">'dir'</span>:
                    <span class="pl-k">continue</span>

                <span class="pl-c"># Add the size of the file to the contents of the current path</span>
                <span class="pl-s1">fs</span>[<span class="pl-s1">path</span>].<span class="pl-en">append</span>(<span class="pl-en">int</span>(<span class="pl-s1">size</span>))
        <span class="pl-k">else</span>:
            <span class="pl-c"># The `cd` command has no output, but changes the current path</span>
            <span class="pl-k">if</span> <span class="pl-s1">args</span>[<span class="pl-c1">0</span>] <span class="pl-c1">==</span> <span class="pl-s">'..'</span>:
                <span class="pl-c"># Discard last path component (go up one directory)</span>
                <span class="pl-s1">path</span> <span class="pl-c1">=</span> <span class="pl-s1">path</span>[:<span class="pl-c1">-</span><span class="pl-c1">1</span>]
            <span class="pl-k">else</span>:
                <span class="pl-c"># Calculate path of the directory we are moving into</span>
                <span class="pl-s1">new_path</span> <span class="pl-c1">=</span> <span class="pl-s1">path</span> <span class="pl-c1">+</span> (<span class="pl-s1">args</span>[<span class="pl-c1">0</span>],)
                <span class="pl-c"># Add its path to the contents of the current directory</span>
                <span class="pl-s1">fs</span>[<span class="pl-s1">path</span>].<span class="pl-en">append</span>(<span class="pl-s1">new_path</span>)
                <span class="pl-c"># Move into the new directory</span>
                <span class="pl-s1">path</span> <span class="pl-c1">=</span> <span class="pl-s1">new_path</span>

    <span class="pl-k">return</span> <span class="pl-s1">fs</span></pre></div>
<p dir="auto">The result of calling <code>parse_filesystem()</code> using the example input we saw
earlier should be something like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    fs = parse_filesystem(fin)

# fs = {
#     ()        : [('/',)],
#     ('/',)    : [('/', 'a'), 1000, 699],
#     ('/', 'a'): [100, 200]
# }"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">fs</span> <span class="pl-c1">=</span> <span class="pl-en">parse_filesystem</span>(<span class="pl-s1">fin</span>)

<span class="pl-c"># fs = {</span>
<span class="pl-c">#     ()        : [('/',)],</span>
<span class="pl-c">#     ('/',)    : [('/', 'a'), 1000, 699],</span>
<span class="pl-c">#     ('/', 'a'): [100, 200]</span>
<span class="pl-c"># }</span></pre></div>
<p dir="auto">The extra empty tuple <code>()</code> is an artifact of the fact that we start with an
empty path (<code>path = ()</code>), and the first command is <code>cd /</code>, so effectively our
actual root is <code>()</code>, but it only contains <code>('/',)</code> so there isn't much
difference. If we wanted to avoid this, we could have started with
<code>path = ('/',)</code> skipping the first command.</p>
<p dir="auto">Technicalities aside, now we have a dictionary that represents the tree of our
filesystem. In order to calculate the size of a single directory we need to
traverse the tree starting at its path, and sum up any file sizes we find along
the way. The simplest way to do this is through a
<a href="https://en.wikipedia.org/wiki/Depth-first_search" rel="nofollow">depth-first search</a>, which, given the data structure we have, can be
implemented as a recursive function in just a few lines of code. All we have to
do given a path is iterate over <code>fs[path]</code> and check whether the current item is
an <code>int</code> (size of a file) or another path representing a subdirectory. In the
first case, we'll just add the size to the total, while in the second case we'll
make a recursive call to determine the size of the subdirectory. The
<a href="https://docs.python.org/3/library/functions.html#isinstance" rel="nofollow"><code>isinstance</code></a> built-in function can be used to check for
<code>int</code>s, as well as the <a href="https://docs.python.org/3/library/functions.html#type" rel="nofollow"><code>type</code></a> built-in, it's more or less a
matter of taste.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def directory_size(fs, path):
    size = 0

    for subdir_or_size in fs[path]:
        if isinstance(subdir_or_size, int):
            # File, add size to total
            size += subdir_or_size
        else:
            # Directory, recursively calculate size
            size += directory_size(fs, subdir_or_size)

    return size"><pre><span class="pl-k">def</span> <span class="pl-en">directory_size</span>(<span class="pl-s1">fs</span>, <span class="pl-s1">path</span>):
    <span class="pl-s1">size</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-k">for</span> <span class="pl-s1">subdir_or_size</span> <span class="pl-c1">in</span> <span class="pl-s1">fs</span>[<span class="pl-s1">path</span>]:
        <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">subdir_or_size</span>, <span class="pl-s1">int</span>):
            <span class="pl-c"># File, add size to total</span>
            <span class="pl-s1">size</span> <span class="pl-c1">+=</span> <span class="pl-s1">subdir_or_size</span>
        <span class="pl-k">else</span>:
            <span class="pl-c"># Directory, recursively calculate size</span>
            <span class="pl-s1">size</span> <span class="pl-c1">+=</span> <span class="pl-en">directory_size</span>(<span class="pl-s1">fs</span>, <span class="pl-s1">subdir_or_size</span>)

    <span class="pl-k">return</span> <span class="pl-s1">size</span></pre></div>
<p dir="auto">Now we have all we need to solve the problem. We'll iterate over all the keys of
<code>fs</code> (representing all the paths of the directories we know) and call
<code>directory_size()</code> for each one of them, summing up the sizes that are less than
100000.</p>
<p dir="auto">There is a small performance issue though: calling the <code>directory_size()</code>
function we just wrote for every single path is not optimal. It's a recursive
function that will traverse the whole tree starting from <code>path</code> every time it's
called, however we only need a single traversal (starting at the root <code>('/',)</code>)
to kno the size of any directory. We can save this information into a dictionary
before returning from the function.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def directory_size(fs, path, output):
    size = 0

    for subdir_or_size in fs[path]:
        if isinstance(subdir_or_size, int):
            size += subdir_or_size
        else:
            size += directory_size(subdir_or_size)

    output[path] = size
    return size"><pre><span class="pl-k">def</span> <span class="pl-en">directory_size</span>(<span class="pl-s1">fs</span>, <span class="pl-s1">path</span>, <span class="pl-s1">output</span>):
    <span class="pl-s1">size</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-k">for</span> <span class="pl-s1">subdir_or_size</span> <span class="pl-c1">in</span> <span class="pl-s1">fs</span>[<span class="pl-s1">path</span>]:
        <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">subdir_or_size</span>, <span class="pl-s1">int</span>):
            <span class="pl-s1">size</span> <span class="pl-c1">+=</span> <span class="pl-s1">subdir_or_size</span>
        <span class="pl-k">else</span>:
            <span class="pl-s1">size</span> <span class="pl-c1">+=</span> <span class="pl-en">directory_size</span>(<span class="pl-s1">subdir_or_size</span>)

    <span class="pl-s1">output</span>[<span class="pl-s1">path</span>] <span class="pl-c1">=</span> <span class="pl-s1">size</span>
    <span class="pl-k">return</span> <span class="pl-s1">size</span></pre></div>
<p dir="auto">This only traverses the entire <code>fs</code> tree once and saves the size of each
directory into a dictionary of the form <code>{path: size}</code>. After a single call
starting from the root, we'll know the size of any directory:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="sizes = {}
directory_size(fs, ('/',), sizes)

small_dir_total = 0
for sz in sizes.values():
    if sz &lt;= 100000:
        small_dir_total += sz"><pre><span class="pl-s1">sizes</span> <span class="pl-c1">=</span> {}
<span class="pl-en">directory_size</span>(<span class="pl-s1">fs</span>, (<span class="pl-s">'/'</span>,), <span class="pl-s1">sizes</span>)

<span class="pl-s1">small_dir_total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-k">for</span> <span class="pl-s1">sz</span> <span class="pl-c1">in</span> <span class="pl-s1">sizes</span>.<span class="pl-en">values</span>():
    <span class="pl-k">if</span> <span class="pl-s1">sz</span> <span class="pl-c1">&lt;=</span> <span class="pl-c1">100000</span>:
        <span class="pl-s1">small_dir_total</span> <span class="pl-c1">+=</span> <span class="pl-s1">sz</span></pre></div>
<p dir="auto">Alternativelt, we could also use <a href="https://en.wikipedia.org/wiki/Memoization" rel="nofollow">memoization</a> to cache the
results of <code>directory_size()</code> calls, and keep calling the function regardless.
This is an easy to implement solution since Python 3 already provides us with a
decorator to implement memoization out of the box:
<a href="https://docs.python.org/3/library/functools.html#functools.lru_cache" rel="nofollow"><code>functools.lru_cache</code></a>. For those who are interested, I
explained memoization and the use of <code>lru_cache</code> in more detail towards the end
of <a href="/mebeim/aoc/blob/master/2019/README.md#part-1-17">2019 day 18 part 1</a>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="@lru_cache(maxsize=None)
def directory_size(path):
    size = 0

    for subdir_or_size in fs[path]:
        if isinstance(subdir_or_size, int):
            size += subdir_or_size
        else:
            size += directory_size(subdir_or_size)

    return size"><pre><span class="pl-en">@<span class="pl-en">lru_cache</span>(<span class="pl-s1">maxsize</span><span class="pl-c1">=</span><span class="pl-c1">None</span>)</span>
<span class="pl-k">def</span> <span class="pl-en">directory_size</span>(<span class="pl-s1">path</span>):
    <span class="pl-s1">size</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-k">for</span> <span class="pl-s1">subdir_or_size</span> <span class="pl-c1">in</span> <span class="pl-s1">fs</span>[<span class="pl-s1">path</span>]:
        <span class="pl-k">if</span> <span class="pl-en">isinstance</span>(<span class="pl-s1">subdir_or_size</span>, <span class="pl-s1">int</span>):
            <span class="pl-s1">size</span> <span class="pl-c1">+=</span> <span class="pl-s1">subdir_or_size</span>
        <span class="pl-k">else</span>:
            <span class="pl-s1">size</span> <span class="pl-c1">+=</span> <span class="pl-en">directory_size</span>(<span class="pl-s1">subdir_or_size</span>)

    <span class="pl-k">return</span> <span class="pl-s1">size</span></pre></div>
<p dir="auto">Now no matter how many times we call <code>directory_size()</code>, the calculation is only
performed <em>once</em> for any given <code>path</code> on the first call and cached automatically
by <code>lru_cache</code> to be reused for subsequent calls. This however</p>
<p dir="auto">In any case, we finally have our solution:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="small_dir_total = 0

for path in fs:
    sz = directory_size(path)
    if sz &lt;= 100000:
        small_dir_total += sz

print('Part 1:', small_dir_total)"><pre><span class="pl-s1">small_dir_total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">path</span> <span class="pl-c1">in</span> <span class="pl-s1">fs</span>:
    <span class="pl-s1">sz</span> <span class="pl-c1">=</span> <span class="pl-en">directory_size</span>(<span class="pl-s1">path</span>)
    <span class="pl-k">if</span> <span class="pl-s1">sz</span> <span class="pl-c1">&lt;=</span> <span class="pl-c1">100000</span>:
        <span class="pl-s1">small_dir_total</span> <span class="pl-c1">+=</span> <span class="pl-s1">sz</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">small_dir_total</span>)</pre></div>
<p dir="auto">As a bonus, this can also be rewritten as a one-liner with the help of
<a href="https://docs.python.org/3/library/functions.html#filter" rel="nofollow"><code>filter</code></a>, <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map</code></a> and a
<a href="https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions" rel="nofollow"><code>lambda</code></a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="small_dir_total  = sum(filter(lambda s: s &lt;= 100000, map(directory_size, fs)))
print('Part 1:', small_dir_total)"><pre><span class="pl-s1">small_dir_total</span>  <span class="pl-c1">=</span> <span class="pl-en">sum</span>(<span class="pl-en">filter</span>(<span class="pl-k">lambda</span> <span class="pl-s1">s</span>: <span class="pl-s1">s</span> <span class="pl-c1">&lt;=</span> <span class="pl-c1">100000</span>, <span class="pl-en">map</span>(<span class="pl-s1">directory_size</span>, <span class="pl-s1">fs</span>)))
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">small_dir_total</span>)</pre></div>
<p dir="auto">Though I would honestly avoid it for readability.</p>
<h3 dir="auto"><a id="user-content-part-2-6" class="anchor" aria-hidden="true" href="#part-2-6"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">The bulk of the work is done, now we want to find a single directory to delete
to free some space on the disk. The total available space is 70000000, and we
need at least 30000000 of it free. We need to find the size of the smallest
directory that can be deleted in order to end up with a free space of at least
30000000.</p>
<p dir="auto">Well, we already have the code to do everything, all we need to do is add a
couple of variables and another <code>if</code> inside the final <code>for</code> loop used to
calculate the answer for part 1:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="used = directory_size(('/',))
free = 70000000 - used
need = 30000000 - free

small_dir_total  = 0
min_size_to_free = used

for path in fs:
    sz = directory_size(path)

    if sz &lt;= 100000:
        small_dir_total += sz

    if sz &gt;= need and sz &lt; min_size_to_free:
        min_size_to_free = sz

print('Part 1:', small_dir_total)
print('Part 2:', min_size_to_free)"><pre><span class="pl-s1">used</span> <span class="pl-c1">=</span> <span class="pl-en">directory_size</span>((<span class="pl-s">'/'</span>,))
<span class="pl-s1">free</span> <span class="pl-c1">=</span> <span class="pl-c1">70000000</span> <span class="pl-c1">-</span> <span class="pl-s1">used</span>
<span class="pl-s1">need</span> <span class="pl-c1">=</span> <span class="pl-c1">30000000</span> <span class="pl-c1">-</span> <span class="pl-s1">free</span>

<span class="pl-s1">small_dir_total</span>  <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-s1">min_size_to_free</span> <span class="pl-c1">=</span> <span class="pl-s1">used</span>

<span class="pl-k">for</span> <span class="pl-s1">path</span> <span class="pl-c1">in</span> <span class="pl-s1">fs</span>:
    <span class="pl-s1">sz</span> <span class="pl-c1">=</span> <span class="pl-en">directory_size</span>(<span class="pl-s1">path</span>)

    <span class="pl-k">if</span> <span class="pl-s1">sz</span> <span class="pl-c1">&lt;=</span> <span class="pl-c1">100000</span>:
        <span class="pl-s1">small_dir_total</span> <span class="pl-c1">+=</span> <span class="pl-s1">sz</span>

    <span class="pl-k">if</span> <span class="pl-s1">sz</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">need</span> <span class="pl-c1">and</span> <span class="pl-s1">sz</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">min_size_to_free</span>:
        <span class="pl-s1">min_size_to_free</span> <span class="pl-c1">=</span> <span class="pl-s1">sz</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">small_dir_total</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">min_size_to_free</span>)</pre></div>
<p dir="auto">Ta-dah! Thankfully an easier part 2 than part 1, and nothing too weird.</p>
<h2 dir="auto"><a id="user-content-day-8---treetop-tree-house" class="anchor" aria-hidden="true" href="#day-8---treetop-tree-house"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 8 - Treetop Tree House</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/8" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day08.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-7" class="anchor" aria-hidden="true" href="#part-1-7"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">The long-awaited grid of characters strikes back. This time we are dealing with
trees. We are given a grid of tree heights, each represented by a single digit
between <code>0</code> and <code>9</code>, and we need to count how many trees are visible from
outside the grid. A tree is considered visible from outside the grid if it is
taller than any other tree in at least one of the four cardinal directions
(looking north, south, east or west).</p>
<p dir="auto">Obviously, all trees on the perimeter of the grid are visible from the outside,
but what about the inner ones?</p>
<p dir="auto">Let's start by parsing the input data. Transforming each digit of each line into
an <code>int</code> seems natural, but it's unneeded. We are, as usual, dealing with plain
<a href="https://en.wikipedia.org/wiki/ASCII" rel="nofollow">ASCII</a> characters, and the byte values of the digits <code>0</code> through
<code>9</code> in ASCII are ascending (from <code>0x30</code> to <code>0x39</code>). If we open the input file in
binary mode, we can simply use <a href="https://docs.python.org/3/library/stdtypes.html#bytes.splitlines" rel="nofollow"><code>.splitlines()</code></a> and we'll
have a list of <code>bytes</code> objects (one per line), and iterating over <code>bytes</code>
already yields integers. We could do the same by opening the file in text mode
(the default), since <code>'1' &gt; '0'</code> still holds for strings too, but decoding is
unneeded.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(..., 'rb') as fin:
    grid = fin.read().splitlines()"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(..., <span class="pl-s">'rb'</span>) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">grid</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">splitlines</span>()</pre></div>
<p dir="auto">As already said, all the trees on the perimeter of the grid are visible, and we
can pre-calculate this number to save time: it's simply <code>H * 2 + W * 2 - 4</code> (the
<code>- 4</code> is needed to avoid counting vertices twice). While we are at it, let's
also calculate a couple of useful values for later.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="height, width = len(grid), len(grid[0])
maxr, maxc = height - 1, width - 1
visible = height * 2 + width * 2 - 4"><pre><span class="pl-s1">height</span>, <span class="pl-s1">width</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">grid</span>), <span class="pl-en">len</span>(<span class="pl-s1">grid</span>[<span class="pl-c1">0</span>])
<span class="pl-s1">maxr</span>, <span class="pl-s1">maxc</span> <span class="pl-c1">=</span> <span class="pl-s1">height</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">width</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>
<span class="pl-s1">visible</span> <span class="pl-c1">=</span> <span class="pl-s1">height</span> <span class="pl-c1">*</span> <span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-s1">width</span> <span class="pl-c1">*</span> <span class="pl-c1">2</span> <span class="pl-c1">-</span> <span class="pl-c1">4</span></pre></div>
<p dir="auto">We'll use two nested <code>for</code> loops to iterate over the entire grid. Since we
already pre-computed the visibility of the perimeter of the grid, we can skip
it, which means starting our iterations from <code>1</code> and stopping right before
<code>maxr</code> and <code>maxc</code> (calculated above). We'll also keep the current row in a
variable, to avoid double-indexing the grid where possible.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for r in range(1, maxr):
    row = grid[r]

    for c in range(1, maxc):
        tree = row[c]

        ..."><pre><span class="pl-k">for</span> <span class="pl-s1">r</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxr</span>):
    <span class="pl-s1">row</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>]

    <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxc</span>):
        <span class="pl-s1">tree</span> <span class="pl-c1">=</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span>]

        ...</pre></div>
<p dir="auto">To know whether a tree is visible from outside the grid on the east side we can
iterate the current <code>row</code> starting from <code>c + 1</code> up to its end, and check if our
<code>tree</code> is higher than all of them. If not, there is no visibility from east.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="        # ... continues from above

        visible_from_east = True
        for t in row[c + 1:]:
            if tree &lt;= t:
                visible_from_east = False"><pre>        <span class="pl-c"># ... continues from above</span>

        <span class="pl-s1">visible_from_east</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>
        <span class="pl-k">for</span> <span class="pl-s1">t</span> <span class="pl-c1">in</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>:]:
            <span class="pl-k">if</span> <span class="pl-s1">tree</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">t</span>:
                <span class="pl-s1">visible_from_east</span> <span class="pl-c1">=</span> <span class="pl-c1">False</span></pre></div>
<p dir="auto">Let me take a second to make a small digression. It should be noted that in
general doing something like <code>row[c + 1:]</code> is not that good of an idea, since in
Python slicing lists, tuples, strings, bytes or similar collections <em>performs a
copy</em> of the sliced values. Clearly a copy is unneeded if we don't need to
modify the data and only slows things down, more so if the operation is
performed on large collections or repeated a lot of times. This is a pretty
unfortunate design flaw of the language that we can get around in a couple
different ways, including using external libraries such as <a href="https://numpy.org" rel="nofollow">NumPy</a>,
since <a href="https://numpy.org/doc/stable/user/basics.copies.html" rel="nofollow">by default slices of NumPy arrays return <em>views</em></a>
instead of performing copies. In our case, the input grid is 99 by 99, which is
a pretty small size, so we can get away with all this unnecessary copying to
keep the code more concise and easier to read, but be warned that in general
this isn't the case.</p>
<p dir="auto">Back to the problem. The kind of loop we just wrote is exactly what the
<a href="https://docs.python.org/3/library/functions.html#all" rel="nofollow"><code>all()</code></a> built-in function was invented for: using <code>all()</code>
together with a <a href="https://www.python.org/dev/peps/pep-0289/" rel="nofollow">generator expression</a> gives us a one-liner
equivalent to the above loop that is also easily readable:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="visible_from_east = all(tree &gt; t for t in row[c + 1:])"><pre><span class="pl-s1">visible_from_east</span> <span class="pl-c1">=</span> <span class="pl-en">all</span>(<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-k">for</span> <span class="pl-s1">t</span> <span class="pl-c1">in</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>:])</pre></div>
<p dir="auto">Analogously, we can do the same thing for west, south and north. The only hiccup
is that for south and north we don't have a nice <code>column</code> variable to iterate
over, and we'll have to iterate over the <code>grid</code> with an index instead of using
<a href="https://docs.python.org/3/library/functions.html#range" rel="nofollow"><code>range()</code></a>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="visible_from_east  = all(tree &gt; t for t in row[c + 1:])
visible_from_west  = all(tree &gt; t for t in row[:c])
visible_from_south = all(tree &gt; grid[i][c] for i in range(r + 1, len(grid)))
visible_from_north = all(tree &gt; grid[i][c] for i in range(r - 1, -1, -1))"><pre><span class="pl-s1">visible_from_east</span>  <span class="pl-c1">=</span> <span class="pl-en">all</span>(<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-k">for</span> <span class="pl-s1">t</span> <span class="pl-c1">in</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>:])
<span class="pl-s1">visible_from_west</span>  <span class="pl-c1">=</span> <span class="pl-en">all</span>(<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-k">for</span> <span class="pl-s1">t</span> <span class="pl-c1">in</span> <span class="pl-s1">row</span>[:<span class="pl-s1">c</span>])
<span class="pl-s1">visible_from_south</span> <span class="pl-c1">=</span> <span class="pl-en">all</span>(<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">grid</span>[<span class="pl-s1">i</span>][<span class="pl-s1">c</span>] <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-en">len</span>(<span class="pl-s1">grid</span>)))
<span class="pl-s1">visible_from_north</span> <span class="pl-c1">=</span> <span class="pl-en">all</span>(<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">grid</span>[<span class="pl-s1">i</span>][<span class="pl-s1">c</span>] <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">r</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>))</pre></div>
<p dir="auto">Now, in theory, a tree is visible from outside the grid if <em>any</em> of the above
variables is <code>True</code>, so we are doing unneeded work. For example, if
<code>visible_from_east</code> is <code>True</code>, we don't need to calculate the rest, and the same
goes for the others. Since we are in a loop, we could use <code>continue</code> to skip
right to the next iteration when any of the four is satisfied:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for r in range(1, maxr):
    row = grid[r]

    for c in range(1, maxc):
        tree = row[c]

        if all(tree &gt; t for t in row[c + 1:]): # east
            visible += 1
            continue

        if all(tree &gt; t for t in row[:c]): # west
            visible += 1
            continue

        # Same for south and north..."><pre><span class="pl-k">for</span> <span class="pl-s1">r</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxr</span>):
    <span class="pl-s1">row</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>]

    <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxc</span>):
        <span class="pl-s1">tree</span> <span class="pl-c1">=</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span>]

        <span class="pl-k">if</span> <span class="pl-en">all</span>(<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-k">for</span> <span class="pl-s1">t</span> <span class="pl-c1">in</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>:]): <span class="pl-c"># east</span>
            <span class="pl-s1">visible</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
            <span class="pl-k">continue</span>

        <span class="pl-k">if</span> <span class="pl-en">all</span>(<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-k">for</span> <span class="pl-s1">t</span> <span class="pl-c1">in</span> <span class="pl-s1">row</span>[:<span class="pl-s1">c</span>]): <span class="pl-c"># west</span>
            <span class="pl-s1">visible</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
            <span class="pl-k">continue</span>

        <span class="pl-c"># Same for south and north...</span></pre></div>
<p dir="auto">However, if we save the generators in a variable instead of feeding them to
<code>all()</code> immediately we can also do this without duplicating much code with a
single <code>if</code> statement, retaining the lazyness of the operation with a simple
<code>or</code>, which only evaluates its right operand if the left one is <code>False</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for r in range(1, maxr):
    row = grid[r]

    for c in range(1, maxc):
        tree = row[c]

        east  = (tree &gt; t for t in row[c + 1:])
        west  = (tree &gt; t for t in row[:c])
        south = (tree &gt; grid[i][c] for i in range(r + 1, len(grid)))
        north = (tree &gt; grid[i][c] for i in range(r - 1, -1, -1))

        if all(east) or all(west) or all(south) or all(north):
            visible += 1

print('Part 1:', visible)"><pre><span class="pl-k">for</span> <span class="pl-s1">r</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxr</span>):
    <span class="pl-s1">row</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>]

    <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxc</span>):
        <span class="pl-s1">tree</span> <span class="pl-c1">=</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span>]

        <span class="pl-s1">east</span>  <span class="pl-c1">=</span> (<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-k">for</span> <span class="pl-s1">t</span> <span class="pl-c1">in</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>:])
        <span class="pl-s1">west</span>  <span class="pl-c1">=</span> (<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">t</span> <span class="pl-k">for</span> <span class="pl-s1">t</span> <span class="pl-c1">in</span> <span class="pl-s1">row</span>[:<span class="pl-s1">c</span>])
        <span class="pl-s1">south</span> <span class="pl-c1">=</span> (<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">grid</span>[<span class="pl-s1">i</span>][<span class="pl-s1">c</span>] <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-en">len</span>(<span class="pl-s1">grid</span>)))
        <span class="pl-s1">north</span> <span class="pl-c1">=</span> (<span class="pl-s1">tree</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">grid</span>[<span class="pl-s1">i</span>][<span class="pl-s1">c</span>] <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">r</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>))

        <span class="pl-k">if</span> <span class="pl-en">all</span>(<span class="pl-s1">east</span>) <span class="pl-c1">or</span> <span class="pl-en">all</span>(<span class="pl-s1">west</span>) <span class="pl-c1">or</span> <span class="pl-en">all</span>(<span class="pl-s1">south</span>) <span class="pl-c1">or</span> <span class="pl-en">all</span>(<span class="pl-s1">north</span>):
            <span class="pl-s1">visible</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">visible</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-7" class="anchor" aria-hidden="true" href="#part-2-7"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">For the second part we need to do a similar job, but this time we want to find
out <em>how far can we see from the top of a given tree</em> in the four cardinal
directions. Being on top of a tree, we can only see in a certain direction up
until our view is blocked by a taller tree. For each tree, we need to calculate
a <em>score</em> equal to the product of the viewing distances in the four directions.
Out of all these scores, we must then find the highest.</p>
<p dir="auto">As an example, given the following small grid:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="8303730
9255124
3677320"><pre class="notranslate"><code>8303730
9255124
3677320
</code></pre></div>
<p dir="auto">The tree with height <code>5</code> in the middle of the grid can see <code>1</code> unit north, <code>3</code>
units east, <code>1</code> unit south and <code>1</code> unit west (blocked by the other <code>5</code>). Its
score would then be <code>1 * 3 * 1 * 1 = 2</code>.</p>
<p dir="auto">Calculating the view distance in each direction is pretty similar to what we
just did for part 1, except that we need to <em>count</em> how many grid cells we pass
before stopping because of a higher tree. Well, if we use plain and simple (but
also boring) <code>for</code> loops instead of writing fancy generator expressions, we can
do this pretty easily.</p>
<p dir="auto">For example, for east:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for r in range(1, maxr):
    row = grid[r]
    for c in range(1, maxc):
        tree = row[c]

        for i in range(c + 1, width):
            if row[i] &gt;= tree:
                break

        view_east = i - c"><pre><span class="pl-k">for</span> <span class="pl-s1">r</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxr</span>):
    <span class="pl-s1">row</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>]
    <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxc</span>):
        <span class="pl-s1">tree</span> <span class="pl-c1">=</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span>]

        <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">width</span>):
            <span class="pl-k">if</span> <span class="pl-s1">row</span>[<span class="pl-s1">i</span>] <span class="pl-c1">&gt;=</span> <span class="pl-s1">tree</span>:
                <span class="pl-k">break</span>

        <span class="pl-s1">view_east</span> <span class="pl-c1">=</span> <span class="pl-s1">i</span> <span class="pl-c1">-</span> <span class="pl-s1">c</span></pre></div>
<p dir="auto">Doing the same for all directions, and adding the formula to calculate the
score, we have the solution for part 2:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for r in range(1, maxr):
    row = grid[r]

    for c in range(1, maxc):
        tree = row[c]

        for east in range(c + 1, width):
            if row[east] &gt;= tree:
                break

        for west in range(c - 1, -1, -1):
            if row[west] &gt;= tree:
                break

        for south in range(r + 1, height):
            if grid[south][c] &gt;= tree:
                break

        for north in range(r - 1, -1, -1):
            if grid[north][c] &gt;= tree:
                break

        score = (east - c) * (c - west) * (south - r) * (r - north)

        if score &gt; best:
            best = score

print('Part 2:', best)"><pre><span class="pl-k">for</span> <span class="pl-s1">r</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxr</span>):
    <span class="pl-s1">row</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>]

    <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">1</span>, <span class="pl-s1">maxc</span>):
        <span class="pl-s1">tree</span> <span class="pl-c1">=</span> <span class="pl-s1">row</span>[<span class="pl-s1">c</span>]

        <span class="pl-k">for</span> <span class="pl-s1">east</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">width</span>):
            <span class="pl-k">if</span> <span class="pl-s1">row</span>[<span class="pl-s1">east</span>] <span class="pl-c1">&gt;=</span> <span class="pl-s1">tree</span>:
                <span class="pl-k">break</span>

        <span class="pl-k">for</span> <span class="pl-s1">west</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">c</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>):
            <span class="pl-k">if</span> <span class="pl-s1">row</span>[<span class="pl-s1">west</span>] <span class="pl-c1">&gt;=</span> <span class="pl-s1">tree</span>:
                <span class="pl-k">break</span>

        <span class="pl-k">for</span> <span class="pl-s1">south</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">height</span>):
            <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">south</span>][<span class="pl-s1">c</span>] <span class="pl-c1">&gt;=</span> <span class="pl-s1">tree</span>:
                <span class="pl-k">break</span>

        <span class="pl-k">for</span> <span class="pl-s1">north</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">r</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>):
            <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">north</span>][<span class="pl-s1">c</span>] <span class="pl-c1">&gt;=</span> <span class="pl-s1">tree</span>:
                <span class="pl-k">break</span>

        <span class="pl-s1">score</span> <span class="pl-c1">=</span> (<span class="pl-s1">east</span> <span class="pl-c1">-</span> <span class="pl-s1">c</span>) <span class="pl-c1">*</span> (<span class="pl-s1">c</span> <span class="pl-c1">-</span> <span class="pl-s1">west</span>) <span class="pl-c1">*</span> (<span class="pl-s1">south</span> <span class="pl-c1">-</span> <span class="pl-s1">r</span>) <span class="pl-c1">*</span> (<span class="pl-s1">r</span> <span class="pl-c1">-</span> <span class="pl-s1">north</span>)

        <span class="pl-k">if</span> <span class="pl-s1">score</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">best</span>:
            <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-s1">score</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">best</span>)</pre></div>
<p dir="auto">Technically, the code for both parts could be easily joined together into the
same extended loop we just wrote for part 2, but I liked the concise part 1 code
using <code>all()</code> with generator expressions, so I kept it in my final solution.</p>
<h3 dir="auto"><a id="user-content-reflections" class="anchor" aria-hidden="true" href="#reflections"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reflections</h3>
<p dir="auto">The algorithms I implemented for today's part 1 and part 2 scan the grid in four
direction for every single grid cell. This means that in the worst case scenario
we are potentially scanning the entire grid 4 times per single tree. For a
square grid of side <em>n</em> there are <em>n<sup>2</sup></em> trees, thus the computational
complexity of these algorithm is at worst
<em>O(4n<sup>2</sup>n<sup>2</sup>) = O(n<sup>4</sup>)</em> operations.</p>
<p dir="auto">That honestly doesn't sound very good. Indeed, there is a smarter solution, at
least for part 1, which achieves the same result in <em>O(n<sup>2</sup>)</em>
operations only:</p>
<ul dir="auto">
<li>Scan the entire matrix once per direction.</li>
<li>For each row/column, keep track of the tallest tree while scanning.</li>
<li>Mark all the trees taller than the tallest as visible from outside the grid.</li>
<li>As a bonus: stop scanning the current row/column when the tallest tree
encountered is a <code>9</code>.</li>
</ul>
<p dir="auto">I implemented this approach in <a href="/mebeim/aoc/blob/master/2022/misc/day08/faster_part1.py">my alternative solution</a> for
those that are curious.</p>
<p dir="auto">For part 2, a similar logic can be used, keeping track of the last time a tree
of <em>each possible height</em> was seen, and using such information to instantly
compute the view distance from any encountered tree in the current scanning
direction. This requires a bit more effort though, and I did not have time to
re-implement my part 2 solution using this approach.</p>
<h2 dir="auto"><a id="user-content-day-9---rope-bridge" class="anchor" aria-hidden="true" href="#day-9---rope-bridge"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 9 - Rope Bridge</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/9" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day09.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-8" class="anchor" aria-hidden="true" href="#part-1-8"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">2D grids again, huh? Today we're not really taking a grid as input, but moving
through one instead. Given a list of moves of the form <code>&lt;direction&gt; &lt;N&gt;</code> (e.g.
<code>R 5</code>) we need to simulate the movements of a small piece of rope by tracking
the position of its head and tail in a grid. The rope moves head first one step
at a time in any of the four cardinal directions, and the tail will always stay
"attached" to the head, meaning in one of the 8 neighboring cells. Whenever the
head makes a movement that separates it from the tail, the tail also moves
toward the head in the nearest cell that is directly above, below, left or right
of the head. We need to count the number of different positions the tail will
occupy while simulating all the moves in our input.</p>
<p dir="auto">An example makes it easier to understand what is going on. Let's analyze the
movement of the head and tail, given that they start in the same spot and the
moves to perform are <code>R 2</code> followed by <code>U 2</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="...      ...      ...      ...      ..H
...  -&gt;  ...  -&gt;  ...  -&gt;  ..H  -&gt;  ..T
H..      TH.      .TH      .T.      ..."><pre lang="none" class="notranslate"><code>...      ...      ...      ...      ..H
...  -&gt;  ...  -&gt;  ...  -&gt;  ..H  -&gt;  ..T
H..      TH.      .TH      .T.      ...
</code></pre></div>
<p dir="auto">As can be seen above, when the head (<code>H</code>) moves up one cell, the tail (<code>T</code>) is
still "attached" to it. However, the second movement of the head would cause the
tail to disconnect, thus it moves <em>towards the head</em>.</p>
<p dir="auto">If we zoom in and break a single transition in two steps, the movement of the
tail will be clearer:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=".   .   .      .   .   .      .   .   .

.   .   .  =&gt;  .   .   .  =&gt;  .   .   .

T   H   .      T-------H      .   T   H"><pre lang="none" class="notranslate"><code>.   .   .      .   .   .      .   .   .

.   .   .  =&gt;  .   .   .  =&gt;  .   .   .

T   H   .      T-------H      .   T   H
</code></pre></div>
<p dir="auto">In the simple case where the head moves, but stays on the same horizontal or
vertical line as the tail, the movement of the tail is straightforward: it wants
to move towards the head following the segment depicted above, and so it simply
needs to move one unit in the right direction.</p>
<p dir="auto">The second, not-so-obvious case is when the head moves while not on the same
horizontal/vertical line as the tail:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=".   .   .      .   .   H      .   .   H
                      /
.   .   H  =&gt;  .   . / .  =&gt;  .   .   T
                    /
.   T   .      .   T   .      .   .   ."><pre lang="none" class="notranslate"><code>.   .   .      .   .   H      .   .   H
                      /
.   .   H  =&gt;  .   . / .  =&gt;  .   .   T
                    /
.   T   .      .   T   .      .   .   .
</code></pre></div>
<p dir="auto">Again, the instant after the head moves up, the tail becomes disconnected, and
thus must move towards the head. The tail wants to follow the straight segment
plotted above, thus it moves up one unit and right one unit, ending up right
below the head.</p>
<p dir="auto">To generalize: whenever the tail becomes disconnected, it will move in the
direction "suggested" by the imaginary segment connecting it straight to the
head. Thus, if this segment is parallel to the grid axes, the movement is a
simple step (up, down, left or right), otherwise the movement will be a larger
<em>diagonal</em> step in the same direction as the segment.</p>
<p dir="auto">Oookay. Now that we (hopefully) understood how this dance of head and tail rope
movements works, let's start coding. First of all, since for each input move
we'll have to simulate all the steps, let's make things easier with a dictionary
of deltas to apply to make a single step given a direction:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# {direction: (deltax, deltay)}
DELTA = {'U': (0, 1), 'D': (0, -1), 'L': (-1, 0), 'R': (1, 0)}"><pre><span class="pl-c"># {direction: (deltax, deltay)}</span>
<span class="pl-v">DELTA</span> <span class="pl-c1">=</span> {<span class="pl-s">'U'</span>: (<span class="pl-c1">0</span>, <span class="pl-c1">1</span>), <span class="pl-s">'D'</span>: (<span class="pl-c1">0</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>), <span class="pl-s">'L'</span>: (<span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">0</span>), <span class="pl-s">'R'</span>: (<span class="pl-c1">1</span>, <span class="pl-c1">0</span>)}</pre></div>
<p dir="auto">In order to keep track of head and tail positions we'll use 4 variables as two
2D coordinates. Parsing the input is only a matter of <a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow"><code>.split()</code></a>
and conversion to <code>int</code>, and the movement of the head can be done with an
addition after looking up the right delta on both axes using the dictionary we
just defined.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="hx, hy = 0, 0
tx, ty = 0, 0

with open(...) as fin:
    for line in fin:
        direction, steps = line.split()
        steps = int(steps)

        for _ in range(steps):
            deltax, deltay = DELTA[direction]
            hx += deltax
            hy += deltay

            # Move the tail somehow..."><pre><span class="pl-s1">hx</span>, <span class="pl-s1">hy</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>, <span class="pl-c1">0</span>
<span class="pl-s1">tx</span>, <span class="pl-s1">ty</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>, <span class="pl-c1">0</span>

<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
        <span class="pl-s1">direction</span>, <span class="pl-s1">steps</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">split</span>()
        <span class="pl-s1">steps</span> <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">steps</span>)

        <span class="pl-k">for</span> <span class="pl-s1">_</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">steps</span>):
            <span class="pl-s1">deltax</span>, <span class="pl-s1">deltay</span> <span class="pl-c1">=</span> <span class="pl-v">DELTA</span>[<span class="pl-s1">direction</span>]
            <span class="pl-s1">hx</span> <span class="pl-c1">+=</span> <span class="pl-s1">deltax</span>
            <span class="pl-s1">hy</span> <span class="pl-c1">+=</span> <span class="pl-s1">deltay</span>

            <span class="pl-c"># Move the tail somehow...</span></pre></div>
<p dir="auto">Okay, now we are simulating the movement of the head, but we also need the tail
to follow along. We can represent the segment that the tail wants to follow as
2D vector, meaning another couple of variables: <code>dx</code> and <code>dy</code>, which can be
easily calculated:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="dx = hx - tx
dy = hy - ty"><pre><span class="pl-s1">dx</span> <span class="pl-c1">=</span> <span class="pl-s1">hx</span> <span class="pl-c1">-</span> <span class="pl-s1">tx</span>
<span class="pl-s1">dy</span> <span class="pl-c1">=</span> <span class="pl-s1">hy</span> <span class="pl-c1">-</span> <span class="pl-s1">ty</span></pre></div>
<p dir="auto">Now, how do we know if the head moved too far from the tail? We can use
<a href="https://en.wikipedia.org/wiki/Euclidean_distance" rel="nofollow">Euclidean distance</a> for that. The 8 possible cells
surrounding the head will always be at an Euclidean distance of at most <em>âˆš(2)</em>
(square root of 2) units. That is, the four cells above, below, left and right
will have a distance of <em>1</em> unit, while the other four cells will have a
distance of <em>âˆš(1<sup>2</sup>+1<sup>2</sup>) = âˆš(2)</em> units. Thus, the tail needs
to move and follow the head <em>IFF âˆš(dx<sup>2</sup>+dy<sup>2</sup>) &gt; âˆš(2)</em>. If we
get rid of the square root by squaring both sides, we are left with the
condition <em>dx<sup>2</sup>+dy<sup>2</sup> &gt; 2</em>.</p>
<p dir="auto">How does the tail need to move? Well, following <code>dx</code> and <code>dy</code>. If <code>dx</code> is
positive, it moves one unit to the right, while if it's negative it moves one
unit to the left. If <code>dx</code> is zero it means that either the tail is right on top
of the head, or that it's on its same horizontal line: either way, it does not
need to move along the <em>x</em> axis (left or right). The same reasoning applies to
<code>dy</code>.</p>
<p dir="auto">Following these conclusions, and using a <a href="https://docs.python.org/3/tutorial/datastructures.html#sets" rel="nofollow"><code>set</code></a> to keep track of all
the different coordinates visited by the tail, we have the complete solution:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="hx, hy = 0, 0
tx, ty = 0, 0
seen = {(0, 0)}

with open(...) as fin:
    for line in fin:
        direction, steps = line.split()
        steps = int(steps)

        for _ in range(steps):
            deltax, deltay = DELTA[direction]
            hx += deltax
            hy += deltay
            dx = hx - tx
            dy = hy - ty

            if dx**2 + dy**2 &gt; 2:
                if dx != 0:
                    tx += 1 if dx &gt; 0 else -1
                if dy != 0:
                    ty += 1 if dy &gt; 0 else -1

                seen.add((tx, ty))"><pre><span class="pl-s1">hx</span>, <span class="pl-s1">hy</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>, <span class="pl-c1">0</span>
<span class="pl-s1">tx</span>, <span class="pl-s1">ty</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>, <span class="pl-c1">0</span>
<span class="pl-s1">seen</span> <span class="pl-c1">=</span> {(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>)}

<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
        <span class="pl-s1">direction</span>, <span class="pl-s1">steps</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">split</span>()
        <span class="pl-s1">steps</span> <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">steps</span>)

        <span class="pl-k">for</span> <span class="pl-s1">_</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">steps</span>):
            <span class="pl-s1">deltax</span>, <span class="pl-s1">deltay</span> <span class="pl-c1">=</span> <span class="pl-v">DELTA</span>[<span class="pl-s1">direction</span>]
            <span class="pl-s1">hx</span> <span class="pl-c1">+=</span> <span class="pl-s1">deltax</span>
            <span class="pl-s1">hy</span> <span class="pl-c1">+=</span> <span class="pl-s1">deltay</span>
            <span class="pl-s1">dx</span> <span class="pl-c1">=</span> <span class="pl-s1">hx</span> <span class="pl-c1">-</span> <span class="pl-s1">tx</span>
            <span class="pl-s1">dy</span> <span class="pl-c1">=</span> <span class="pl-s1">hy</span> <span class="pl-c1">-</span> <span class="pl-s1">ty</span>

            <span class="pl-k">if</span> <span class="pl-s1">dx</span><span class="pl-c1">**</span><span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-s1">dy</span><span class="pl-c1">**</span><span class="pl-c1">2</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">2</span>:
                <span class="pl-k">if</span> <span class="pl-s1">dx</span> <span class="pl-c1">!=</span> <span class="pl-c1">0</span>:
                    <span class="pl-s1">tx</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span> <span class="pl-k">if</span> <span class="pl-s1">dx</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span> <span class="pl-k">else</span> <span class="pl-c1">-</span><span class="pl-c1">1</span>
                <span class="pl-k">if</span> <span class="pl-s1">dy</span> <span class="pl-c1">!=</span> <span class="pl-c1">0</span>:
                    <span class="pl-s1">ty</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span> <span class="pl-k">if</span> <span class="pl-s1">dy</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span> <span class="pl-k">else</span> <span class="pl-c1">-</span><span class="pl-c1">1</span>

                <span class="pl-s1">seen</span>.<span class="pl-en">add</span>((<span class="pl-s1">tx</span>, <span class="pl-s1">ty</span>))</pre></div>
<p dir="auto">The use of the <a href="https://docs.python.org/3/reference/expressions.html#conditional-expressions" rel="nofollow">conditional expression</a> <code>1 if dx &gt; 0 else -1</code>
could be simplified. After all, what we are doing is merely taking the <em>sign</em> of
<code>dx</code>. As it turns out though, Python does not have a built-in for the sign of a
number, apparently because <a href="https://stackoverflow.com/a/1986776/3889449" rel="nofollow">the authors of the language could not
agree</a> on what such a function would return in special cases (e.g.
<code>0</code> or <code>NaN</code>). We can however write our own <code>sign()</code> function to take care of
this, and make it return <code>0</code> in case the given value is <code>0</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Intuitive implementation, the first one you'd probably think of
def sign(x):
    if x == 0:
        return 0
    return 1 if x &gt; 0 else -1

# More clever, branchless implementation:
def sign(x):
    return (x &gt; 0) - (x &lt; 0)"><pre><span class="pl-c"># Intuitive implementation, the first one you'd probably think of</span>
<span class="pl-k">def</span> <span class="pl-en">sign</span>(<span class="pl-s1">x</span>):
    <span class="pl-k">if</span> <span class="pl-s1">x</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
        <span class="pl-k">return</span> <span class="pl-c1">0</span>
    <span class="pl-k">return</span> <span class="pl-c1">1</span> <span class="pl-k">if</span> <span class="pl-s1">x</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span> <span class="pl-k">else</span> <span class="pl-c1">-</span><span class="pl-c1">1</span>

<span class="pl-c"># More clever, branchless implementation:</span>
<span class="pl-k">def</span> <span class="pl-en">sign</span>(<span class="pl-s1">x</span>):
    <span class="pl-k">return</span> (<span class="pl-s1">x</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>) <span class="pl-c1">-</span> (<span class="pl-s1">x</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">0</span>)</pre></div>
<p dir="auto">And now we have:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="            # ...
            if dx**2 + dy**2 &gt; 2:
                tx += sign(dx)
                ty += sign(dy)
            # ..."><pre>            <span class="pl-c"># ...</span>
            <span class="pl-k">if</span> <span class="pl-s1">dx</span><span class="pl-c1">**</span><span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-s1">dy</span><span class="pl-c1">**</span><span class="pl-c1">2</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">2</span>:
                <span class="pl-s1">tx</span> <span class="pl-c1">+=</span> <span class="pl-en">sign</span>(<span class="pl-s1">dx</span>)
                <span class="pl-s1">ty</span> <span class="pl-c1">+=</span> <span class="pl-en">sign</span>(<span class="pl-s1">dy</span>)
            <span class="pl-c"># ...</span></pre></div>
<p dir="auto">In any case, after the main loop is done, we have all the different coordinates
visited by the tail in our <code>seen</code> set, and the solution is one <code>len()</code> away:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="different_tail_positions = len(seen)
print('Part 1:', different_tail_positions)"><pre><span class="pl-s1">different_tail_positions</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">seen</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">different_tail_positions</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-8" class="anchor" aria-hidden="true" href="#part-2-8"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">Now our rope becomes longer. It's composed of 10 pieces in total (including the
head). The rules to follow are the same as before, but now every piece follows
the one in front of it. The tail is the last piece, and we still need to
count the number of different positions occupied by it.</p>
<p dir="auto">We can re-write our solution to keep track of a <code>list</code> of 2D coordinates instead
of just four variables. Furthermore, we can solve both parts together, since
part 1 fundamentally asks us to keep track of the second piece of the rope, and
part 2 asks us to keep track of the tenth:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="rope  = [(0, 0)] * 10
seen1 = {(0, 0)}
seen9 = {(0, 0)}"><pre><span class="pl-s1">rope</span>  <span class="pl-c1">=</span> [(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>)] <span class="pl-c1">*</span> <span class="pl-c1">10</span>
<span class="pl-s1">seen1</span> <span class="pl-c1">=</span> {(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>)}
<span class="pl-s1">seen9</span> <span class="pl-c1">=</span> {(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>)}</pre></div>
<p dir="auto">The only thing that actually changes is that the logic used to move the tail for
part 1 now needs to be applied 9 times (once per piece following the head).
Each time, any given piece follows the one in front of it. Instead of going
through each step again, I'll just let the code speak for itself with the help
of a few comments:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    for line in fin:
        direction, steps = line.split()
        steps = int(steps)

        for _ in range(steps):
            hx, hy = rope[0]
            dx, dy = DELTA[direction]

            # Move the head
            rope[0] = hx + dx, hy + dy

            for i in range(9):
                # Consider this piece as the &quot;head&quot;
                hx, hy = rope[i]
                # And the one after it as the &quot;tail&quot;
                tx, ty = rope[i + 1]

                # Do the exact same thing we did for part 1
                dx, dy = hx - tx, hy - ty
                if dx**2 + dy**2 &gt; 2:
                    tx += sign(dx)
                    ty += sign(dy)
                    rope[i + 1] = (tx, ty)

            # Keep track of both the second and the last pieces
            seen1.add(tuple(rope[1]))
            seen9.add(tuple(rope[9]))

answer1 = len(seen1)
answer2 = len(seen9)
print('Part 1:', answer1)
print('Part 2:', answer2)"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
        <span class="pl-s1">direction</span>, <span class="pl-s1">steps</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">split</span>()
        <span class="pl-s1">steps</span> <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">steps</span>)

        <span class="pl-k">for</span> <span class="pl-s1">_</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">steps</span>):
            <span class="pl-s1">hx</span>, <span class="pl-s1">hy</span> <span class="pl-c1">=</span> <span class="pl-s1">rope</span>[<span class="pl-c1">0</span>]
            <span class="pl-s1">dx</span>, <span class="pl-s1">dy</span> <span class="pl-c1">=</span> <span class="pl-v">DELTA</span>[<span class="pl-s1">direction</span>]

            <span class="pl-c"># Move the head</span>
            <span class="pl-s1">rope</span>[<span class="pl-c1">0</span>] <span class="pl-c1">=</span> <span class="pl-s1">hx</span> <span class="pl-c1">+</span> <span class="pl-s1">dx</span>, <span class="pl-s1">hy</span> <span class="pl-c1">+</span> <span class="pl-s1">dy</span>

            <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">9</span>):
                <span class="pl-c"># Consider this piece as the "head"</span>
                <span class="pl-s1">hx</span>, <span class="pl-s1">hy</span> <span class="pl-c1">=</span> <span class="pl-s1">rope</span>[<span class="pl-s1">i</span>]
                <span class="pl-c"># And the one after it as the "tail"</span>
                <span class="pl-s1">tx</span>, <span class="pl-s1">ty</span> <span class="pl-c1">=</span> <span class="pl-s1">rope</span>[<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>]

                <span class="pl-c"># Do the exact same thing we did for part 1</span>
                <span class="pl-s1">dx</span>, <span class="pl-s1">dy</span> <span class="pl-c1">=</span> <span class="pl-s1">hx</span> <span class="pl-c1">-</span> <span class="pl-s1">tx</span>, <span class="pl-s1">hy</span> <span class="pl-c1">-</span> <span class="pl-s1">ty</span>
                <span class="pl-k">if</span> <span class="pl-s1">dx</span><span class="pl-c1">**</span><span class="pl-c1">2</span> <span class="pl-c1">+</span> <span class="pl-s1">dy</span><span class="pl-c1">**</span><span class="pl-c1">2</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">2</span>:
                    <span class="pl-s1">tx</span> <span class="pl-c1">+=</span> <span class="pl-en">sign</span>(<span class="pl-s1">dx</span>)
                    <span class="pl-s1">ty</span> <span class="pl-c1">+=</span> <span class="pl-en">sign</span>(<span class="pl-s1">dy</span>)
                    <span class="pl-s1">rope</span>[<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>] <span class="pl-c1">=</span> (<span class="pl-s1">tx</span>, <span class="pl-s1">ty</span>)

            <span class="pl-c"># Keep track of both the second and the last pieces</span>
            <span class="pl-s1">seen1</span>.<span class="pl-en">add</span>(<span class="pl-en">tuple</span>(<span class="pl-s1">rope</span>[<span class="pl-c1">1</span>]))
            <span class="pl-s1">seen9</span>.<span class="pl-en">add</span>(<span class="pl-en">tuple</span>(<span class="pl-s1">rope</span>[<span class="pl-c1">9</span>]))

<span class="pl-s1">answer1</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">seen1</span>)
<span class="pl-s1">answer2</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">seen9</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer1</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">answer2</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-10---cathode-ray-tube" class="anchor" aria-hidden="true" href="#day-10---cathode-ray-tube"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 10 - Cathode-Ray Tube</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/10" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day10.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-9" class="anchor" aria-hidden="true" href="#part-1-9"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">It wouldn't be Advent of Code without some kind of virtual machine to implement!
Today's puzzle requires us to implement a VM that only has one register <code>X</code> and
knows two instructions: <code>noop</code> and <code>addx n</code>. The first one has a duration of
1 cycle and does nothing, while the second one has a duration of 2 cycles and
adds the immediate value <code>n</code> to <code>X</code> <em>after</em> the two cycles have passed.</p>
<p dir="auto">We start at the first cycle, and need to emulate a list of instructions. Then,
starting from cycle 20 and every 40 cycles after that (60, 100, 140, ...) we
need to calculate the product of the current value of <code>X</code> and the current cycle
number. Summing up all these products together will give us the answer for part
1.</p>
<p dir="auto">Seems quite simple. The only pitfall is that the <code>addx</code> instruction takes <em><strong>2
cycles</strong></em> instead of 1, and one of those could be the one we are interested in
(where we need to compute the product). Not a real problem: whenever we
encounter an <code>addx</code> we'll just need to repeat the cycle increment twice and
check its value in between these two increments.</p>
<p dir="auto">We don't need to do much input parsing, let's just get everything into a list
with <a href="https://docs.python.org/3/library/io.html#io.IOBase.readlines" rel="nofollow"><code>.readlines()</code></a>. We could also wrap our main loop
inside a <code>with</code> statement as we did <a href="#day-9---rope-bridge">yesterday</a> and read the file one line
at a time if we want.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    program = fin.readlines()"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">program</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">readlines</span>()</pre></div>
<p dir="auto">Now we'll start a simple loop <code>for instr in program</code>, incrementing a cycles
counter at the start of each iteration. We'll skip the <code>noop</code> instructions
completely as they do nothing else, while for <code>addx</code> we'll need to increment the
counter a second time and perform the addition on the <code>X</code> register.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="total = 0
cycle = 1
x     = 1

for instr in program:
    cycle += 1

    if instr.startswith('addx'):
        # Check cycle and calculate product

        # Increment again and perform the operation
        cycle += 1
        x += int(instr[5:])

    # Check cycle and calculate product"><pre><span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-s1">cycle</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
<span class="pl-s1">x</span>     <span class="pl-c1">=</span> <span class="pl-c1">1</span>

<span class="pl-k">for</span> <span class="pl-s1">instr</span> <span class="pl-c1">in</span> <span class="pl-s1">program</span>:
    <span class="pl-s1">cycle</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>

    <span class="pl-k">if</span> <span class="pl-s1">instr</span>.<span class="pl-en">startswith</span>(<span class="pl-s">'addx'</span>):
        <span class="pl-c"># Check cycle and calculate product</span>

        <span class="pl-c"># Increment again and perform the operation</span>
        <span class="pl-s1">cycle</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
        <span class="pl-s1">x</span> <span class="pl-c1">+=</span> <span class="pl-en">int</span>(<span class="pl-s1">instr</span>[<span class="pl-c1">5</span>:])

    <span class="pl-c"># Check cycle and calculate product</span></pre></div>
<p dir="auto">In between each increment of the cycle counter, we need to check whether it is
one of the wanted values and perform the multiplication. The values we have are
all of the form <em>40n + 20</em> with <em>n â‰¥ 0</em>, so a simple modulus operation will
suffice:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for instr in program:
    cycle += 1

    if instr.startswith('addx'):
        if cycle % 40 == 20:
            total += cycle * x

        cycle += 1
        x     += int(instr[5:])

    if cycle % 40 == 20:
        total += cycle * x

print('Part 1:', total)"><pre><span class="pl-k">for</span> <span class="pl-s1">instr</span> <span class="pl-c1">in</span> <span class="pl-s1">program</span>:
    <span class="pl-s1">cycle</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>

    <span class="pl-k">if</span> <span class="pl-s1">instr</span>.<span class="pl-en">startswith</span>(<span class="pl-s">'addx'</span>):
        <span class="pl-k">if</span> <span class="pl-s1">cycle</span> <span class="pl-c1">%</span> <span class="pl-c1">40</span> <span class="pl-c1">==</span> <span class="pl-c1">20</span>:
            <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-s1">cycle</span> <span class="pl-c1">*</span> <span class="pl-s1">x</span>

        <span class="pl-s1">cycle</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
        <span class="pl-s1">x</span>     <span class="pl-c1">+=</span> <span class="pl-en">int</span>(<span class="pl-s1">instr</span>[<span class="pl-c1">5</span>:])

    <span class="pl-k">if</span> <span class="pl-s1">cycle</span> <span class="pl-c1">%</span> <span class="pl-c1">40</span> <span class="pl-c1">==</span> <span class="pl-c1">20</span>:
        <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-s1">cycle</span> <span class="pl-c1">*</span> <span class="pl-s1">x</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">total</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-9" class="anchor" aria-hidden="true" href="#part-2-9"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">We are now told that this weird VM has a <a href="https://en.wikipedia.org/wiki/Cathode-ray_tube" rel="nofollow">CRT monitor</a>, and that each
cycle a pixel is drawn. Each line on the monitor consists of 40 pixels, so a new
line of pixels begins every 40 pixels drawn. This means that the second line of
the monitor starts at the 41st pixel, the third line at the 81st, and so on.</p>
<p dir="auto">Whether the pixel drawn each cycle is lit or not depends on the value of the <code>X</code>
register, which indicates the position of the left side of a 3-pixel wide,
1-pixel tall sprite. Whenever the pixel currently being drawn falls within this
sprite, the pixel is lit.</p>
<p dir="auto">After emulating the display, a 40-by-6 image should appear, representing 8
capital letters: our part 2 answer. This seems fun, as we actually need to
"draw" these pixels in our terminal to see the answer.</p>
<p dir="auto">We'll implement part 2 within the same loop used for part 1. The only two
additional things we need to do <em>each cycle</em> are:</p>
<ol dir="auto">
<li>Check whether we need to advance to the next line. This again can be easily
done with a modulo operation since the beginning of each line will be at
<em>40n + 1</em> cycles (with <em>n â‰¥ 0</em>).</li>
<li>Check whether we need to draw a lit pixel or not. This means checking whether
the column of the current pixel to draw falls within the "sprite". A row is
40 pixels wide, so the column within the current row is simply the cycle
counter <em>modulo 40</em>, and the sprite position within the current row is
represented by the <code>X</code> register. This means that a lit pixel is drawn any
time the cycle counter <em>modulo 40</em> is within <code>X</code> and <code>X + 2</code> (extremes
included).</li>
</ol>
<p dir="auto">It really takes 10 times the amount of lines to explain it than to write it. To
emulate the CRT monitor we'll use a simple string, where each character is a
pixel. We'll use <code>'#'</code> to represent lit pixels, <code>' '</code> (a space) for dark
pixels and we'll add a newline (<code>'\n'</code>) each time a new row is needed.</p>
<p dir="auto">Here's the code to add to the main loop we already wrote:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="+crt = ''

 for instr in program:
+    if x &lt;= cycle % 40 &lt;= x + 2:
+        crt += '#'
+    else:
+        crt += ' '
+
     cycle += 1

     if instr.startswith('addx'):
         if cycle % 40 == 20:
             total += cycle * x
+        elif cycle % 40 == 1:
+            crt += '\n'
+
+        if x &lt;= cycle % 40 &lt;= x + 2:
+            crt += '#'
+        else:
+            crt += ' '

         cycle += 1
         x += int(instr[5:])

     if cycle % 40 == 20:
         total += cycle * x
+    elif cycle % 40 == 1:
+        crt += '\n'"><pre><span class="pl-mi1"><span class="pl-mi1">+</span>crt = ''</span>

 for instr in program:
<span class="pl-mi1"><span class="pl-mi1">+</span>    if x &lt;= cycle % 40 &lt;= x + 2:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        crt += '#'</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    else:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        crt += ' '</span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
     cycle += 1

     if instr.startswith('addx'):
         if cycle % 40 == 20:
             total += cycle * x
<span class="pl-mi1"><span class="pl-mi1">+</span>        elif cycle % 40 == 1:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>            crt += '\n'</span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        if x &lt;= cycle % 40 &lt;= x + 2:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>            crt += '#'</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        else:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>            crt += ' '</span>

         cycle += 1
         x += int(instr[5:])

     if cycle % 40 == 20:
         total += cycle * x
<span class="pl-mi1"><span class="pl-mi1">+</span>    elif cycle % 40 == 1:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        crt += '\n'</span></pre></div>
<p dir="auto">The <a href="https://docs.python.org/3/reference/expressions.html#comparisons" rel="nofollow">3-way comparison</a> <code>x &lt;= y &lt;= z</code> is equivalent to
<code>x &lt;= y and y &lt;= z</code>, but only evaluates <code>y</code> once, and only evaluates <code>z</code> if
<code>x &lt;= y</code> is not satisfied. This is a nice little feature that makes bound
checking in Python much cooler than in other languages.</p>
<p dir="auto">The addition of new pixels to the <code>crt</code> variable can also be done using a
<a href="https://docs.python.org/3/reference/expressions.html#conditional-expressions" rel="nofollow">tristate operator</a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="crt += '#' if x &lt;= cycle % 40 &lt;= x + 2 else ' '"><pre><span class="pl-s1">crt</span> <span class="pl-c1">+=</span> <span class="pl-s">'#'</span> <span class="pl-k">if</span> <span class="pl-s1">x</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">cycle</span> <span class="pl-c1">%</span> <span class="pl-c1">40</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-c1">2</span> <span class="pl-k">else</span> <span class="pl-s">' '</span></pre></div>
<p dir="auto">Now all that's left to do is print the solution. We'll tell
[<code>print()</code>][py-builtin-print] to add an extra newline between the prompt and the
answer using <code>sep='\n'</code> so that the contents of <code>crt</code> are printed nicely:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="print('Part 2:', crt, sep='\n')"><pre><span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">crt</span>, <span class="pl-s1">sep</span><span class="pl-c1">=</span><span class="pl-s">'<span class="pl-cce">\n</span>'</span>)</pre></div>
<p dir="auto">The output will look something like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Part 2:
###   ##   ##  #### #  # #    #  # ####
#  # #  # #  # #    # #  #    #  # #
###  #  # #    ###  ##   #    #### ###
#  # #### #    #    # #  #    #  # #
#  # #  # #  # #    # #  #    #  # #
###  #  #  ##  #### #  # #### #  # #"><pre lang="none" class="notranslate"><code>Part 2:
###   ##   ##  #### #  # #    #  # ####
#  # #  # #  # #    # #  #    #  # #
###  #  # #    ###  ##   #    #### ###
#  # #### #    #    # #  #    #  # #
#  # #  # #  # #    # #  #    #  # #
###  #  #  ##  #### #  # #### #  # #
</code></pre></div>
<p dir="auto">And here we go, 20/50 stars!</p>
<h2 dir="auto"><a id="user-content-day-11---monkey-in-the-middle" class="anchor" aria-hidden="true" href="#day-11---monkey-in-the-middle"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 11 - Monkey in the Middle</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/11" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day11.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-10" class="anchor" aria-hidden="true" href="#part-1-10"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Today's problem is more of a reading comprehension challenge than a real
problem, at least for part 1. We need to simulate some sort of game happening
between a number of monkeys. Each monkey has some specific attributes that are
listed in our input:</p>
<ul dir="auto">
<li>A <em>list of items</em> (positive integers) it currently holds.</li>
<li>An <em>operation</em> to perform when inspecting an item: this is either an addition
or a multiplication, of which the first operand is always the item value.</li>
<li>The <em>second operand</em> of the operation: either a fixed integer or the item
value again.</li>
<li>A <em>divisor</em> to check the item value against after inspecting it and performing
the operation on it: if the calculated value is divisible by this number, the
item is passed to a given monkey, otherwise to another.</li>
<li>Two <em>indices</em> of the monkeys to pass items to, as explained in the previous
point.</li>
</ul>
<p dir="auto">The game to simulate happens in rounds, and each round every monkey plays one
turn, consisting of the following operations:</p>
<ol dir="auto">
<li>
<p dir="auto">Inspect the first item in the list of items, applying the operation to its
value.</p>
</li>
<li>
<p dir="auto">Divide the result by 3.</p>
</li>
<li>
<p dir="auto">Check whether the obtained value is divisible by the divisor.</p>
<ul dir="auto">
<li>If so, pass the item (with the new value) to a given monkey (the index of
the monkey to pass to is a property of the monkey itself).</li>
<li>Otherwise, pass it to another given monkey.</li>
</ul>
</li>
</ol>
<p dir="auto">After simulating 20 rounds, we need to find the two monkeys who inspected the
most items and calculate the product of the total number of inspections they
performed.</p>
<p dir="auto">Since we are dealing with complex objects with different properties to remember,
let's write a class to represent a single monkey. This class will hold all the
properties defined above. We don't really need to pass a code review, so we'll
assign all attributes after creating the class. For now, let's just define its
attributes with a <a href="https://docs.python.oattrgetterrg/3/reference/datamodel.html#slots" rel="nofollow"><code>__slots__</code></a> class variable. This allows for
faster attribute lookup and less memory usage, but the class will only be able
to hold the properties defined in <code>__slots__</code> (which is fine by us).</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Monkey:
    __slots__ = (
        'items', 'op', 'op_value', 'divisor',
        'pass_if_true', 'pass_if_false', 'inspections'
    )"><pre><span class="pl-k">class</span> <span class="pl-v">Monkey</span>:
    <span class="pl-s1">__slots__</span> <span class="pl-c1">=</span> (
        <span class="pl-s">'items'</span>, <span class="pl-s">'op'</span>, <span class="pl-s">'op_value'</span>, <span class="pl-s">'divisor'</span>,
        <span class="pl-s">'pass_if_true'</span>, <span class="pl-s">'pass_if_false'</span>, <span class="pl-s">'inspections'</span>
    )</pre></div>
<p dir="auto">Now, for the input parsing... this is going to be painful. Here's the
description of a single monkey in our input:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Monkey 0:
  Starting items: 98, 97, 98, 55, 56, 72
  Operation: new = old * 13
  Test: divisible by 11
    If true: throw to monkey 4
    If false: throw to monkey 7"><pre lang="none" class="notranslate"><code>Monkey 0:
  Starting items: 98, 97, 98, 55, 56, 72
  Operation: new = old * 13
  Test: divisible by 11
    If true: throw to monkey 4
    If false: throw to monkey 7
</code></pre></div>
<p dir="auto">All monkey descriptions are divided by an empty line, so we can initially
<a href="https://docs.python.org/3/library/io.html#io.BufferedIOBase.read" rel="nofollow"><code>.read()</code></a> the whole input file and <a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow"><code>.split()</code></a>
the resulting string on empty lines to obtain a list of "raw" monkey
description strings:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    raw_monkeys = fin.read().split('\n\n')"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">raw_monkeys</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">split</span>(<span class="pl-s">'<span class="pl-cce">\n</span><span class="pl-cce">\n</span>'</span>)</pre></div>
<p dir="auto">Now we can iterate over the strings in <code>raw_monkeys</code>, split them into single
lines through <a href="https://docs.python.org/3/library/stdtypes.html#str.splitlines" rel="nofollow"><code>.splitlines()</code></a>, and parse the properties on
each line. Since every line contains different text, a
<a href="https://www.regular-expressions.info/" rel="nofollow">regular expression</a> to extract integers on each line is probably
the simplest way to go. We can create one with the <code>re</code> module, and then use its
<a href="https://docs.python.org/3/library/re.html#re.Pattern.findall" rel="nofollow"><code>.findall()</code></a> method to extract a list of matches from a
string.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import re
regexp = re.compile(r'\d+') # r is for &quot;raw string&quot;

&gt;&gt;&gt; regexp.findall(&quot;Hello 123 World 456, today is December 11th, 2022&quot;)
['123', '456', '11', '2022']"><pre><span class="pl-k">import</span> <span class="pl-s1">re</span>
<span class="pl-s1">regexp</span> <span class="pl-c1">=</span> <span class="pl-s1">re</span>.<span class="pl-en">compile</span>(<span class="pl-s">r'\d+'</span>) <span class="pl-c"># r is for "raw string"</span>

<span class="pl-c1">&gt;&gt;</span><span class="pl-c1">&gt;</span> <span class="pl-s1">regexp</span>.<span class="pl-en">findall</span>(<span class="pl-s">"Hello 123 World 456, today is December 11th, 2022"</span>)
[<span class="pl-s">'123'</span>, <span class="pl-s">'456'</span>, <span class="pl-s">'11'</span>, <span class="pl-s">'2022'</span>]</pre></div>
<p dir="auto">The item list contains one or more integers, so we can keep the matches as a
list and transform them to <code>int</code> with <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a>. Since we will
be removing/adding items to/from this list a lot, a
<a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow"><code>deque</code></a> from the <a href="https://docs.python.org/3/library/collections.html" rel="nofollow"><code>collections</code></a> module
is a better choice than <code>list</code>, as it provides fast insertion and deletion from
either of its ends (while <code>list</code> does not).</p>
<p dir="auto">Other lines contain only one integer, so we can simply do <code>[0]</code> on the obtained
list of matches. The operation to perform (e.g. <code>new = old * 13</code>) can be either
an addition or a multiplication. We can import those two as functions from the
<a href="https://docs.python.org/3/library/operator.html#" rel="nofollow"><code>operator</code></a> module: <code>operator.add()</code> and <code>operator.mul()</code>.</p>
<p dir="auto">The only "annoying" line is the third, which can either contain an integer (e.g.
<code>Operation: new = old * 13</code>) or not (e.g. <code>Operation: new = old + old</code>): for
this, we'll have to first check if we have any match, and if not, it means the
operation uses <code>old</code> as operand on both sides.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from collections import deque
from operator import add, mul

monkeys = []

for raw_monkey in raw_monkeys:
    lines   = raw_monkey.splitlines()
    matches = regexp.findall(lines[2])

    m = Monkey()
    m.items         = deque(map(int, regexp.findall(lines[1])))
    m.op            = add if '+' in lines[2] else mul
    m.op_value      = int(matches[0]) if matches else None
    m.divisor       = int(regexp.findall(lines[3])[0])
    m.pass_if_true  = int(regexp.findall(lines[4])[0])
    m.pass_if_false = int(regexp.findall(lines[5])[0])
    m.inspections   = 0
    monkeys.append(m)"><pre><span class="pl-k">from</span> <span class="pl-s1">collections</span> <span class="pl-k">import</span> <span class="pl-s1">deque</span>
<span class="pl-k">from</span> <span class="pl-s1">operator</span> <span class="pl-k">import</span> <span class="pl-s1">add</span>, <span class="pl-s1">mul</span>

<span class="pl-s1">monkeys</span> <span class="pl-c1">=</span> []

<span class="pl-k">for</span> <span class="pl-s1">raw_monkey</span> <span class="pl-c1">in</span> <span class="pl-s1">raw_monkeys</span>:
    <span class="pl-s1">lines</span>   <span class="pl-c1">=</span> <span class="pl-s1">raw_monkey</span>.<span class="pl-en">splitlines</span>()
    <span class="pl-s1">matches</span> <span class="pl-c1">=</span> <span class="pl-s1">regexp</span>.<span class="pl-en">findall</span>(<span class="pl-s1">lines</span>[<span class="pl-c1">2</span>])

    <span class="pl-s1">m</span> <span class="pl-c1">=</span> <span class="pl-v">Monkey</span>()
    <span class="pl-s1">m</span>.<span class="pl-s1">items</span>         <span class="pl-c1">=</span> <span class="pl-en">deque</span>(<span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">regexp</span>.<span class="pl-en">findall</span>(<span class="pl-s1">lines</span>[<span class="pl-c1">1</span>])))
    <span class="pl-s1">m</span>.<span class="pl-s1">op</span>            <span class="pl-c1">=</span> <span class="pl-s1">add</span> <span class="pl-k">if</span> <span class="pl-s">'+'</span> <span class="pl-c1">in</span> <span class="pl-s1">lines</span>[<span class="pl-c1">2</span>] <span class="pl-k">else</span> <span class="pl-s1">mul</span>
    <span class="pl-s1">m</span>.<span class="pl-s1">op_value</span>      <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">matches</span>[<span class="pl-c1">0</span>]) <span class="pl-k">if</span> <span class="pl-s1">matches</span> <span class="pl-k">else</span> <span class="pl-c1">None</span>
    <span class="pl-s1">m</span>.<span class="pl-s1">divisor</span>       <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">regexp</span>.<span class="pl-en">findall</span>(<span class="pl-s1">lines</span>[<span class="pl-c1">3</span>])[<span class="pl-c1">0</span>])
    <span class="pl-s1">m</span>.<span class="pl-s1">pass_if_true</span>  <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">regexp</span>.<span class="pl-en">findall</span>(<span class="pl-s1">lines</span>[<span class="pl-c1">4</span>])[<span class="pl-c1">0</span>])
    <span class="pl-s1">m</span>.<span class="pl-s1">pass_if_false</span> <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">regexp</span>.<span class="pl-en">findall</span>(<span class="pl-s1">lines</span>[<span class="pl-c1">5</span>])[<span class="pl-c1">0</span>])
    <span class="pl-s1">m</span>.<span class="pl-s1">inspections</span>   <span class="pl-c1">=</span> <span class="pl-c1">0</span>
    <span class="pl-s1">monkeys</span>.<span class="pl-en">append</span>(<span class="pl-s1">m</span>)</pre></div>
<p dir="auto">As promised, we initialized all attributes of each instance of <code>Monkey</code> from
outside the class. You would normally do this by passing all the values to the
class constructor (i.e. its <a href="https://docs.python.org/3/reference/datamodel.html#object.__init__" rel="nofollow"><code>__init__()</code></a> method), but there
are a lot of them and I did not want to write a function taking so many
parameters.</p>
<p dir="auto">Now that we have a list of objects to work with, let's actually simulate the
game. To make things simpler, let's implement the basic "inspection" operation
that a monkey performs as a method of the <code>Monkey</code> class:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Monkey:
    # ... unchanged ...

    def inspect(self):
        # Remove the first item from the items we have (we'll pass it on to
        # another monkey anyway)
        item = self.items.popleft()

        if self.op_value is None:
            # Operation to perform is `old + old` or `old * old`
            return self.op(item, item)

        # Operation to perform is `old + VALUE` or `old * VALUE`
        return self.op(item, self.op_value)"><pre><span class="pl-k">class</span> <span class="pl-v">Monkey</span>:
    <span class="pl-c"># ... unchanged ...</span>

    <span class="pl-k">def</span> <span class="pl-en">inspect</span>(<span class="pl-s1">self</span>):
        <span class="pl-c"># Remove the first item from the items we have (we'll pass it on to</span>
        <span class="pl-c"># another monkey anyway)</span>
        <span class="pl-s1">item</span> <span class="pl-c1">=</span> <span class="pl-s1">self</span>.<span class="pl-s1">items</span>.<span class="pl-en">popleft</span>()

        <span class="pl-k">if</span> <span class="pl-s1">self</span>.<span class="pl-s1">op_value</span> <span class="pl-c1">is</span> <span class="pl-c1">None</span>:
            <span class="pl-c"># Operation to perform is `old + old` or `old * old`</span>
            <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-en">op</span>(<span class="pl-s1">item</span>, <span class="pl-s1">item</span>)

        <span class="pl-c"># Operation to perform is `old + VALUE` or `old * VALUE`</span>
        <span class="pl-k">return</span> <span class="pl-s1">self</span>.<span class="pl-en">op</span>(<span class="pl-s1">item</span>, <span class="pl-s1">self</span>.<span class="pl-s1">op_value</span>)</pre></div>
<p dir="auto">The rules of each round, as explained in the numbered list a few paragraphs
above, are pretty straightforward. Let's write a function to play a given number
of rounds in a row and return the answer we want.</p>
<p dir="auto">After simulating all the requested rounds, we can extract the <code>.inspections</code>
attribute of each monkey class using <code>map()</code> plus a <a href="https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions" rel="nofollow"><code>lambda</code></a>, or
better <code>map()</code> plus <a href="https://docs.python.org/3/library/operator.html#operator.attrgetter" rel="nofollow"><code>attrgetter()</code></a>. Then, the top two
values can be extracted after sorting in descending order with
<a href="https://docs.python.org/3/library/functions.html#sorted" rel="nofollow"><code>sorted()</code></a> (not a good idea in general if we only need the
top two, but we have a very small list, so it's fine).</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from operator import attrgetter

def simulate(monkeys, n_rounds):
    for _ in range(n_rounds):
        for m in monkeys:
            # This monkey will inspect all of its items in this round
            m.inspections += len(m.items)

            while m.items:
                # Pop the first item and apply the needed operation to it, then
                # divide by 3
                item = m.inspect() // 3

                # Check if the new value is divisible by m.divisor and pass it
                # on to the correct monkey by appending it to its items
                if item % m.divisor == 0:
                    monkeys[m.pass_if_true].items.append(item)
                else:
                    monkeys[m.pass_if_false].items.append(item)

    # Get the two highest total number of inspected items
    a, b = sorted(map(attrgetter('inspections'), monkeys), reverse=True)[:2]
    return a * b"><pre><span class="pl-k">from</span> <span class="pl-s1">operator</span> <span class="pl-k">import</span> <span class="pl-s1">attrgetter</span>

<span class="pl-k">def</span> <span class="pl-en">simulate</span>(<span class="pl-s1">monkeys</span>, <span class="pl-s1">n_rounds</span>):
    <span class="pl-k">for</span> <span class="pl-s1">_</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">n_rounds</span>):
        <span class="pl-k">for</span> <span class="pl-s1">m</span> <span class="pl-c1">in</span> <span class="pl-s1">monkeys</span>:
            <span class="pl-c"># This monkey will inspect all of its items in this round</span>
            <span class="pl-s1">m</span>.<span class="pl-s1">inspections</span> <span class="pl-c1">+=</span> <span class="pl-en">len</span>(<span class="pl-s1">m</span>.<span class="pl-s1">items</span>)

            <span class="pl-k">while</span> <span class="pl-s1">m</span>.<span class="pl-s1">items</span>:
                <span class="pl-c"># Pop the first item and apply the needed operation to it, then</span>
                <span class="pl-c"># divide by 3</span>
                <span class="pl-s1">item</span> <span class="pl-c1">=</span> <span class="pl-s1">m</span>.<span class="pl-en">inspect</span>() <span class="pl-c1">//</span> <span class="pl-c1">3</span>

                <span class="pl-c"># Check if the new value is divisible by m.divisor and pass it</span>
                <span class="pl-c"># on to the correct monkey by appending it to its items</span>
                <span class="pl-k">if</span> <span class="pl-s1">item</span> <span class="pl-c1">%</span> <span class="pl-s1">m</span>.<span class="pl-s1">divisor</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
                    <span class="pl-s1">monkeys</span>[<span class="pl-s1">m</span>.<span class="pl-s1">pass_if_true</span>].<span class="pl-s1">items</span>.<span class="pl-en">append</span>(<span class="pl-s1">item</span>)
                <span class="pl-k">else</span>:
                    <span class="pl-s1">monkeys</span>[<span class="pl-s1">m</span>.<span class="pl-s1">pass_if_false</span>].<span class="pl-s1">items</span>.<span class="pl-en">append</span>(<span class="pl-s1">item</span>)

    <span class="pl-c"># Get the two highest total number of inspected items</span>
    <span class="pl-s1">a</span>, <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-en">sorted</span>(<span class="pl-en">map</span>(<span class="pl-en">attrgetter</span>(<span class="pl-s">'inspections'</span>), <span class="pl-s1">monkeys</span>), <span class="pl-s1">reverse</span><span class="pl-c1">=</span><span class="pl-c1">True</span>)[:<span class="pl-c1">2</span>]
    <span class="pl-k">return</span> <span class="pl-s1">a</span> <span class="pl-c1">*</span> <span class="pl-s1">b</span></pre></div>
<p dir="auto">All that's left to do is call the function we just wrote:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = simulate(monkeys, 20)
print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">simulate</span>(<span class="pl-s1">monkeys</span>, <span class="pl-c1">20</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-10" class="anchor" aria-hidden="true" href="#part-2-10"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">We need to do the same thing we did for part 1, but the rules change slightly:
we no longer need to perform the division by 3 after a monkey "inspects" an
item, and we need to simulate 10000 (ten thousand) rounds. This is interesting.</p>
<p dir="auto">The first requirement is not a problem, we can just remove the <code>// 3</code> from the
code of our <code>simulate()</code> function. The second requirement is a bit of a pain
though. We are dealing with additions and multiplications, this means that the
value of an item can only ever increase, and doing <em>10000</em> rounds means doing <em>a
lot</em> of additions and multiplications... we will never be able to work with such
large numbers, at least not in a reasonably fast way.</p>
<p dir="auto">Apart from the multiplication and addition done by each monkey when "inspecting"
an item, the only other operation we perform is a divisibility check (<code>item % m.divisor == 0</code>). In other words, at the end of the day, the only thing that
matters about a given item value, is whether it can be divided by the divisor of
any given monkey. This is what "drives" the game in different directions since
it's used to choose the next monkey to pass an item to. We need a way to keep a
value small enough to be able to work with it, while still being able to check
whether it is divisible by a given set of integers (the divisors of each
monkey).</p>
<p dir="auto">How do we do this? With a bit of modular arithmetic:</p>
<ul dir="auto">
<li>
<p dir="auto">Clearly, if there only was <em>one</em> monkey, instead of <code>item</code> we could keep the
much smaller <code>item % m.divisor</code> around. After all, we don't care about the
real value, only about its divisibility by <code>m.divisor</code>. The divisibility would
then be preserved since <a href="https://en.wikipedia.org/wiki/Congruence_relation" rel="nofollow"><em>congruence</em></a> to a fixed modulus is
preserved by addition and multiplication, which are the only two operations we
perform. In other words, <code>(x + a) % d == ((x % d) + (a % d)) % d</code>, or in
mathematical terms <em>a + b â‰¡ (a mod d) + (b mod d)  (mod d)</em>.</p>
</li>
<li>
<p dir="auto">In the case of <em>two</em> monkeys with divisors <code>d</code> and <code>q</code>, in order to preserve
the divisibility by both, we only need to keep <code>item % (d * q)</code> around. This
is somewhat intuitive since a number divisible by <code>d * q</code> will also always be
divisible by both <code>d</code> and <code>q</code> separately. We have <code>(x % (d*q)) % d == x % d</code>
for any value of <code>q</code>, or in mathematical terms:
<em>x mod dq â‰¡ a (mod d) â‡” x â‰¡ a (mod d)</em> for any positve integer <em>q</em>.</p>
</li>
<li>
<p dir="auto">In the general case of multiple different divisors, we only need to keep item
values <em>modulo the product of all the divisors</em>. This product is small enough
and is also pre-computable and fixed through the entire simulation (since
divisors are fixed). To be precise, we actually only need the
<a href="https://en.wikipedia.org/wiki/Least_common_multiple" rel="nofollow">least common multiple</a> of the divisors.</p>
</li>
</ul>
<p dir="auto">Knowing all of the above, we can get our part 2 solution almost for free with
only a couple of modifications to our <code>simulate()</code> function:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="-def simulate(monkeys, n_rounds):
+def simulate(monkeys, n_rounds, part2=False):
+    if part2:
+        modulus = lcm(*map(attrgetter('divisor'), monkeys))
+
     for _ in range(n_rounds):
         for m in monkeys:
             m.inspections += len(m.items)

             while m.items:
-                item = m.inspect() // 3
+                if part2:
+                    item = m.inspect() % modulus
+                else:
+                    item = m.inspect() // 3

                 if item % m.divisor == 0:
                     monkeys[m.pass_if_true].items.append(item)
                 else:
                     monkeys[m.pass_if_false].items.append(item)

     a, b = sorted(map(attrgetter('inspections'), monkeys), reverse=True)[:2]
     return a * b"><pre><span class="pl-md"><span class="pl-md">-</span>def simulate(monkeys, n_rounds):</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>def simulate(monkeys, n_rounds, part2=False):</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    if part2:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        modulus = lcm(*map(attrgetter('divisor'), monkeys))</span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
     for _ in range(n_rounds):
         for m in monkeys:
             m.inspections += len(m.items)

             while m.items:
<span class="pl-md"><span class="pl-md">-</span>                item = m.inspect() // 3</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>                if part2:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>                    item = m.inspect() % modulus</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>                else:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>                    item = m.inspect() // 3</span>

                 if item % m.divisor == 0:
                     monkeys[m.pass_if_true].items.append(item)
                 else:
                     monkeys[m.pass_if_false].items.append(item)

     a, b = sorted(map(attrgetter('inspections'), monkeys), reverse=True)[:2]
     return a * b</pre></div>
<p dir="auto">The <a href="https://docs.python.org/3/library/math.html#math.lcm" rel="nofollow"><code>lcm()</code></a> function (used above to compute the least common
multiple of all the <code>.divisor</code>s) is available in the <code>math</code> module from Python 3.9
onwards. If we are on a lower Python version, we can implement it ourselves
using <a href="https://docs.python.org/3/library/math.html#math.gcd" rel="nofollow"><code>gcd()</code></a>, available in the <code>math</code> module from Python 3.5
onwards.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Python &gt;= 3.5: from math import gcd
def gcd(a, b):
    while b:
        a, b = b, a % b
    return a

# Python &gt;= 3.9: from math import lcm
def lcm(*integers):
    it  = iter(integers)
    res = next(it)

    for x in it:
        res = res * x // gcd(res, x)
    return res"><pre><span class="pl-c"># Python &gt;= 3.5: from math import gcd</span>
<span class="pl-k">def</span> <span class="pl-en">gcd</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
    <span class="pl-k">while</span> <span class="pl-s1">b</span>:
        <span class="pl-s1">a</span>, <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-s1">b</span>, <span class="pl-s1">a</span> <span class="pl-c1">%</span> <span class="pl-s1">b</span>
    <span class="pl-k">return</span> <span class="pl-s1">a</span>

<span class="pl-c"># Python &gt;= 3.9: from math import lcm</span>
<span class="pl-k">def</span> <span class="pl-en">lcm</span>(<span class="pl-c1">*</span><span class="pl-s1">integers</span>):
    <span class="pl-s1">it</span>  <span class="pl-c1">=</span> <span class="pl-en">iter</span>(<span class="pl-s1">integers</span>)
    <span class="pl-s1">res</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">it</span>)

    <span class="pl-k">for</span> <span class="pl-s1">x</span> <span class="pl-c1">in</span> <span class="pl-s1">it</span>:
        <span class="pl-s1">res</span> <span class="pl-c1">=</span> <span class="pl-s1">res</span> <span class="pl-c1">*</span> <span class="pl-s1">x</span> <span class="pl-c1">//</span> <span class="pl-en">gcd</span>(<span class="pl-s1">res</span>, <span class="pl-s1">x</span>)
    <span class="pl-k">return</span> <span class="pl-s1">res</span></pre></div>
<p dir="auto">One last thing before computing the answer: since we are modifying the <code>.items</code>
of each monkey while simulating, we need to keep a copy of the original values
in order to perform the simulation again. We can do this with
<a href="https://docs.python.org/3/library/copy.html#copy.deepcopy" rel="nofollow"><code>copy.deepcopy()</code></a>.</p>
<p dir="auto">We finally have a complete solution:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from copy import deepcopy

original = deepcopy(monkeys)

answer1 = simulate(monkeys, 20)
print('Part 1:', answer1)

answer2 = simulate(original, 10000, True)
print('Part 2:', answer2)"><pre><span class="pl-k">from</span> <span class="pl-s1">copy</span> <span class="pl-k">import</span> <span class="pl-s1">deepcopy</span>

<span class="pl-s1">original</span> <span class="pl-c1">=</span> <span class="pl-en">deepcopy</span>(<span class="pl-s1">monkeys</span>)

<span class="pl-s1">answer1</span> <span class="pl-c1">=</span> <span class="pl-en">simulate</span>(<span class="pl-s1">monkeys</span>, <span class="pl-c1">20</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer1</span>)

<span class="pl-s1">answer2</span> <span class="pl-c1">=</span> <span class="pl-en">simulate</span>(<span class="pl-s1">original</span>, <span class="pl-c1">10000</span>, <span class="pl-c1">True</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">answer2</span>)</pre></div>
<p dir="auto">Smooth!</p>
<h2 dir="auto"><a id="user-content-day-12---hill-climbing-algorithm" class="anchor" aria-hidden="true" href="#day-12---hill-climbing-algorithm"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 12 - Hill Climbing Algorithm</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/12" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day12.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-11" class="anchor" aria-hidden="true" href="#part-1-11"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Pathfinding on a grid! I was missing that on my <a href="https://www.reddit.com/r/adventofcode/comments/k3q7tr/" rel="nofollow">AoC bingo</a> card
this year :'). We are given a grid of letters ranging from <code>a</code> to <code>z</code>. The grid
represents a <a href="https://en.wikipedia.org/wiki/Topographic_map" rel="nofollow">topographic map</a>, and each letter is a
different level of elevation: <code>a</code> is lower than <code>b</code>, which is lower than <code>c</code>,
and so on until <code>z</code>. This grid also contains two uppercase letters, <code>S</code> and <code>E</code>,
which are respectively the start cell and the destination to reach. The start is
at elevation <code>a</code>, and the destination is at elevation <code>z</code>.</p>
<p dir="auto">We need to find the minimum number of steps in the four cardinal directions that
are needed to reach the destination from the start, with the constraint that we
can only move to cells that have an elevation not higher than the current
elevation plus one.</p>
<p dir="auto">If you've ever done any problem similar to this, you already know that the
answer to "what's the minimum distance from A to B on a grid" is always
<a href="https://en.wikipedia.org/wiki/Breadth-first_search" rel="nofollow">breadth-first search</a> (BFS) as the steps to perform are unitary. All
we need to do is parse the input grid and create and perform an adequate BFS on
the grid, taking into account the rules to move from one cell to another.</p>
<p dir="auto">Let's start with the BFS implementation right off the bat. We'll be working with
coordinates of the form <code>(row, column)</code>. Given a cell's coordinates, we need to
explore all the reachable cells using BFS, avoiding neighboring cells that are
too high in elevation, and stopping whenever we reach the coordinates of the
destination. Here's a commented function that implements BFS, using a
<a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow"><code>deque</code></a> as queue and <code>math.inf</code> to
indicate that no solution is found:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from collections import deque
from math import inf as INFINITY

def bfs(grid, src, dst):
    h, w    = len(grid), len(grid[0]) # pre-calculate height and width for simplicity
    queue   = deque([(0, src)])       # queue of tuples (distance_from_src, coords)
    visited = set()

    # While there are coordinates to visit
    while queue:
        # Get the first one in the queue
        distance, rc = queue.popleft()
        # If we reached the desination, return the distance traveled so far
        if rc == dst:
            return distance

        # Skip already vsited coordinates
        if rc not in visited:
            visited.add(rc)

            # For each neighboring cell that wasn't already visited
            for n in get_neighbors(grid, r, c, h, w):
                if n in visited:
                    continue

                # Add it to the back of the queue with a distance equal to the
                # current one plus 1
                queue.append((distance + 1, n))

    return INFINITY"><pre><span class="pl-k">from</span> <span class="pl-s1">collections</span> <span class="pl-k">import</span> <span class="pl-s1">deque</span>
<span class="pl-k">from</span> <span class="pl-s1">math</span> <span class="pl-k">import</span> <span class="pl-s1">inf</span> <span class="pl-k">as</span> <span class="pl-v">INFINITY</span>

<span class="pl-k">def</span> <span class="pl-en">bfs</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">src</span>, <span class="pl-s1">dst</span>):
    <span class="pl-s1">h</span>, <span class="pl-s1">w</span>    <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">grid</span>), <span class="pl-en">len</span>(<span class="pl-s1">grid</span>[<span class="pl-c1">0</span>]) <span class="pl-c"># pre-calculate height and width for simplicity</span>
    <span class="pl-s1">queue</span>   <span class="pl-c1">=</span> <span class="pl-en">deque</span>([(<span class="pl-c1">0</span>, <span class="pl-s1">src</span>)])       <span class="pl-c"># queue of tuples (distance_from_src, coords)</span>
    <span class="pl-s1">visited</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>()

    <span class="pl-c"># While there are coordinates to visit</span>
    <span class="pl-k">while</span> <span class="pl-s1">queue</span>:
        <span class="pl-c"># Get the first one in the queue</span>
        <span class="pl-s1">distance</span>, <span class="pl-s1">rc</span> <span class="pl-c1">=</span> <span class="pl-s1">queue</span>.<span class="pl-en">popleft</span>()
        <span class="pl-c"># If we reached the desination, return the distance traveled so far</span>
        <span class="pl-k">if</span> <span class="pl-s1">rc</span> <span class="pl-c1">==</span> <span class="pl-s1">dst</span>:
            <span class="pl-k">return</span> <span class="pl-s1">distance</span>

        <span class="pl-c"># Skip already vsited coordinates</span>
        <span class="pl-k">if</span> <span class="pl-s1">rc</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">visited</span>:
            <span class="pl-s1">visited</span>.<span class="pl-en">add</span>(<span class="pl-s1">rc</span>)

            <span class="pl-c"># For each neighboring cell that wasn't already visited</span>
            <span class="pl-k">for</span> <span class="pl-s1">n</span> <span class="pl-c1">in</span> <span class="pl-en">get_neighbors</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>):
                <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">in</span> <span class="pl-s1">visited</span>:
                    <span class="pl-k">continue</span>

                <span class="pl-c"># Add it to the back of the queue with a distance equal to the</span>
                <span class="pl-c"># current one plus 1</span>
                <span class="pl-s1">queue</span>.<span class="pl-en">append</span>((<span class="pl-s1">distance</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">n</span>))

    <span class="pl-k">return</span> <span class="pl-v">INFINITY</span></pre></div>
<p dir="auto">So far, this is just plain and simple BFS. The <code>get_neighbors()</code> used above will
contain the actual logic to solve the problem, let's write it as a
<a href="https://docs.python.org/3/howto/functional.html#generators" rel="nofollow">generator</a> function that will <code>yield</code> all the coordinates of
reachable neighboring cells according to the elevation rules. We will assume to
be working with a <code>grid</code> where each cell contains integers representing
elevation values. Given a position <code>(r, c)</code>, the maximum elevation reachable
will therefore <code>grid[r][c] + 1</code>, and the neighboring cells in the 4 cardinal
directions will be at <code>(r+1, c)</code>, <code>(r-1, c)</code>, <code>(r, c+1)</code> and <code>(r, c-1)</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def get_neighbors(grid, r, c, h, w): # get h, w as parameters for simplicity
    max_el = grid[r][c] + 1

    for nr, nc in ((r + 1, c), (r - 1, c), (r, c + 1), (r, c - 1)):
        if 0 &lt;= nr &lt; h and 0 &lt;= nc &lt; w: # ensure we are within the grid
            if grid[nr][nc] &lt;= max_el:  # ensure this neighbor is reachable
                yield nr, nc"><pre><span class="pl-k">def</span> <span class="pl-en">get_neighbors</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>): <span class="pl-c"># get h, w as parameters for simplicity</span>
    <span class="pl-s1">max_el</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">+</span> <span class="pl-c1">1</span>

    <span class="pl-k">for</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span> <span class="pl-c1">in</span> ((<span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">c</span>), (<span class="pl-s1">r</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">c</span>), (<span class="pl-s1">r</span>, <span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>), (<span class="pl-s1">r</span>, <span class="pl-s1">c</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>)):
        <span class="pl-k">if</span> <span class="pl-c1">0</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">nr</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">h</span> <span class="pl-c1">and</span> <span class="pl-c1">0</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">nc</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">w</span>: <span class="pl-c"># ensure we are within the grid</span>
            <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">nr</span>][<span class="pl-s1">nc</span>] <span class="pl-c1">&lt;=</span> <span class="pl-s1">max_el</span>:  <span class="pl-c"># ensure this neighbor is reachable</span>
                <span class="pl-k">yield</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span></pre></div>
<p dir="auto">We are almost done. Let's parse the input now: since we are working with ASCII
characters, we can do what we did for <a href="#part-1-7">day 8 part 1</a> and open the input
file in binary mode (<code>'rb'</code>) to get a free conversion from characters to
elevation values. The lines can be extracted as <code>bytes</code> with
<a href="https://docs.python.org/3/library/stdtypes.html#bytes.splitlines" rel="nofollow"><code>.splitlines()</code></a> after reading the whole file, and we can
then transform each line into a list of <code>int</code> with <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a>
(pretty easy since iterating over <code>bytes</code> already yields <code>int</code>s).</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(..., 'rb') as fin:
    lines = fin.read().splitlines()
    grid = list(map(list, lines))"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(..., <span class="pl-s">'rb'</span>) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">lines</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">splitlines</span>()
    <span class="pl-s1">grid</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-en">map</span>(<span class="pl-s1">list</span>, <span class="pl-s1">lines</span>))</pre></div>
<p dir="auto">A couple of constants to represent the source, the destination and the
highest/lowest elevations will help us make the code more human readable:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# These will all be ints since iterating bytes yields ints
START, END, LOWEST, HIGHEST = b'SEaz'"><pre><span class="pl-c"># These will all be ints since iterating bytes yields ints</span>
<span class="pl-v">START</span>, <span class="pl-v">END</span>, <span class="pl-v">LOWEST</span>, <span class="pl-v">HIGHEST</span> <span class="pl-c1">=</span> <span class="pl-s">b'SEaz'</span></pre></div>
<p dir="auto">Now we need to find the source and destination coordinates. A simple scan of the
grid with a double <code>for</code> loop gets the job done, and I will also throw a couple
of <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow"><code>enumerate()</code></a> in there for ease. Since our
<code>get_neighbors()</code> function looks at grid cells assuming they all represent
elevation values, after finding the source and the destination, we will edit the
grid replacing their value with the actual elevation.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="src = dst = None

for r, row in enumerate(grid):
    for c, cell in enumerate(row):
        if cell == START:
            src = r, c
            grid[r][c] = LOWEST
        elif cell == END:
            dst = r, c
            grid[r][c] = HIGHEST

    if src and dst:
        break"><pre><span class="pl-s1">src</span> <span class="pl-c1">=</span> <span class="pl-s1">dst</span> <span class="pl-c1">=</span> <span class="pl-c1">None</span>

<span class="pl-k">for</span> <span class="pl-s1">r</span>, <span class="pl-s1">row</span> <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">grid</span>):
    <span class="pl-k">for</span> <span class="pl-s1">c</span>, <span class="pl-s1">cell</span> <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">row</span>):
        <span class="pl-k">if</span> <span class="pl-s1">cell</span> <span class="pl-c1">==</span> <span class="pl-v">START</span>:
            <span class="pl-s1">src</span> <span class="pl-c1">=</span> <span class="pl-s1">r</span>, <span class="pl-s1">c</span>
            <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">=</span> <span class="pl-v">LOWEST</span>
        <span class="pl-k">elif</span> <span class="pl-s1">cell</span> <span class="pl-c1">==</span> <span class="pl-v">END</span>:
            <span class="pl-s1">dst</span> <span class="pl-c1">=</span> <span class="pl-s1">r</span>, <span class="pl-s1">c</span>
            <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">=</span> <span class="pl-v">HIGHEST</span>

    <span class="pl-k">if</span> <span class="pl-s1">src</span> <span class="pl-c1">and</span> <span class="pl-s1">dst</span>:
        <span class="pl-k">break</span></pre></div>
<p dir="auto">Perfect, we've got all we need. The answer is one <code>bfs()</code> call away:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="min_dist = bfs(grid, src, dst)
print('Part 1:', min_dist)"><pre><span class="pl-s1">min_dist</span> <span class="pl-c1">=</span> <span class="pl-en">bfs</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">src</span>, <span class="pl-s1">dst</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">min_dist</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-11" class="anchor" aria-hidden="true" href="#part-2-11"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">For part 2, we are told that all cells at elevation <code>a</code> are valid starting
points: we need to find the minimum possible distance to travel to get to the
destination (<code>E</code>) starting from any <code>a</code>.</p>
<p dir="auto">The instinctive thing to do here is to just call <code>bfs()</code> in a loop passing the
grid coordinates of any <code>a</code> cell as source, and keep the minimum returned value.
We can do better though. Since we are using BFS on a graph where arcs have all
the same weight (i.e. all steps we make are one unit of distance), we know for a
fact that whenever we visit a given cell for the first time, we have also
traveled the shortest possible distance to do so. This means that if we perform
BFS backward from the destination, we can simply stop at the first cell with
elevation <code>a</code> that we encounter, and we'll have found the minimum distance from
any <code>a</code> to the destination.</p>
<p dir="auto">There's a catch though. If we want to move backward from the destination (<code>E</code>),
we also need to write a different <code>get_neighbors()</code> function, since now the
check to perform on the elevation is the opposite: we can only move to
neighboring cells that have an elevation <em>higher than or equal to</em> the current
cell's elevation plus one.</p>
<p dir="auto">We still need the original <code>get_neighbors()</code> function. Let's split it into three
different functions: a generic <code>neighbors4()</code> function that only returns the
coordinates of any valid neighboring cell, a second one that checks elevation
constraints assuming we are moving forward, and a third one that checks elevation constraints
assuming we are moving backward.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def neighbors4(grid, r, c, h, w):
    for nr, nc in ((r + 1, c), (r - 1, c), (r, c + 1), (r, c - 1)):
        if 0 &lt;= nr &lt; h and 0 &lt;= nc &lt; w:
            yield nr, nc

def neighbors_forward(grid, r, c, h, w):
    max_el = grid[r][c] + 1

    for nr, nc in neighbors4(grid, r, c, h, w):
        if grid[nr][nc] &lt;= max_el:
            yield nr, nc

def neighbors_backward(grid, r, c, h, w):
    min_el = grid[r][c] - 1

    for nr, nc in neighbors4(grid, r, c, h, w):
        if grid[nr][nc] &gt;= min_el:
            yield nr, nc"><pre><span class="pl-k">def</span> <span class="pl-en">neighbors4</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>):
    <span class="pl-k">for</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span> <span class="pl-c1">in</span> ((<span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">c</span>), (<span class="pl-s1">r</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">c</span>), (<span class="pl-s1">r</span>, <span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>), (<span class="pl-s1">r</span>, <span class="pl-s1">c</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>)):
        <span class="pl-k">if</span> <span class="pl-c1">0</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">nr</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">h</span> <span class="pl-c1">and</span> <span class="pl-c1">0</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">nc</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">w</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span>

<span class="pl-k">def</span> <span class="pl-en">neighbors_forward</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>):
    <span class="pl-s1">max_el</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">+</span> <span class="pl-c1">1</span>

    <span class="pl-k">for</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span> <span class="pl-c1">in</span> <span class="pl-en">neighbors4</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>):
        <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">nr</span>][<span class="pl-s1">nc</span>] <span class="pl-c1">&lt;=</span> <span class="pl-s1">max_el</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span>

<span class="pl-k">def</span> <span class="pl-en">neighbors_backward</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>):
    <span class="pl-s1">min_el</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">-</span> <span class="pl-c1">1</span>

    <span class="pl-k">for</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span> <span class="pl-c1">in</span> <span class="pl-en">neighbors4</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>):
        <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">nr</span>][<span class="pl-s1">nc</span>] <span class="pl-c1">&gt;=</span> <span class="pl-s1">min_el</span>:
            <span class="pl-k">yield</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span></pre></div>
<p dir="auto">We can further simplify the last two functions using a <em>filtering</em>
<a href="https://www.python.org/dev/peps/pep-0289/" rel="nofollow">generator expression</a> of the form
<code>x for x in iterable if &lt;condition on x&gt;</code>, which will only yield items that
satisfy a certain condition. Here it is:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def neighbors_forward(grid, r, c, h, w):
    max_el = grid[r][c] + 1
    neigh = neighbors4(grid, r, c, h, w)
    yield from ((nr, nc) for nr, nc in neigh if grid[nr][nc] &lt;= max_el)

def neighbors_backward(grid, r, c, h, w):
    min_el = grid[r][c] - 1
    neigh = neighbors4(grid, r, c, h, w)
    yield from ((nr, nc) for nr, nc in neigh if grid[nr][nc] &gt;= min_el)"><pre><span class="pl-k">def</span> <span class="pl-en">neighbors_forward</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>):
    <span class="pl-s1">max_el</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">+</span> <span class="pl-c1">1</span>
    <span class="pl-s1">neigh</span> <span class="pl-c1">=</span> <span class="pl-en">neighbors4</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>)
    <span class="pl-k">yield</span> <span class="pl-k">from</span> ((<span class="pl-s1">nr</span>, <span class="pl-s1">nc</span>) <span class="pl-k">for</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span> <span class="pl-c1">in</span> <span class="pl-s1">neigh</span> <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">nr</span>][<span class="pl-s1">nc</span>] <span class="pl-c1">&lt;=</span> <span class="pl-s1">max_el</span>)

<span class="pl-k">def</span> <span class="pl-en">neighbors_backward</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>):
    <span class="pl-s1">min_el</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">-</span> <span class="pl-c1">1</span>
    <span class="pl-s1">neigh</span> <span class="pl-c1">=</span> <span class="pl-en">neighbors4</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">h</span>, <span class="pl-s1">w</span>)
    <span class="pl-k">yield</span> <span class="pl-k">from</span> ((<span class="pl-s1">nr</span>, <span class="pl-s1">nc</span>) <span class="pl-k">for</span> <span class="pl-s1">nr</span>, <span class="pl-s1">nc</span> <span class="pl-c1">in</span> <span class="pl-s1">neigh</span> <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">nr</span>][<span class="pl-s1">nc</span>] <span class="pl-c1">&gt;=</span> <span class="pl-s1">min_el</span>)</pre></div>
<p dir="auto">The BFS code we wrote for part 1 only needs a couple of modifications to also
work for part 2:</p>
<ul dir="auto">
<li>Since we want to use two different functions to get cell neighbors, we can
accept a function as an additional parameter.</li>
<li>Since for part 2 we also want to stop whenever we visit a cell containing a
given value, we can alter the condition used to <code>return</code> to also check whether
<code>grid[r][c] == dst</code>, and then pass the destination coordinates as <code>src</code>, and
the value <code>LOWEST</code> as <code>dst</code>. This won't break part 1 since <code>grid[r][c] == dst</code>
will never match when <code>dst</code> is a tuple of coordinates.</li>
</ul>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="-def bfs(grid, src, dst):
+def bfs(grid, src, dst, get_neighbors):
     h, w    = len(grid), len(grid[0])
     queue   = deque([(0, src)])
     visited = set()

     while queue:
         distance, rc = queue.popleft()
-         if rc == dst:
+         r, c = rc
+         if rc == dst or grid[r][c] == dst:
             return distance

         if rc not in visited:
             visited.add(rc)

             for n in get_neighbors(grid, r, c, h, w):
                 if n in visited:
                     continue

                 queue.append((distance + 1, n))

     return INFINITY"><pre><span class="pl-md"><span class="pl-md">-</span>def bfs(grid, src, dst):</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>def bfs(grid, src, dst, get_neighbors):</span>
     h, w    = len(grid), len(grid[0])
     queue   = deque([(0, src)])
     visited = set()

     while queue:
         distance, rc = queue.popleft()
<span class="pl-md"><span class="pl-md">-</span>         if rc == dst:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>         r, c = rc</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>         if rc == dst or grid[r][c] == dst:</span>
             return distance

         if rc not in visited:
             visited.add(rc)

             for n in get_neighbors(grid, r, c, h, w):
                 if n in visited:
                     continue

                 queue.append((distance + 1, n))

     return INFINITY</pre></div>
<p dir="auto">And here we go, we now have the solution for both parts:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="min_dist = bfs(grid, src, dst, neighbors_forward)
print('Part 1:', min_dist)

min_dist_from_any_a = bfs(grid, dst, LOWEST, neighbors_backward)
print('Part 2:', min_dist_from_any_a)"><pre><span class="pl-s1">min_dist</span> <span class="pl-c1">=</span> <span class="pl-en">bfs</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">src</span>, <span class="pl-s1">dst</span>, <span class="pl-s1">neighbors_forward</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">min_dist</span>)

<span class="pl-s1">min_dist_from_any_a</span> <span class="pl-c1">=</span> <span class="pl-en">bfs</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">dst</span>, <span class="pl-v">LOWEST</span>, <span class="pl-s1">neighbors_backward</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">min_dist_from_any_a</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-13---distress-signal" class="anchor" aria-hidden="true" href="#day-13---distress-signal"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 13 - Distress Signal</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/13" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day13.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-12" class="anchor" aria-hidden="true" href="#part-1-12"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Today we're dealing with nested lists of integers, called "packets" in the
problem statement. We are given a list of packet <em>pairs</em>, and we need to compare
the two packets in each pair to determine if they are in the correct order or
not. In other words, we need to establish an order for all the given pairs.</p>
<p dir="auto">The order of a pair of packets is based on some arbitrarily given rules that
need to be applied recursively:</p>
<ol dir="auto">
<li>
<p dir="auto">If both values are integers, the lower integer should come first. If they are
equal, we don't know which one should come first.</p>
</li>
<li>
<p dir="auto">If both values are lists, check the order between each pair of items in the
lists. The first pair of items for which the order can be determined also
determines the order of the two lists. Whichever list runs out of items
before a decision can be made should come first. If instead no order can be
determined for any of the pairs, and both lists have the same length, we
don't know which list should come first.</p>
</li>
<li>
<p dir="auto">If one of the values is a list and the other is an integer, transform the
integer into a 1-item list (containing only said integer), and re-perform the
check.</p>
</li>
</ol>
<p dir="auto">We need to find the sum of the (1-based) indices of the pairs of packets that
are in the right order.</p>
<p dir="auto">Let's start with an example to understand the rules. Let's say we have the
following pair of packets:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[[1],[2,3,4],9]
[[1],4,0]"><pre>[[<span class="pl-c1">1</span>],[<span class="pl-c1">2</span>,<span class="pl-c1">3</span>,<span class="pl-c1">4</span>],<span class="pl-c1">9</span>]
[[<span class="pl-c1">1</span>],<span class="pl-c1">4</span>,<span class="pl-c1">0</span>]</pre></div>
<p dir="auto">These are the checks that would be performed, and their outcome, according to
the above rules:</p>
<ul dir="auto">
<li>Compare <code>[[1],[2,3,4],9]</code> with <code>[[1],4,0]</code>. Both are lists, so compare their
items pairwise:
<ul dir="auto">
<li>Compare <code>[1]</code> with <code>[1]</code>:
<ul dir="auto">
<li>Compare <code>1</code> with <code>1</code>:
<ul dir="auto">
<li>They are equal, order is unknown.</li>
</ul>
</li>
</ul>
</li>
<li>Compare <code>[2,3,4]</code> with <code>4</code>. One is a list and one is an integer. Transform
<code>4</code> into <code>[4]</code> and retry:
<ul dir="auto">
<li>Compare <code>[2,3,4]</code> with <code>[4]</code>:
<ul dir="auto">
<li>Compare <code>2</code> with <code>4</code>:
<ul dir="auto">
<li><code>2</code> is less than <code>4</code> so <code>2</code> should come first, and indeed it does.
This means that the original packets were in the right order. Stop.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p dir="auto">As can be seen from the above example, Whenever we are able to make a decision
about the order of two items, at any nesting level, we should stop and
"propagate" that decision back to the original packets. It does not matter
what's in the rest of the packets. In fact, the two packets above also contained
a <code>9</code> and a <code>0</code>, which were never compared because we could determine the order
before getting to them.</p>
<p dir="auto">As yesterday, we'll use a bottom-up approach. Let's implement a recursive
function to compare two packets. We'll assume to have two parameters <code>a</code> and
<code>b</code>, both of which can either be <code>list</code> or <code>int</code>, and apply the rules to
determine which one should come first. For simplicity, we'll make the function
return an integer: negative if <code>a</code> should come before <code>b</code>, positive if <code>b</code>
should come before <code>a</code>, and zero otherwise. This is also known as a "cmp"
function (which <a href="https://docs.python.org/2/library/functions.html#cmp" rel="nofollow">actually was a built-in function</a> in Python 2).</p>
<ul dir="auto">
<li>
<p dir="auto">In case both parameters are <code>int</code>, we can simply return <code>b - a</code>. In fact,
<code>a - b</code> will be negative if <code>a &lt; b</code>, positive if <code>a &gt; b</code> and zero if <code>a == b</code>.</p>
</li>
<li>
<p dir="auto">In case only one is an <code>int</code>, we'll wrap it into a list and make a recursive
call to re-perform the comparison.</p>
</li>
<li>
<p dir="auto">In case both parameters are <code>list</code>, to compare their items pairwise we can
iterate over the lists with <a href="https://docs.python.org/3/library/functions.html#zip" rel="nofollow"><code>zip(a, b)</code></a> and make a recursive
call for each pair of items. If any of the recursive calls we make is
conclusive (i.e. the result is not <code>0</code>), we are done. Otherwise, we'll keep
going.</p>
<p dir="auto">If we run out of items to compare, we'll need to check the length of the two
lists instead: the shorter one should come first (same logic as the one for
two integers), so we can just return <code>len(a) - len(b)</code>.</p>
</li>
</ul>
<p dir="auto">To check whether a variable is an <code>int</code>, we can either use
<a href="https://docs.python.org/3/library/functions.html#type" rel="nofollow"><code>type(x)</code></a> or <a href="https://docs.python.org/3/library/functions.html#isinstance" rel="nofollow"><code>isinstance(x, int)</code></a>).
I'll go with the former.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def compare(a, b):
    a_is_int = type(a) is int
    b_is_int = type(b) is int

    # Both integers.
    if a_is_int and b_is_int:
        return a - b

    # One is an integer, wrap it into a list and re-check.
    if a_is_int != b_is_int:
        if a_is_int:
            return compare([a], b)
        else:
            return compare(a, [b])

    # Both lists, check their items pairwise, stop at the first conclusive result.
    for x, y in zip(a, b):
        res = compare(x, y)
        if res != 0:
            return res

    # We ran out of items before coming to a conclusion. Now what matters is
    # which list was longer (according to rule number 2).
    return len(a) - len(b)"><pre><span class="pl-k">def</span> <span class="pl-en">compare</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
    <span class="pl-s1">a_is_int</span> <span class="pl-c1">=</span> <span class="pl-en">type</span>(<span class="pl-s1">a</span>) <span class="pl-c1">is</span> <span class="pl-s1">int</span>
    <span class="pl-s1">b_is_int</span> <span class="pl-c1">=</span> <span class="pl-en">type</span>(<span class="pl-s1">b</span>) <span class="pl-c1">is</span> <span class="pl-s1">int</span>

    <span class="pl-c"># Both integers.</span>
    <span class="pl-k">if</span> <span class="pl-s1">a_is_int</span> <span class="pl-c1">and</span> <span class="pl-s1">b_is_int</span>:
        <span class="pl-k">return</span> <span class="pl-s1">a</span> <span class="pl-c1">-</span> <span class="pl-s1">b</span>

    <span class="pl-c"># One is an integer, wrap it into a list and re-check.</span>
    <span class="pl-k">if</span> <span class="pl-s1">a_is_int</span> <span class="pl-c1">!=</span> <span class="pl-s1">b_is_int</span>:
        <span class="pl-k">if</span> <span class="pl-s1">a_is_int</span>:
            <span class="pl-k">return</span> <span class="pl-en">compare</span>([<span class="pl-s1">a</span>], <span class="pl-s1">b</span>)
        <span class="pl-k">else</span>:
            <span class="pl-k">return</span> <span class="pl-en">compare</span>(<span class="pl-s1">a</span>, [<span class="pl-s1">b</span>])

    <span class="pl-c"># Both lists, check their items pairwise, stop at the first conclusive result.</span>
    <span class="pl-k">for</span> <span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">in</span> <span class="pl-en">zip</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
        <span class="pl-s1">res</span> <span class="pl-c1">=</span> <span class="pl-en">compare</span>(<span class="pl-s1">x</span>, <span class="pl-s1">y</span>)
        <span class="pl-k">if</span> <span class="pl-s1">res</span> <span class="pl-c1">!=</span> <span class="pl-c1">0</span>:
            <span class="pl-k">return</span> <span class="pl-s1">res</span>

    <span class="pl-c"># We ran out of items before coming to a conclusion. Now what matters is</span>
    <span class="pl-c"># which list was longer (according to rule number 2).</span>
    <span class="pl-k">return</span> <span class="pl-en">len</span>(<span class="pl-s1">a</span>) <span class="pl-c1">-</span> <span class="pl-en">len</span>(<span class="pl-s1">b</span>)</pre></div>
<p dir="auto">Okay, now to the input parsing. The first thing to do is read each packet in the
input as a string. We can skip empty lines delimiting packet pairs either
iterating over the input line by line or reading it all at once and using
<a href="https://docs.python.org/3/library/stdtypes.html#str.replace" rel="nofollow"><code>.replace()</code></a>. Then, <a href="https://docs.python.org/3/library/stdtypes.html#str.splitlines" rel="nofollow"><code>.splitlines()</code></a> will
give us a list of raw packets (strings) to later parse.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    lines = fin.read().replace('\n\n', '\n').splitlines()"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">lines</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">replace</span>(<span class="pl-s">'<span class="pl-cce">\n</span><span class="pl-cce">\n</span>'</span>, <span class="pl-s">'<span class="pl-cce">\n</span>'</span>).<span class="pl-en">splitlines</span>()</pre></div>
<p dir="auto">We chose to read all packets at once into a list in order to easily parse them
all at once with a single call to <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a>, given a function
able to parse one packet.</p>
<p dir="auto">As you probably already noticed, the packets are valid Python lists, meaning
that if we pasted them into a Python interpreter they would evaluate to actual
lists. There's a function that can do exactly this: <a href="https://docs.python.org/3/library/functions.html#eval" rel="nofollow"><code>eval()</code></a>.
It must be noted however that using <code>eval()</code> for input parsing is in general a
<em>really bad idea</em>, as it can evaluate arbitrary Python code and therefore do
unexpected things. If the input comes from an untrusted source, we should never
<code>eval()</code> it before making sure it's safe to do so, and we should avoid <code>eval()</code>
in general.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Example of &quot;unexpected things&quot;
eval('__import__(&quot;os&quot;).system(&quot;arbitrary shell commands here&quot;)')"><pre><span class="pl-c"># Example of "unexpected things"</span>
<span class="pl-en">eval</span>(<span class="pl-s">'__import__("os").system("arbitrary shell commands here")'</span>)</pre></div>
<p dir="auto">As it turns out though, our packets are also valid <a href="https://en.wikipedia.org/wiki/JSON" rel="nofollow">JSON</a> objects,
and we have <a href="https://docs.python.org/3/library/json.html#json.loads" rel="nofollow"><code>json.loads()</code></a> that parses a string representing a
JSON object into a Python object. JSON arrays (<code>[...]</code>) are turned into <code>list</code>
and integers into <code>int</code>, so this function is all we need to parse a packet
without worrying about evaluating random Python code. We could write an actual
parsing function ourselves without the use of <code>eval()</code> or <code>json.loads()</code>, but...
I am honestly too lazy for that, at least today. Also, why do it in 10 lines of
code when you can do it in one (said no sane programmer ever)?</p>
<p dir="auto">Anyway... here goes nothing:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from json import loads
packets = list(map(loads, lines))"><pre><span class="pl-k">from</span> <span class="pl-s1">json</span> <span class="pl-k">import</span> <span class="pl-s1">loads</span>
<span class="pl-s1">packets</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-en">map</span>(<span class="pl-s1">loads</span>, <span class="pl-s1">lines</span>))</pre></div>
<p dir="auto">Now we can group our packets in pairs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pairs = []
for i in range(0, len(packets), 2):
    pairs.append(packets[i:i + 2])"><pre><span class="pl-s1">pairs</span> <span class="pl-c1">=</span> []
<span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">0</span>, <span class="pl-en">len</span>(<span class="pl-s1">packets</span>), <span class="pl-c1">2</span>):
    <span class="pl-s1">pairs</span>.<span class="pl-en">append</span>(<span class="pl-s1">packets</span>[<span class="pl-s1">i</span>:<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">2</span>])</pre></div>
<p dir="auto">Which can be simplified to a single <a href="https://www.python.org/dev/peps/pep-0289/" rel="nofollow">generator expression</a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="pairs = (packets[i:i + 2] for i in range(0, len(packets), 2))"><pre><span class="pl-s1">pairs</span> <span class="pl-c1">=</span> (<span class="pl-s1">packets</span>[<span class="pl-s1">i</span>:<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-c1">2</span>] <span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-c1">0</span>, <span class="pl-en">len</span>(<span class="pl-s1">packets</span>), <span class="pl-c1">2</span>))</pre></div>
<p dir="auto">Note that the above does not actually create a list or tuple, but rather a
generator that will <code>yield</code> pairs on the fly, and which is thus only iterable
<em>once</em>, which is enough for us.</p>
<p dir="auto">Now we can finally iterate over the pairs and <code>compare()</code> them. Since we need to
provide the sum of 1-based indices of correctly ordered pairs as the answer,
we'll also use <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow"><code>enumearte()</code></a>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = 0
for i, (a, b) in enumerate(packets, 1):
    if compare(a, b) &lt; 0: # a should come before b
        answer += i

print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-k">for</span> <span class="pl-s1">i</span>, (<span class="pl-s1">a</span>, <span class="pl-s1">b</span>) <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">packets</span>, <span class="pl-c1">1</span>):
    <span class="pl-k">if</span> <span class="pl-en">compare</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>) <span class="pl-c1">&lt;</span> <span class="pl-c1">0</span>: <span class="pl-c"># a should come before b</span>
        <span class="pl-s1">answer</span> <span class="pl-c1">+=</span> <span class="pl-s1">i</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<p dir="auto">All the above loop is doing is calculating a sum, so we can also re-write the
entire thing using <a href="https://docs.python.org/3/library/functions.html#sum" rel="nofollow"><code>sum()</code></a> plus a filtered generator
expression (<code>x for x in ... if &lt;condition&gt;</code>):</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = sum(i for i, (a, b) in enumerate(pairs, 1) if compare(a, b) &gt; 0)
print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">sum</span>(<span class="pl-s1">i</span> <span class="pl-k">for</span> <span class="pl-s1">i</span>, (<span class="pl-s1">a</span>, <span class="pl-s1">b</span>) <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">pairs</span>, <span class="pl-c1">1</span>) <span class="pl-k">if</span> <span class="pl-en">compare</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>) <span class="pl-c1">&gt;</span> <span class="pl-c1">0</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-12" class="anchor" aria-hidden="true" href="#part-2-12"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">Now that we have a "primitive" to establish the order between two packets, why
not use it to <em>sort</em> all the packets? That's exactly what we are asked to do,
after adding to our packets two "divider" packets: <code>[[2]]</code> and <code>[[6]]</code>. Once
sorted, we need to find the product of the two 1-based indices of the divider
packets.</p>
<p dir="auto">Well. This is easy. We already have a comparison function, and we have
<a href="https://docs.python.org/3/library/stdtypes.html#list.sort" rel="nofollow"><code>list.sort()</code></a>. The only hiccup is that <code>list.sort()</code> does not
take a comparison function... it used to in Python 2 with the <code>cmp=</code> argument,
but in Python 3 that was replaced with <code>key=</code>, which only takes a single value
and is expected to somehow transform it.</p>
<p dir="auto">Transforming a <code>cmp</code> function into a <code>key</code> function and vice-versa is not really
straightforward. Thankfully, Python developers thought about this for us:
<a href="https://docs.python.org/3/library/functools.html#functools.cmp_to_key" rel="nofollow"><code>functools.cmp_to_key()</code></a> is a function that takes a
<code>cmp</code>-style function (taking two arguments and returning an integer) and
magically transforms it into a <code>key</code>-style function (taking one argument and
returning an arbitrary object). The way the conversion is performed is actually
quite interesting and clever, you can read about it <a href="https://stackoverflow.com/q/32752739/3889449" rel="nofollow">in this Stack Overflow
post</a> if curious.</p>
<p dir="auto">Okay, let's do this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="packets.extend(([[2]], [[6]]))
packets.sort(key=cmp_to_key(compare))"><pre><span class="pl-s1">packets</span>.<span class="pl-en">extend</span>(([[<span class="pl-c1">2</span>]], [[<span class="pl-c1">6</span>]]))
<span class="pl-s1">packets</span>.<span class="pl-en">sort</span>(<span class="pl-s1">key</span><span class="pl-c1">=</span><span class="pl-en">cmp_to_key</span>(<span class="pl-s1">compare</span>))</pre></div>
<p dir="auto">Now we can use <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="nofollow"><code>.index()</code></a> to find the indices of the dividers
and multiply them together. We also know that the second divider (<code>[[6]]</code>) must
come <em>after</em> the first as per the ordering rules, so we can pass a second
argument to <code>.index()</code> (the index to start from) to skip already checked items.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = packets.index([[2]]) + 1
answer *= packets.index([[6]], answer) + 1
print('Part 2:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-s1">packets</span>.<span class="pl-en">index</span>([[<span class="pl-c1">2</span>]]) <span class="pl-c1">+</span> <span class="pl-c1">1</span>
<span class="pl-s1">answer</span> <span class="pl-c1">*=</span> <span class="pl-s1">packets</span>.<span class="pl-en">index</span>([[<span class="pl-c1">6</span>]], <span class="pl-s1">answer</span>) <span class="pl-c1">+</span> <span class="pl-c1">1</span>
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<p dir="auto">Like a walk in the park!</p>
<h2 dir="auto"><a id="user-content-day-14---regolith-reservoir" class="anchor" aria-hidden="true" href="#day-14---regolith-reservoir"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 14 - Regolith Reservoir</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/14" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day14.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-13" class="anchor" aria-hidden="true" href="#part-1-13"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Today we are dealing with a cave that fills with sand. As the problem statement
remings us, a similar (although more intricate) concept was explored in
<a href="https://adventofcode.com/2018/day/17" rel="nofollow">2018 day 17</a> (of which unfortunately I did not write a
walkthrough for... <em>yet</em>).</p>
<p dir="auto">The cave we are in is a 2D grid, and our input is a list of segments in the form
<code>ax,ay -&gt; bx,by -&gt; ...</code>, which represent sequances of vertical and horizontal
segments of cave cells occupied by rocks. Units of sand, each occupying one grid
cell, start pouring into the cave <em>one at a time</em> from <code>x=500,y=0</code> (<code>y=0</code> is the
top) and fall down the cave obeying four simple rules:</p>
<ol dir="auto">
<li>If the cell immediately below is free, the unit of sand falls one step
straight down.</li>
<li>If instead that cell is occupied, it falls one step diagonally, one cell down
and one to the left.</li>
<li>If instead that cell is occupied, it falls one step diagonally, one cell down
and one to the right.</li>
<li>Otherwise (the three cells under the unit of sand are all occupied), it stops
falling and settles down where it is.</li>
</ol>
<p dir="auto">Our cave is infinitely deep (<code>y</code> does not have an upper bound), but there is a
limited number of cells occupied by rocks (our input) forming platforms that
sand can rest on. At some point though, sand will inevitably fill all the
platforms it is able to reach, at which point the next unit that is poured will
start falling down indefinitely into the void. We want to know <em>how many units
of sand will fall and settle down</em> before this happens.</p>
<p dir="auto">To make the above rules a little bit clearer, here's a simple diagram:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="...s...
..213.."><pre lang="none" class="notranslate"><code>...s...
..213..
</code></pre></div>
<p dir="auto">A unit of sand (<code>s</code> above) first tries to fall to the cell labeled <code>1</code>; if
that's occupied it tries <code>2</code>; if that's also occupied it tries <code>3</code>. If all of them
are occupied, it settles down where it is. In other words, a unit of sand can
only settle down above the middle of a 3-cell platform (whether it is sand,
rock, or a mix of the two). More examples that can help better understand the
problem are provided in the <a href="https://adventofcode.com/2022/day/14" rel="nofollow">problem statement</a>, so I won't go
deeper with the explanation and dive directly into the solution.</p>
<p dir="auto">It's tempting to create a matrix as a <code>list</code> of <code>list</code> to represent our 2D cave.
However, we don't know its size before parsing the entire input, and even then,
it could potentially need expansion due to the sand being poured in the cave
(spoiler, we'll be dealing with a lot more sand in part 2). Instead, we'll use a
<code>set</code> of points (i.e. tuples of the form <code>(x, y)</code>), which is a lot simpler to
manage: if a point is in the set, that cave cell will be considered occupied.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cave = set() # Any point (x, y) in this set is occupied (by either a rock or a sand unit)"><pre><span class="pl-s1">cave</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>() <span class="pl-c"># Any point (x, y) in this set is occupied (by either a rock or a sand unit)</span></pre></div>
<p dir="auto">Let's parse the input. Each line consists of a list of 2D coordinates separated
by <code>' -&gt; '</code>, and each point has its x and y components separated by a comma.
Parsing a single line is therefore only a matter of a couple of
<a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow"><code>.split()</code></a> operations:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="fin = open(...)

for line in fin:
    points = []

    for p in line.split(' -&gt; '):
        x, y = p.split(',')
        points.append(int(x), int(y))"><pre><span class="pl-s1">fin</span> <span class="pl-c1">=</span> <span class="pl-en">open</span>(...)

<span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">points</span> <span class="pl-c1">=</span> []

    <span class="pl-k">for</span> <span class="pl-s1">p</span> <span class="pl-c1">in</span> <span class="pl-s1">line</span>.<span class="pl-en">split</span>(<span class="pl-s">' -&gt; '</span>):
        <span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-s1">p</span>.<span class="pl-en">split</span>(<span class="pl-s">','</span>)
        <span class="pl-s1">points</span>.<span class="pl-en">append</span>(<span class="pl-en">int</span>(<span class="pl-s1">x</span>), <span class="pl-en">int</span>(<span class="pl-s1">y</span>))</pre></div>
<p dir="auto">The internal loop above can be further simplified with the use of
<a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> and a couple <a href="https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions" rel="nofollow"><code>lambda</code></a> functions:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for line in fin:
    points = line.split(' -&gt; ')
    points = map(lambda p: p.split(','), points)
    points = map(lambda p: (int(p[0]), int(p[1])), points)"><pre><span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">points</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">split</span>(<span class="pl-s">' -&gt; '</span>)
    <span class="pl-s1">points</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-k">lambda</span> <span class="pl-s1">p</span>: <span class="pl-s1">p</span>.<span class="pl-en">split</span>(<span class="pl-s">','</span>), <span class="pl-s1">points</span>)
    <span class="pl-s1">points</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-k">lambda</span> <span class="pl-s1">p</span>: (<span class="pl-en">int</span>(<span class="pl-s1">p</span>[<span class="pl-c1">0</span>]), <span class="pl-en">int</span>(<span class="pl-s1">p</span>[<span class="pl-c1">1</span>])), <span class="pl-s1">points</span>)</pre></div>
<p dir="auto">Note that we did not actually need to create a <code>list</code> of points for each parsed
line, we can keep the generator returned by <code>map()</code> as we don't need to iterate
on the points more than once.</p>
<p dir="auto">Each pair <code>ax,ay -&gt; bx,by</code> in the lists of points we get on each line indicates
a segment of cells occupied by rocks. These segments are always either vertical
or horizontal, never diagonal. In the first case all the cells with <code>x == ax</code>
(<code>== bx</code>) and <code>y</code> from <code>ay</code> to <code>by</code> are occupied by rocks, while in the second
case all the cells with <code>y == ay</code> (<code>== by</code>) and <code>x</code> from <code>ax</code> to <code>bx</code> are
occupied with rocks. Therefore, to add rocks to our cave, we need to do
something like this for each pair of points on each line:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="if ax == bx: # vertical segment
    for x in range(ax, bx + 1):
        cave.add((x, ay))
else: # horizontal segment
    for y in range(ay, by + 1):
        cave.add((ax, y))"><pre><span class="pl-k">if</span> <span class="pl-s1">ax</span> <span class="pl-c1">==</span> <span class="pl-s1">bx</span>: <span class="pl-c"># vertical segment</span>
    <span class="pl-k">for</span> <span class="pl-s1">x</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">ax</span>, <span class="pl-s1">bx</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>):
        <span class="pl-s1">cave</span>.<span class="pl-en">add</span>((<span class="pl-s1">x</span>, <span class="pl-s1">ay</span>))
<span class="pl-k">else</span>: <span class="pl-c"># horizontal segment</span>
    <span class="pl-k">for</span> <span class="pl-s1">y</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">ay</span>, <span class="pl-s1">by</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>):
        <span class="pl-s1">cave</span>.<span class="pl-en">add</span>((<span class="pl-s1">ax</span>, <span class="pl-s1">y</span>))</pre></div>
<p dir="auto">There's a problem though: we have no guarantee on the order of the coordinates,
so we don't know if <code>ax &lt; bx</code> or <code>ay &lt; by</code>. We need to distinguish between the
two cases and iterate over a different <a href="https://docs.python.org/3/library/functions.html#range" rel="nofollow"><code>range()</code></a>
accordingly. Let's write a function to do that:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def autorange(start, end):
    if start &gt; end:
        return range(start, end - 1, -1)
    return range(start, end + 1)

# Or, alternatively (this range always does steps of +1)
def autorange(start, end):
    return range(min(start, end), max(start, end) + 1)"><pre><span class="pl-k">def</span> <span class="pl-en">autorange</span>(<span class="pl-s1">start</span>, <span class="pl-s1">end</span>):
    <span class="pl-k">if</span> <span class="pl-s1">start</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">end</span>:
        <span class="pl-k">return</span> <span class="pl-en">range</span>(<span class="pl-s1">start</span>, <span class="pl-s1">end</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>)
    <span class="pl-k">return</span> <span class="pl-en">range</span>(<span class="pl-s1">start</span>, <span class="pl-s1">end</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)

<span class="pl-c"># Or, alternatively (this range always does steps of +1)</span>
<span class="pl-k">def</span> <span class="pl-en">autorange</span>(<span class="pl-s1">start</span>, <span class="pl-s1">end</span>):
    <span class="pl-k">return</span> <span class="pl-en">range</span>(<span class="pl-en">min</span>(<span class="pl-s1">start</span>, <span class="pl-s1">end</span>), <span class="pl-en">max</span>(<span class="pl-s1">start</span>, <span class="pl-s1">end</span>) <span class="pl-c1">+</span> <span class="pl-c1">1</span>)</pre></div>
<p dir="auto">For simplicity, we can now also create a <code>range2d()</code>
<a href="https://docs.python.org/3/howto/functional.html#generators" rel="nofollow">generator function</a> that takes two <em>points</em> and uses
<code>autorange()</code> to <code>yield</code> all the points of the horizontal or vertical segment
connecting them:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def range2d(a, b):
    ax, ay = a
    bx, by = b

    if ax == bx:
        # yield all points in the vertical segment
        for y in autorange(ay, by):
            yield ax, y
    else:
        # yield all points in the horizontal segment
        for x in autorange(ax, bx):
            yield x, ay"><pre><span class="pl-k">def</span> <span class="pl-en">range2d</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
    <span class="pl-s1">ax</span>, <span class="pl-s1">ay</span> <span class="pl-c1">=</span> <span class="pl-s1">a</span>
    <span class="pl-s1">bx</span>, <span class="pl-s1">by</span> <span class="pl-c1">=</span> <span class="pl-s1">b</span>

    <span class="pl-k">if</span> <span class="pl-s1">ax</span> <span class="pl-c1">==</span> <span class="pl-s1">bx</span>:
        <span class="pl-c"># yield all points in the vertical segment</span>
        <span class="pl-k">for</span> <span class="pl-s1">y</span> <span class="pl-c1">in</span> <span class="pl-en">autorange</span>(<span class="pl-s1">ay</span>, <span class="pl-s1">by</span>):
            <span class="pl-k">yield</span> <span class="pl-s1">ax</span>, <span class="pl-s1">y</span>
    <span class="pl-k">else</span>:
        <span class="pl-c"># yield all points in the horizontal segment</span>
        <span class="pl-k">for</span> <span class="pl-s1">x</span> <span class="pl-c1">in</span> <span class="pl-en">autorange</span>(<span class="pl-s1">ax</span>, <span class="pl-s1">bx</span>):
            <span class="pl-k">yield</span> <span class="pl-s1">x</span>, <span class="pl-s1">ay</span></pre></div>
<p dir="auto">Now we can add rocks to our cave. To iterate on points pairwise we'll just have
two variables <code>prev</code> and <code>cur</code>, and initialize <code>prev</code> with the first point
yielded returned by the <code>map()</code> generator using <a href="https://docs.p%5Bd20-alt-deque%5D.ython.org/3/library/functions.html#next" rel="nofollow"><code>next()</code></a>.
The <a href="https://docs.python.org/3/library/stdtypes.html#frozenset.update" rel="nofollow"><code>.update()</code></a> method of <code>set</code> can take any iterable and add
all its elements to the set, which means we can avoid explicitly looping over
the points yielded by <code>range2d(prev, cur)</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for line in fin:
    points = line.split(' -&gt; ')
    points = map(lambda p: p.split(','), points)
    points = map(lambda p: (int(p[0]), int(p[1])), points)
    prev   = next(points)

    for cur in points:
        cave.update(range2d(cur, prev))
        prev = cur"><pre><span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">points</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">split</span>(<span class="pl-s">' -&gt; '</span>)
    <span class="pl-s1">points</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-k">lambda</span> <span class="pl-s1">p</span>: <span class="pl-s1">p</span>.<span class="pl-en">split</span>(<span class="pl-s">','</span>), <span class="pl-s1">points</span>)
    <span class="pl-s1">points</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-k">lambda</span> <span class="pl-s1">p</span>: (<span class="pl-en">int</span>(<span class="pl-s1">p</span>[<span class="pl-c1">0</span>]), <span class="pl-en">int</span>(<span class="pl-s1">p</span>[<span class="pl-c1">1</span>])), <span class="pl-s1">points</span>)
    <span class="pl-s1">prev</span>   <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">points</span>)

    <span class="pl-k">for</span> <span class="pl-s1">cur</span> <span class="pl-c1">in</span> <span class="pl-s1">points</span>:
        <span class="pl-s1">cave</span>.<span class="pl-en">update</span>(<span class="pl-en">range2d</span>(<span class="pl-s1">cur</span>, <span class="pl-s1">prev</span>))
        <span class="pl-s1">prev</span> <span class="pl-c1">=</span> <span class="pl-s1">cur</span></pre></div>
<p dir="auto">In Python &gt;= 3.10, we have <a href="https://docs.python.org/3/library/itertools.html#itertools.pairwise" rel="nofollow"><code>itertools.pairwise()</code></a> that
can be used to achieve the same thing:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for line in fin:
    # ...
    for prev, cur in pairwise(points):
        cave.update(range2d(cur, prev))"><pre><span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-c"># ...</span>
    <span class="pl-k">for</span> <span class="pl-s1">prev</span>, <span class="pl-s1">cur</span> <span class="pl-c1">in</span> <span class="pl-en">pairwise</span>(<span class="pl-s1">points</span>):
        <span class="pl-s1">cave</span>.<span class="pl-en">update</span>(<span class="pl-en">range2d</span>(<span class="pl-s1">cur</span>, <span class="pl-s1">prev</span>))</pre></div>
<p dir="auto">Or, even more concisely, with the help of
<a href="https://docs.python.org/3/library/itertools.html#itertools.starmap" rel="nofollow"><code>itertools.starmap()</code></a> to unpack the pairs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for line in fin:
    # ...
    cave.update(*starmap(range2d, pairwise(points)))"><pre><span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
    <span class="pl-c"># ...</span>
    <span class="pl-s1">cave</span>.<span class="pl-en">update</span>(<span class="pl-c1">*</span><span class="pl-en">starmap</span>(<span class="pl-s1">range2d</span>, <span class="pl-en">pairwise</span>(<span class="pl-s1">points</span>)))</pre></div>
<p dir="auto">Before we can simulate the sand pouring into the cave, we know that at some
point sand will fill all the rock platforms in the cave and start falling down
to oblivion, we need to detect this in order to avoid ending up in an infinite
loop. We can do this by pre-calculating the <code>y</code> coordinate of the deepest rock
in the cave and making sure to never exceed it. This means iterating over all
the points initially in the <code>cave</code> set and finding the max <code>y</code>, which we can do
in one line with a simple <a href="https://docs.python.org/3/library/functions.html#max" rel="nofollow"><code>max()</code></a> plus <code>map()</code> + <code>lambda</code>,
or better <code>map()</code> + <a href="https://docs.python.org/3/library/operator.html#operator.itemgetter" rel="nofollow"><code>itemgetter()</code></a>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from operator import itemgetter
maxy = max(map(itemgetter(1), cave))"><pre><span class="pl-k">from</span> <span class="pl-s1">operator</span> <span class="pl-k">import</span> <span class="pl-s1">itemgetter</span>
<span class="pl-s1">maxy</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-en">map</span>(<span class="pl-en">itemgetter</span>(<span class="pl-c1">1</span>), <span class="pl-s1">cave</span>))</pre></div>
<p dir="auto">Good, now let's start pouring some sand into this cave. The rules are quite
simple, it's only a matter of following them. Let's write a function to pour a
single unit of sand down the cave from the source (<code>(500, 0)</code>), adding the final
coordinates to our <code>cave</code> set if the unit settles down. Since we'll need to call
this function multiple times in a loop, let's also make it return <code>True</code> if the
sand unit settles and <code>False</code> otherwise, so we'll know when to stop pouring.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def pour_sand(cave, maxy):
    x, y = 500, 0

    while y &lt; maxy:
        # Can this unit of sand fall directly down?
        if (x, y + 1) not in cave:
            y = y + 1
            continue

        # Can it fall one unit down and one to the left (diagonally)?
        if (x - 1, y + 1) not in cave:
            x, y = x - 1, y + 1
            continue

        # Can it fall one unit down and one to the right (diagonally)?
        if (x + 1, y + 1) not in cave:
            x, y = x + 1, y + 1
            continue

        # This unit of sand cannot fall anymore, so it settles.
        cave.add((x, y))
        return True

    # This unit will keep falling down the infinitely deep cave without settling
    return False"><pre><span class="pl-k">def</span> <span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>):
    <span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-c1">500</span>, <span class="pl-c1">0</span>

    <span class="pl-k">while</span> <span class="pl-s1">y</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">maxy</span>:
        <span class="pl-c"># Can this unit of sand fall directly down?</span>
        <span class="pl-k">if</span> (<span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>) <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">cave</span>:
            <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
            <span class="pl-k">continue</span>

        <span class="pl-c"># Can it fall one unit down and one to the left (diagonally)?</span>
        <span class="pl-k">if</span> (<span class="pl-s1">x</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>) <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">cave</span>:
            <span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-s1">x</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
            <span class="pl-k">continue</span>

        <span class="pl-c"># Can it fall one unit down and one to the right (diagonally)?</span>
        <span class="pl-k">if</span> (<span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>) <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">cave</span>:
            <span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
            <span class="pl-k">continue</span>

        <span class="pl-c"># This unit of sand cannot fall anymore, so it settles.</span>
        <span class="pl-s1">cave</span>.<span class="pl-en">add</span>((<span class="pl-s1">x</span>, <span class="pl-s1">y</span>))
        <span class="pl-k">return</span> <span class="pl-c1">True</span>

    <span class="pl-c"># This unit will keep falling down the infinitely deep cave without settling</span>
    <span class="pl-k">return</span> <span class="pl-c1">False</span></pre></div>
<p dir="auto">We are doing quite a number of repeated calculations with those <code>x</code> and <code>y</code>
coordinates. Since we are performing the same fundamental operation
(<code>if ... in cave</code>) 3 times each iteration of the <code>while</code> loop, we can simplify
things with a <code>for</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def pour_sand(cave, maxy):
    x, y = 500, 0

    while y &lt; maxy:
        newy = y + 1

        for newx in (x, x - 1, x + 1):
            if (newx, newy) not in cave:
                x, y = newx, newy
                break
        else:
            cave.add((x, y))
            return True

    return False"><pre><span class="pl-k">def</span> <span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>):
    <span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-c1">500</span>, <span class="pl-c1">0</span>

    <span class="pl-k">while</span> <span class="pl-s1">y</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">maxy</span>:
        <span class="pl-s1">newy</span> <span class="pl-c1">=</span> <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>

        <span class="pl-k">for</span> <span class="pl-s1">newx</span> <span class="pl-c1">in</span> (<span class="pl-s1">x</span>, <span class="pl-s1">x</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>):
            <span class="pl-k">if</span> (<span class="pl-s1">newx</span>, <span class="pl-s1">newy</span>) <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">cave</span>:
                <span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-s1">newx</span>, <span class="pl-s1">newy</span>
                <span class="pl-k">break</span>
        <span class="pl-k">else</span>:
            <span class="pl-s1">cave</span>.<span class="pl-en">add</span>((<span class="pl-s1">x</span>, <span class="pl-s1">y</span>))
            <span class="pl-k">return</span> <span class="pl-c1">True</span>

    <span class="pl-k">return</span> <span class="pl-c1">False</span></pre></div>
<p dir="auto">Yep, in Python <a href="https://docs.python.org/3/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops" rel="nofollow"><code>for ... else</code></a> is a thing. The <code>else</code> block is
only entered if no <code>break</code> is performed during the loop, meaning that our sand
unit could not continue falling down. All we need to do now is call
<code>pour_sand()</code> repeatedly until it returns <code>False</code>, counting the number of sand
units poured.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="sand = 0
while pour_sand(cave, maxy):
    sand += 1

print('Part 1:', sand)"><pre><span class="pl-s1">sand</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-k">while</span> <span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>):
    <span class="pl-s1">sand</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">sand</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-13" class="anchor" aria-hidden="true" href="#part-2-13"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">Now we also need to account for sand that overflows the rock platforms (after
filling them all). The cave does actually have a bottom: exactly two units under
the lowest piece of rock lies a flat horizontal and infinitely wide surface. Any
sand unit that previously overflowed will now settle and pile up because of this
horizontal floor. At some point, the pile of sand will become so high that it
will obstruct the source (at <code>500,0</code>). We want to know exactly how many units of
sand will it take for this to happen.</p>
<p dir="auto">There are a few ways to solve this second part:</p>
<ol dir="auto">
<li>
<p dir="auto">The simplest: keep doing what we did for part 1 and pour a single unit of
sand, this time accounting for the cave floor, until some unit settles right
at <code>500,0</code>.</p>
</li>
<li>
<p dir="auto">Using <a href="https://en.wikipedia.org/wiki/Breadth-first_search" rel="nofollow">breadth-first search</a>. We can in fact find the solution in
a much faster way using BFS without having to simulate every single sand
unit. If we stop and think about it for a moment, the problem we are facing
now is merely <em>identifying all grid cells that can be reached by sand units
starting from the source</em>. A simple BFS on the entire cave, starting from the
source and exploring for each cell the three cells below it, will effectively
explore all the cells reachable by sand.</p>
</li>
<li>
<p dir="auto">Using <a href="https://en.wikipedia.org/wiki/Depth-first_search" rel="nofollow">depth-first search</a>. Analogously, DFS is just another way of
exploring all the cells reachable by sand in the cave. However, while BFS is
only useful to solve part 2 due to the order in which cave cells would be
explored, DFS could also be used to solve part 1. This is because DFS allows
us to more closely emulate the behavior of the falling sand units, with the
opportunity to stop and <a href="https://en.wikipedia.org/wiki/Backtracking" rel="nofollow">backtrack</a> whenever a unit
overflows and falls under the lowest rock (<code>maxy</code> we calculated in part 1).</p>
<p dir="auto">In fact, the <code>pour_sand()</code> function we wrote for part 1 is exploring a single
path to an unique final grid cell in a depth-first manner every time it is
called. If the path until a certain sand unit settles is 100 steps long,
calling the function a second time means re-traveling along 99 of those
steps! To avoid this, each time a unit of sand settles, we should in theory
be able to backtrack going back to all the previous positios in the path and
find the first one where we can either settle another unit of sand or from
which we can start exploring a different sub-path.</p>
</li>
</ol>
<p dir="auto">Admittedly, I was tired enough this morning (AoC happens at 6 AM in Italy) to
just choose option 1 above and call it a day. However, as it turns out,
<a href="https://www.reddit.com/r/ItalyInformatica/comments/zlj7dj/adventofcode_2022_giorno_14/j05rz5p/" rel="nofollow">posting your solution to Reddit</a> saying you know there's
some optimization to make but you are lazy to implement it, actually attracts
other smart and helpful programmers that at the end of the day convince you to
optimize your solution. I'm going to go with option number 3 above, scrapping
the <code>pour_sand()</code> function we wrote for part 1 in favor of a simpler, concise
recursive DFS implementation.</p>
<p dir="auto">Now that we are familiar with the problem, the logic should be quite clear in
our mind. DFS is very easy to implement recursively, and the Wikipedia page
linked above has an example implementation that looks a lot like Python code.</p>
<p dir="auto">There is however a small difference between the "standard" DFS algorithm and the
one we need to write now: normally a "node" would be marked as visited as soon
as it is reached (i.e. as the first operation in the function), before visiting
its neighbors. In our case though, "visiting" a given cell does <strong>not</strong>
necessarily mean settling a unit of sand there! Whether or not that's the case
can only be decided after making sure that the three cells under it are
occupied. This means that marking a unit of sand as settled (adding its
coordinates to our <code>grid</code>) is in fact the <em>last</em> thing we'll do before returning
from the function, <em>after</em> first recursively exploring the 3 cells immediately
below.</p>
<p dir="auto">Let's first implement the function with only part 1 in mind. If the above
paragraph is clear, there isn't much more to say. Our new <code>pour_sand()</code> function
still directly adds coordinates to <code>cave</code>, returning <code>True</code> when a unit settles
at the given coordinates, and <code>False</code> otherwise.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def pour_sand(cave, maxy, x=500, y=0):
    # We are overflowing to the bottom of the cave!
    # This unit of sand will not settle anywhere, stop.
    if y == maxy:
        return False

    newy = y + 1

    # Check the 3 cells below this one: straight down, down &amp; left, down &amp; right
    for newx in (x, x - 1, x + 1):
        # If this cell (newx, newy) is not already occupied...
        if (newx, newy) not in cave:
            # ... will another unit of sand settle here?
            if not pour_sand(cave, maxy, newx, newy):
                # If not, the current unit cannot settle at (x, y).
                return False

    # All three cells below this unit of sand are occupied (otherwise we would
    # have already returned False), so it can settle here.
    cave.add((x, y))
    return True"><pre><span class="pl-k">def</span> <span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>, <span class="pl-s1">x</span><span class="pl-c1">=</span><span class="pl-c1">500</span>, <span class="pl-s1">y</span><span class="pl-c1">=</span><span class="pl-c1">0</span>):
    <span class="pl-c"># We are overflowing to the bottom of the cave!</span>
    <span class="pl-c"># This unit of sand will not settle anywhere, stop.</span>
    <span class="pl-k">if</span> <span class="pl-s1">y</span> <span class="pl-c1">==</span> <span class="pl-s1">maxy</span>:
        <span class="pl-k">return</span> <span class="pl-c1">False</span>

    <span class="pl-s1">newy</span> <span class="pl-c1">=</span> <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>

    <span class="pl-c"># Check the 3 cells below this one: straight down, down &amp; left, down &amp; right</span>
    <span class="pl-k">for</span> <span class="pl-s1">newx</span> <span class="pl-c1">in</span> (<span class="pl-s1">x</span>, <span class="pl-s1">x</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>):
        <span class="pl-c"># If this cell (newx, newy) is not already occupied...</span>
        <span class="pl-k">if</span> (<span class="pl-s1">newx</span>, <span class="pl-s1">newy</span>) <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">cave</span>:
            <span class="pl-c"># ... will another unit of sand settle here?</span>
            <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>, <span class="pl-s1">newx</span>, <span class="pl-s1">newy</span>):
                <span class="pl-c"># If not, the current unit cannot settle at (x, y).</span>
                <span class="pl-k">return</span> <span class="pl-c1">False</span>

    <span class="pl-c"># All three cells below this unit of sand are occupied (otherwise we would</span>
    <span class="pl-c"># have already returned False), so it can settle here.</span>
    <span class="pl-s1">cave</span>.<span class="pl-en">add</span>((<span class="pl-s1">x</span>, <span class="pl-s1">y</span>))
    <span class="pl-k">return</span> <span class="pl-c1">True</span></pre></div>
<p dir="auto">Now we can modify the function to also take into account the bottom of the cave
for part 2. We know the cave floor is a horizontal line at depth <code>maxy + 2</code>,
which means that sand will only ever settle <em>at most</em> at <code>maxy + 1</code>. The
addition of a boolean <code>floor</code> parameter indicating whether the cave floor is
present or not is enough to adapt our function to solve both parts:</p>
<ul dir="auto">
<li>In case <code>floor=False</code> (part 1), we need to give up if <code>y == maxy</code>, which is
exactly the check we are making at the beginning of the function above.</li>
<li>In case <code>floor=True</code> (part 2), we can actually exceed <code>maxy</code>, so we can skip
the initial check. Additionally, since we know that every single cell at
depth <code>maxy + 2</code> will be occupied, if we find ourselves at some <code>y &gt; maxy</code>, we
already know that the current unit will settle here (the only value of <code>y</code>
higher than <code>maxy</code> that we can get is <code>maxy + 1</code>, as we'll mark settled any
unit that gets there.</li>
</ul>
<p dir="auto">Here's the new version of the function:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def pour_sand(cave, maxy, floor=False, x=500, y=0):
    # For part 2 (floor=True), this check is not needed
    if not floor and y == maxy:
        return False

    # For part 1 (floor=False) we always need to do a recursive check of the
    # three cells below us. However, for part 2 (floor=True) we only need to do
    # this when y &lt;= maxy. At y = maxy + 1 we can skip the check.
    if not floor or y &lt;= maxy:
        newy = y + 1

        for newx in (x, x - 1, x + 1):
            if (newx, newy) not in cave:
                if not pour_sand(cave, maxy, floor, newx, newy):
                    return False

    cave.add((x, y))
    return True"><pre><span class="pl-k">def</span> <span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>, <span class="pl-s1">floor</span><span class="pl-c1">=</span><span class="pl-c1">False</span>, <span class="pl-s1">x</span><span class="pl-c1">=</span><span class="pl-c1">500</span>, <span class="pl-s1">y</span><span class="pl-c1">=</span><span class="pl-c1">0</span>):
    <span class="pl-c"># For part 2 (floor=True), this check is not needed</span>
    <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-s1">floor</span> <span class="pl-c1">and</span> <span class="pl-s1">y</span> <span class="pl-c1">==</span> <span class="pl-s1">maxy</span>:
        <span class="pl-k">return</span> <span class="pl-c1">False</span>

    <span class="pl-c"># For part 1 (floor=False) we always need to do a recursive check of the</span>
    <span class="pl-c"># three cells below us. However, for part 2 (floor=True) we only need to do</span>
    <span class="pl-c"># this when y &lt;= maxy. At y = maxy + 1 we can skip the check.</span>
    <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-s1">floor</span> <span class="pl-c1">or</span> <span class="pl-s1">y</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">maxy</span>:
        <span class="pl-s1">newy</span> <span class="pl-c1">=</span> <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>

        <span class="pl-k">for</span> <span class="pl-s1">newx</span> <span class="pl-c1">in</span> (<span class="pl-s1">x</span>, <span class="pl-s1">x</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>):
            <span class="pl-k">if</span> (<span class="pl-s1">newx</span>, <span class="pl-s1">newy</span>) <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">cave</span>:
                <span class="pl-k">if</span> <span class="pl-c1">not</span> <span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>, <span class="pl-s1">floor</span>, <span class="pl-s1">newx</span>, <span class="pl-s1">newy</span>):
                    <span class="pl-k">return</span> <span class="pl-c1">False</span>

    <span class="pl-s1">cave</span>.<span class="pl-en">add</span>((<span class="pl-s1">x</span>, <span class="pl-s1">y</span>))
    <span class="pl-k">return</span> <span class="pl-c1">True</span></pre></div>
<p dir="auto">Now we can solve both parts with single call to <code>pour_sand()</code>. To know the
number of settled sand units we can simply calculate the size of the <code>cave</code> set
before pouring the sand (when it only includes rocks) and after.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="rocks = len(cave)

pour_sand(cave, maxy)
sand = len(cave) - rocks
print('Part 1:', sand)

pour_sand(cave, maxy, True)
sand = len(cave) - rocks
print('Part 2:', sand)"><pre><span class="pl-s1">rocks</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">cave</span>)

<span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>)
<span class="pl-s1">sand</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">cave</span>) <span class="pl-c1">-</span> <span class="pl-s1">rocks</span>
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">sand</span>)

<span class="pl-en">pour_sand</span>(<span class="pl-s1">cave</span>, <span class="pl-s1">maxy</span>, <span class="pl-c1">True</span>)
<span class="pl-s1">sand</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">cave</span>) <span class="pl-c1">-</span> <span class="pl-s1">rocks</span>
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">sand</span>)</pre></div>
<p dir="auto">This was a fun one! Let's continue our journey...</p>
<h2 dir="auto"><a id="user-content-day-15---beacon-exclusion-zone" class="anchor" aria-hidden="true" href="#day-15---beacon-exclusion-zone"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 15 - Beacon Exclusion Zone</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/15" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day15.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-14" class="anchor" aria-hidden="true" href="#part-1-14"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Hmm bacon, yummy! Err, nope, sorry, it's <em>beacons</em> we have to deal with today.
We are in 2D space, dealing with integer coordinates only, and measuring
distances using <a href="https://en.wikipedia.org/wiki/Taxicab_geometry" rel="nofollow">Manhattan geometry</a>. We are given a list of
sensors as input: each sensor sits at a given <code>x,y</code> point in space, and knows
the position of its <em>closest</em> beacon, which is also given.</p>
<p dir="auto">For each sensor in our input, there cannot be any other beacons at a Manhattan
distance lower than the distance of the closest one, however, there could very
well be beacons farther away. Using this observation, we need to determine how
many integer coordinates with <code>y=2000000</code> are <em>invalid</em> beacon positions.</p>
<p dir="auto">Let's start by parsing the input. Each line is a rather long string from which
we should only extract four integers. Similarly to what we did for
<a href="#day-11---monkey-in-the-middle">day 11</a>, to make parsing simple, we can use the <a href="https://docs.python.org/3/library/re.html" rel="nofollow"><code>re</code></a> module and a
<a href="https://www.regular-expressions.info/" rel="nofollow">regular expression</a> that matches digits optionally preceded by a
minus sign, transforming each match into an integer with
<a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a>.</p>
<p dir="auto">We do not really care about the actual position of any beacon, but rather about
the distance from the sensor that detected them, so we'll just calculate the
Manhattan distance right away and save it for later.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import re

def manhattan(ax, ay, bx, by):
    return abs(ax - bx) + abs(ay - by)

exp = re.compile(r'-?\d+')
sensors = []

with open(...) as fin:
    for line in fin:
        sx, sy, bx, by = map(int, exp.findall(line))
        sensors.append((sx, sy, manhattan(sx, sy, bx, by)))"><pre><span class="pl-k">import</span> <span class="pl-s1">re</span>

<span class="pl-k">def</span> <span class="pl-en">manhattan</span>(<span class="pl-s1">ax</span>, <span class="pl-s1">ay</span>, <span class="pl-s1">bx</span>, <span class="pl-s1">by</span>):
    <span class="pl-k">return</span> <span class="pl-en">abs</span>(<span class="pl-s1">ax</span> <span class="pl-c1">-</span> <span class="pl-s1">bx</span>) <span class="pl-c1">+</span> <span class="pl-en">abs</span>(<span class="pl-s1">ay</span> <span class="pl-c1">-</span> <span class="pl-s1">by</span>)

<span class="pl-s1">exp</span> <span class="pl-c1">=</span> <span class="pl-s1">re</span>.<span class="pl-en">compile</span>(<span class="pl-s">r'-?\d+'</span>)
<span class="pl-s1">sensors</span> <span class="pl-c1">=</span> []

<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
        <span class="pl-s1">sx</span>, <span class="pl-s1">sy</span>, <span class="pl-s1">bx</span>, <span class="pl-s1">by</span> <span class="pl-c1">=</span> <span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">exp</span>.<span class="pl-en">findall</span>(<span class="pl-s1">line</span>))
        <span class="pl-s1">sensors</span>.<span class="pl-en">append</span>((<span class="pl-s1">sx</span>, <span class="pl-s1">sy</span>, <span class="pl-en">manhattan</span>(<span class="pl-s1">sx</span>, <span class="pl-s1">sy</span>, <span class="pl-s1">bx</span>, <span class="pl-s1">by</span>)))</pre></div>
<p dir="auto">The Manhattan distance we just calculated for each of the sensor we are dealing
is effectively their <em>detection radius</em>. Since we know the coordinates of each
sensor and the ones of its closest beacon, we also know that <em>there must be no
other beacon at a distance lower than this detection radius</em>. Since we are
working with Manhattan geometry, the area of detection will not be shaped like a
circle, but rather like a <em>diamond</em> (or well, a square rotated 45 degrees). For
example, a sensor at <code>3,0</code> that can see the closest beacon at <code>4,2</code> will have a
detection radius of <code>3</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  3     #
  2    ##B
  1   #####
Y 0  ###S###
 -1   #####
 -2    ###
 -3     #
     0123456
        X"><pre lang="none" class="notranslate"><code>  3     #
  2    ##B
  1   #####
Y 0  ###S###
 -1   #####
 -2    ###
 -3     #
     0123456
        X
</code></pre></div>
<p dir="auto">In the above example, apart from the point marked as <code>B</code>, we can be sure there
is no other beacon within the detection radius of the sensor, meaning no beacon
can be in any of the points marked as <code>#</code>.</p>
<p dir="auto">We are only interested in a single line at <code>y=2000000</code> though, and we want to
know how many spots are impossible positions for beacons. We can visualize this
as follows:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="                        .                           .
                       ...                         ...
                      .....                       .....
                     .......     .          .      ...
              .     .........   ...        ...      .
             ...     .......   .....      .....
            .....     .....   .......    .......
y=200000:  #######     ###     #####    #########
            .....       .       ...    ...........
             ...             .   .      .........
              .             ...          .......
                           .....          .....
                            ...            ...
                             .              ."><pre lang="none" class="notranslate"><code>                        .                           .
                       ...                         ...
                      .....                       .....
                     .......     .          .      ...
              .     .........   ...        ...      .
             ...     .......   .....      .....
            .....     .....   .......    .......
y=200000:  #######     ###     #####    #########
            .....       .       ...    ...........
             ...             .   .      .........
              .             ...          .......
                           .....          .....
                            ...            ...
                             .              .
</code></pre></div>
<p dir="auto">Out of all the diamonds "projected" by each sensor, some of them will intersect
with the <code>y=200000</code> line, and some will not. For those that do, we can easily
calculate the <code>x</code> coordinate of the start and end of the intersection. If the
<code>y</code> coordinate of the sensor is exactly <code>200000</code>, the length is exactly double
the intersection radius: from <code>sx - r</code> to <code>sx + r</code>. Otherwise, it will decrease
linearly with the distance from the <code>y=200000</code> line on both sides, and we'll
have a segment from <code>sx - r + dist</code> to <code>sx + r - dist</code>.</p>
<p dir="auto">Let's write a function to detect whether the diamond projected by a given sensor
intersects with <code>y=200000</code> and if so, also calculate its extremes:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def diamond_segment(sx, sy, r):
    dist = abs(2000000 - sy)

    if dist &lt;= r:
        return (sx - r + dist, sx + r - dist)
    return None"><pre><span class="pl-k">def</span> <span class="pl-en">diamond_segment</span>(<span class="pl-s1">sx</span>, <span class="pl-s1">sy</span>, <span class="pl-s1">r</span>):
    <span class="pl-s1">dist</span> <span class="pl-c1">=</span> <span class="pl-en">abs</span>(<span class="pl-c1">2000000</span> <span class="pl-c1">-</span> <span class="pl-s1">sy</span>)

    <span class="pl-k">if</span> <span class="pl-s1">dist</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">r</span>:
        <span class="pl-k">return</span> (<span class="pl-s1">sx</span> <span class="pl-c1">-</span> <span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-s1">dist</span>, <span class="pl-s1">sx</span> <span class="pl-c1">+</span> <span class="pl-s1">r</span> <span class="pl-c1">-</span> <span class="pl-s1">dist</span>)
    <span class="pl-k">return</span> <span class="pl-c1">None</span></pre></div>
<p dir="auto">We can now call the above function for all sensors, and collect the results that
are not <code>None</code>. This will give us a "raw" list of segments of the form
<code>(start, end)</code> where we know no beacon can be present. We can use
<a href="https://docs.python.org/3/library/itertools.html#itertools.starmap" rel="nofollow"><code>itertools.starmap()</code></a> to unpack the arguments correctly
(as we parsed the sensors into tuples of 3 elements). Then, we can filter those
that are <code>None</code> using the <a href="https://docs.python.org/3/library/functions.html#filter" rel="nofollow"><code>filter()</code></a> built-in.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from itertools import starmap

segments = list(filter(None, starmap(diamond_segment, sensors)))"><pre><span class="pl-k">from</span> <span class="pl-s1">itertools</span> <span class="pl-k">import</span> <span class="pl-s1">starmap</span>

<span class="pl-s1">segments</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-en">filter</span>(<span class="pl-c1">None</span>, <span class="pl-en">starmap</span>(<span class="pl-s1">diamond_segment</span>, <span class="pl-s1">sensors</span>)))</pre></div>
<p dir="auto">Cool. All that's left to do is sum up all the segment lengths, right? Wrong!
There's a small problem. We could be dealing with overlapping segments. Consider
for example the following scenario:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="                   .
                  ...
                 .....
              . .......
             ...........
            ...........
y=200000:  ######X####
            ..... ...
             ...   .
              ."><pre lang="none" class="notranslate"><code>                   .
                  ...
                 .....
              . .......
             ...........
            ...........
y=200000:  ######X####
            ..... ...
             ...   .
              .
</code></pre></div>
<p dir="auto">In the above example, simply summing up the length of each segment, we would be
over-counting the point marked as <code>X</code> because the segments from two diamonds
overlap there.</p>
<p dir="auto">To avoid such a situation, we can detect and merge overlapping and contiguous
segments into larger ones. We can do this by sorting the segments by their start
and then iterating over them, "accumulating" them into a larger segment until we
find a segment that is detached (i.e., it has start after the end of the current
merged segment).</p>
<p dir="auto">Sorting is just a matter of calling the <a href="https://docs.python.org/3/library/functions.html#sorted" rel="nofollow"><code>sorted()</code></a>
built-in. Then we can get an iterator over the sorted sequence with
<a href="https://docs.python.org/3/library/functions.html#iter" rel="nofollow"><code>iter()</code></a>, use <a href="https://docs.p%5Bd20-alt-deque%5D.ython.org/3/library/functions.html#next" rel="nofollow"><code>next()</code></a> to extract the
first segment, and finally iterate over the rest to join them. Each time a new
"detached" segment is encountered, we can add the length of the current merged
segment to the total, update the current start and end, and keep going. Let's
write a function to do all of this.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def invalid_spots(sensors):
    segments = iter(sorted(filter(None, starmap(diamond_segment, sensors))))
    start, end = next(segments) # Current &quot;merged&quot; segment
    total = 0

    for s, e in segments:
        if s &gt; end + 1:
            # This segment is detached from the current one: add current length
            # to the total and use this as new initial segment to merge into.
            total += end - start + 1
            start, end = s, e
        else:
            # This segment overlaps with the current one: keep its end and keep going.
            end = max(end, e)

    # Account for the last segment
    total += end - start + 1

    return total"><pre><span class="pl-k">def</span> <span class="pl-en">invalid_spots</span>(<span class="pl-s1">sensors</span>):
    <span class="pl-s1">segments</span> <span class="pl-c1">=</span> <span class="pl-en">iter</span>(<span class="pl-en">sorted</span>(<span class="pl-en">filter</span>(<span class="pl-c1">None</span>, <span class="pl-en">starmap</span>(<span class="pl-s1">diamond_segment</span>, <span class="pl-s1">sensors</span>))))
    <span class="pl-s1">start</span>, <span class="pl-s1">end</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">segments</span>) <span class="pl-c"># Current "merged" segment</span>
    <span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-k">for</span> <span class="pl-s1">s</span>, <span class="pl-s1">e</span> <span class="pl-c1">in</span> <span class="pl-s1">segments</span>:
        <span class="pl-k">if</span> <span class="pl-s1">s</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">end</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>:
            <span class="pl-c"># This segment is detached from the current one: add current length</span>
            <span class="pl-c"># to the total and use this as new initial segment to merge into.</span>
            <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-s1">end</span> <span class="pl-c1">-</span> <span class="pl-s1">start</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
            <span class="pl-s1">start</span>, <span class="pl-s1">end</span> <span class="pl-c1">=</span> <span class="pl-s1">s</span>, <span class="pl-s1">e</span>
        <span class="pl-k">else</span>:
            <span class="pl-c"># This segment overlaps with the current one: keep its end and keep going.</span>
            <span class="pl-s1">end</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-s1">end</span>, <span class="pl-s1">e</span>)

    <span class="pl-c"># Account for the last segment</span>
    <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-s1">end</span> <span class="pl-c1">-</span> <span class="pl-s1">start</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>

    <span class="pl-k">return</span> <span class="pl-s1">total</span></pre></div>
<p dir="auto">All that's left to do is call the above function!</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = invalid_spots(sensors)
print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">invalid_spots</span>(<span class="pl-s1">sensors</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<p dir="auto"><strong>But wait</strong>, what? The returned value seems wrong! Indeed, there is still one
thing we did not consider. If there <em>already is</em> any beacon detected on the
<code>y=200000</code> line, we should not count its spot as invalid. We could simply
subtract the number of beacons with <code>y=200000</code> from the total, but this won't
work, as multiple sensors could be detecting the same beacon, and we would be
over-counting them. Instead, we can use a <a href="https://docs.python.org/3/tutorial/datastructures.html#sets" rel="nofollow"><code>set</code></a> of <code>x</code> coordinates to
exclude for all the beacons that are on the target line.</p>
<p dir="auto">Let's modify the initial input-parsing code to also create this <code>set</code>:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content=" exp = re.compile(r'-?\d+')
 sensors = []
+beacons_on_target = set()

 with advent.get_input() as fin:
     for line in fin:
         sx, sy, bx, by = map(int, exp.findall(line))
         sensors.append((sx, sy, manhattan(sx, sy, bx, by)))
+
+        if by == 2000000:
+            beacons_on_target.add(bx)"><pre> exp = re.compile(r'-?\d+')
 sensors = []
<span class="pl-mi1"><span class="pl-mi1">+</span>beacons_on_target = set()</span>

 with advent.get_input() as fin:
     for line in fin:
         sx, sy, bx, by = map(int, exp.findall(line))
         sensors.append((sx, sy, manhattan(sx, sy, bx, by)))
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        if by == 2000000:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>            beacons_on_target.add(bx)</span></pre></div>
<p dir="auto">And we can finally calculate the correct answer:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = invalid_spots(sensors) - len(beacons_on_target)
print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">invalid_spots</span>(<span class="pl-s1">sensors</span>) <span class="pl-c1">-</span> <span class="pl-en">len</span>(<span class="pl-s1">beacons_on_target</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-14" class="anchor" aria-hidden="true" href="#part-2-14"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">For part 2 our task becomes harder: we are told there is exactly <em>one</em> valid
spot for a beacon with <em>X</em> and <em>Y</em> coordinates between <em>0</em> and <em>4000000</em>, and we
need to find it. Our answer will then be <code>4000000 * x + y</code>.</p>
<p dir="auto">Technically, we could implement a very simple soluion by modifying the
<code>diamond_segment()</code> function we wrote for part 1 and search from <code>y=0</code> to
<code>y=4000000</code> until we find a line where we have exactly <code>4000000</code> invalid points.
However, that's going to be just a little bit slow... so we better think of
another approach.</p>
<p dir="auto">Given what we discussed above for part 1, it should be clear enough that
wherever the magical spot we are looking for might be, it must be <em>outside</em> the
detection diamonds of all our sensors. There are however a few additional
observations we can make:</p>
<ul dir="auto">
<li>Since there is only <em>one</em> such spot, this also means that it will be
surrounded by invalid spots belonging to some detection diamonds.</li>
<li>Therefore, we can deduce that the spot we are looking for must be "touching"
the border of one or more detection diamonds.</li>
<li>Therefore, such a spot must be located at a distance of <code>radius + 1</code> from more
than one diamond.</li>
</ul>
<p dir="auto">Given the above observations, we can use the following strategy:</p>
<ul dir="auto">
<li>For each detection diamond, find the linear equation of the four lines that
are just outside its perimeter, at <code>radius + 1</code> (exactly one more unit away
than the real radius). These will be 4: one per side.</li>
<li>For every possible pair of diamonds, try intersecting those lines. If there is
any intersection, that point is a candidate for the magic spot we are looking
for.</li>
<li>Test any such candidate to check whether it is within the <em>[0, 4000000]</em> range
for both <em>X</em> and <em>Y</em>: the first one that does is the one we want.</li>
</ul>
<p dir="auto">The reason I am talking about <a href="https://en.wikipedia.org/wiki/Linear_equation" rel="nofollow"><em>linear equation</em></a> above is
that those are what is usually needed to find an intersection between two lines
in space. For a given "diamond", the linear equations for its four sides can be
easily calculated with the help of some pen and paper. Assuming that the center
(i.e. the sensor) is at <code>0,0</code> and the radius is <code>r</code>, we have 4 lines that form a
45-degree angle with both axes, with pretty simple equations.</p>
<p dir="auto">Here's an ASCII-art to illustrate this, with sides labeled <code>A</code>, <code>B</code>, <code>C</code>, <code>D</code> in
clockwise order for reference:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="y = x + r + 1       A/\B    y = -x + r + 1
                    /  \
                    \  /
y = -x - (r + 1)    D\/C    y = x - (r + 1)"><pre lang="none" class="notranslate"><code>y = x + r + 1       A/\B    y = -x + r + 1
                    /  \
                    \  /
y = -x - (r + 1)    D\/C    y = x - (r + 1)
</code></pre></div>
<p dir="auto">For a sensor at an arbitrary <code>sx,sy</code> position, we only need to apply a
<a href="https://en.wikipedia.org/wiki/Euclidean_plane_isometry#Translations" rel="nofollow">linear translation</a>.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="y - sy = x - sx + r + 1         A/\B    y - sy = -(x - sx) + r + 1
                                /  \
                                \  /
y - sy = -(x - sx) - (r + 1)    D\/C    y - sy = x - sx - (r + 1)"><pre lang="none" class="notranslate"><code>y - sy = x - sx + r + 1         A/\B    y - sy = -(x - sx) + r + 1
                                /  \
                                \  /
y - sy = -(x - sx) - (r + 1)    D\/C    y - sy = x - sx - (r + 1)
</code></pre></div>
<p dir="auto">Now, how do we plan on "storing" these equations? Let's look at them more
closely:</p>
<ul dir="auto">
<li>Side A: <em>y =  x - s<sub>x</sub> + s<sub>y</sub> + r + 1</em></li>
<li>Side B: <em>y = -x + s<sub>x</sub> + s<sub>y</sub> + r + 1</em></li>
<li>Side C: <em>y =  x - s<sub>x</sub> + s<sub>y</sub> - r - 1</em></li>
<li>Side D: <em>y = -x + s<sub>x</sub> + s<sub>y</sub> - r - 1</em></li>
</ul>
<p dir="auto">The parts we care about are those following the <em>x</em> variable in the above
equations. They are constants that depend on the sensor position (<code>sx,sy</code>) and
its detection radius. We can easily calculate them for every sensor. Let's write
a <a href="https://docs.python.org/3/howto/functional.html#generators" rel="nofollow">generator function</a> to do this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def sides(sx, sy, r):
    r += 1
    yield -sx + sy + r # a/\b  a: y =  x - sx + sy + r + 1
    yield  sx + sy + r # /  \  b: y = -x + sx + sy + r + 1
    yield -sx + sy - r # \  /  c: y =  x - sx + sy - r - 1
    yield  sx + sy - r # d\/c  d: y = -x + sx + sy - r - 1"><pre><span class="pl-k">def</span> <span class="pl-en">sides</span>(<span class="pl-s1">sx</span>, <span class="pl-s1">sy</span>, <span class="pl-s1">r</span>):
    <span class="pl-s1">r</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
    <span class="pl-k">yield</span> <span class="pl-c1">-</span><span class="pl-s1">sx</span> <span class="pl-c1">+</span> <span class="pl-s1">sy</span> <span class="pl-c1">+</span> <span class="pl-s1">r</span> <span class="pl-c"># a/\b  a: y =  x - sx + sy + r + 1</span>
    <span class="pl-k">yield</span>  <span class="pl-s1">sx</span> <span class="pl-c1">+</span> <span class="pl-s1">sy</span> <span class="pl-c1">+</span> <span class="pl-s1">r</span> <span class="pl-c"># /  \  b: y = -x + sx + sy + r + 1</span>
    <span class="pl-k">yield</span> <span class="pl-c1">-</span><span class="pl-s1">sx</span> <span class="pl-c1">+</span> <span class="pl-s1">sy</span> <span class="pl-c1">-</span> <span class="pl-s1">r</span> <span class="pl-c"># \  /  c: y =  x - sx + sy - r - 1</span>
    <span class="pl-k">yield</span>  <span class="pl-s1">sx</span> <span class="pl-c1">+</span> <span class="pl-s1">sy</span> <span class="pl-c1">-</span> <span class="pl-s1">r</span> <span class="pl-c"># d\/c  d: y = -x + sx + sy - r - 1</span></pre></div>
<p dir="auto">Now let's say we want to intersect the <code>A</code> side of a diamond with the <code>B</code> side
of a second one, we will have the following equations (where the constants
<em>a<sub>1</sub></em> and b<sub>2</sub> have already been calculated using the above
function):</p>
<ul dir="auto">
<li>Side A of diamond 1: <em>y = x + a<sub>1</sub></em></li>
<li>Side B of diamond 2: <em>y = -x + b<sub>2</sub></em></li>
</ul>
<p dir="auto">The intersection can be calculated as follows:</p>
<ul dir="auto">
<li><em>x + a<sub>1</sub> = -x + b<sub>2</sub></em></li>
<li><em>2x = b<sub>2</sub> - a<sub>1</sub></em></li>
<li><em>x = (b<sub>2</sub> - a<sub>1</sub>) / 2</em></li>
<li><em>y = x + a<sub>1</sub></em></li>
</ul>
<p dir="auto">We can now write a function to calculate the intersection given the two linear
equation constants:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def intersect(a, b):
    x = (b - a) // 2
    return x, x + a"><pre><span class="pl-k">def</span> <span class="pl-en">intersect</span>(<span class="pl-s1">a</span>, <span class="pl-s1">b</span>):
    <span class="pl-s1">x</span> <span class="pl-c1">=</span> (<span class="pl-s1">b</span> <span class="pl-c1">-</span> <span class="pl-s1">a</span>) <span class="pl-c1">//</span> <span class="pl-c1">2</span>
    <span class="pl-k">return</span> <span class="pl-s1">x</span>, <span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-s1">a</span></pre></div>
<p dir="auto">Using the above function, given any pair of diamonds, we can now calculate all
the possible intersections between pairs of their sides (or well, actually the
sides at <code>radius + 1</code>). We saw side <code>A</code> intersected with side <code>B</code> above. The
situation is analogous if we want to intersect side <code>A</code> and <code>D</code>, side <code>C</code> and
<code>B</code>, or side <code>C</code> and <code>D</code>: the only thing that changes is the order of the
operands in the subtraction. Additionally, it does not make sense to intersect
sides that are parallel to each other (e.g., <code>A</code> and <code>C</code>) because such an
intersection will either give infinite solutions (the two lines coincide) or no
solutions at all.</p>
<p dir="auto">Let's write another generator function for this. It will take two sensors,
extract the linear equation constants for the sides of their detection diamonds,
and calculate all possible candidate points as intersections of perpendicular
sides:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def candidates(s1, s2):
    a1, b1, c1, d1 = sides(*s1)
    a2, b2, c2, d2 = sides(*s2)
    yield intersect(a1, b2)
    yield intersect(a1, d2)
    yield intersect(c1, b2)
    yield intersect(c1, d2)
    yield intersect(a2, b1)
    yield intersect(a2, d1)
    yield intersect(c2, b1)
    yield intersect(c2, d1)"><pre><span class="pl-k">def</span> <span class="pl-en">candidates</span>(<span class="pl-s1">s1</span>, <span class="pl-s1">s2</span>):
    <span class="pl-s1">a1</span>, <span class="pl-s1">b1</span>, <span class="pl-s1">c1</span>, <span class="pl-s1">d1</span> <span class="pl-c1">=</span> <span class="pl-en">sides</span>(<span class="pl-c1">*</span><span class="pl-s1">s1</span>)
    <span class="pl-s1">a2</span>, <span class="pl-s1">b2</span>, <span class="pl-s1">c2</span>, <span class="pl-s1">d2</span> <span class="pl-c1">=</span> <span class="pl-en">sides</span>(<span class="pl-c1">*</span><span class="pl-s1">s2</span>)
    <span class="pl-k">yield</span> <span class="pl-en">intersect</span>(<span class="pl-s1">a1</span>, <span class="pl-s1">b2</span>)
    <span class="pl-k">yield</span> <span class="pl-en">intersect</span>(<span class="pl-s1">a1</span>, <span class="pl-s1">d2</span>)
    <span class="pl-k">yield</span> <span class="pl-en">intersect</span>(<span class="pl-s1">c1</span>, <span class="pl-s1">b2</span>)
    <span class="pl-k">yield</span> <span class="pl-en">intersect</span>(<span class="pl-s1">c1</span>, <span class="pl-s1">d2</span>)
    <span class="pl-k">yield</span> <span class="pl-en">intersect</span>(<span class="pl-s1">a2</span>, <span class="pl-s1">b1</span>)
    <span class="pl-k">yield</span> <span class="pl-en">intersect</span>(<span class="pl-s1">a2</span>, <span class="pl-s1">d1</span>)
    <span class="pl-k">yield</span> <span class="pl-en">intersect</span>(<span class="pl-s1">c2</span>, <span class="pl-s1">b1</span>)
    <span class="pl-k">yield</span> <span class="pl-en">intersect</span>(<span class="pl-s1">c2</span>, <span class="pl-s1">d1</span>)</pre></div>
<p dir="auto">We have almost all we need to solve the problem. The final function we'll write
will find the magic spot for the missing (undetected) beacon by computing all
possible candidate points as intersections between parallel sides of any pair of
diamonds and checking their validity. To check the validity of a candidate
point, we need to ensure its coordinates are within <code>0</code> and <code>4000000</code>, and that
it is outside of all the detection diamonds of our sensors.</p>
<p dir="auto">We'll use <a href="https://docs.python.org/3/library/itertools.html#itertools.combinations" rel="nofollow"><code>itertools.combinations()</code></a> to iterate
over unique pairs of sensors. If a candidate point has coordinate within range,
we'll check that the manhattan distance between the point and any sensor is
greater than its detection radius, which can be done with
<a href="https://docs.python.org/3/library/functions.html#all" rel="nofollow"><code>all()</code></a> plus a <a href="https://www.python.org/dev/peps/pep-0289/" rel="nofollow">generator expression</a>. The
first candidate satisfying these conditions is the magic beacon spot we are
looking for.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from itertools import combinations

def missing_beacon(sensors):
    # For all unique pairs of different sensors
    for s1, s2 in combinations(sensors, 2):
        # Intersect the perpendicular sides of their detection diamonds (at radius + 1)
        for x, y in candidates(s1, s2):
            # Ensure the solution is within range
            if x &lt; 0 or x &gt; 4000000 or y &lt; 0 or y &gt; 4000000:
                continue

            # Ensure the solution is outside the detection diamond of all sensors
            if all(manhattan(sx, sy, x, y) &gt; r for sx, sy, r in sensors):
                return x, y"><pre><span class="pl-k">from</span> <span class="pl-s1">itertools</span> <span class="pl-k">import</span> <span class="pl-s1">combinations</span>

<span class="pl-k">def</span> <span class="pl-en">missing_beacon</span>(<span class="pl-s1">sensors</span>):
    <span class="pl-c"># For all unique pairs of different sensors</span>
    <span class="pl-k">for</span> <span class="pl-s1">s1</span>, <span class="pl-s1">s2</span> <span class="pl-c1">in</span> <span class="pl-en">combinations</span>(<span class="pl-s1">sensors</span>, <span class="pl-c1">2</span>):
        <span class="pl-c"># Intersect the perpendicular sides of their detection diamonds (at radius + 1)</span>
        <span class="pl-k">for</span> <span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">in</span> <span class="pl-en">candidates</span>(<span class="pl-s1">s1</span>, <span class="pl-s1">s2</span>):
            <span class="pl-c"># Ensure the solution is within range</span>
            <span class="pl-k">if</span> <span class="pl-s1">x</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">0</span> <span class="pl-c1">or</span> <span class="pl-s1">x</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">4000000</span> <span class="pl-c1">or</span> <span class="pl-s1">y</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">0</span> <span class="pl-c1">or</span> <span class="pl-s1">y</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">4000000</span>:
                <span class="pl-k">continue</span>

            <span class="pl-c"># Ensure the solution is outside the detection diamond of all sensors</span>
            <span class="pl-k">if</span> <span class="pl-en">all</span>(<span class="pl-en">manhattan</span>(<span class="pl-s1">sx</span>, <span class="pl-s1">sy</span>, <span class="pl-s1">x</span>, <span class="pl-s1">y</span>) <span class="pl-c1">&gt;</span> <span class="pl-s1">r</span> <span class="pl-k">for</span> <span class="pl-s1">sx</span>, <span class="pl-s1">sy</span>, <span class="pl-s1">r</span> <span class="pl-c1">in</span> <span class="pl-s1">sensors</span>):
                <span class="pl-k">return</span> <span class="pl-s1">x</span>, <span class="pl-s1">y</span></pre></div>
<p dir="auto">Finally, we can calculate the answer:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="x, y = missing_beacon(sensors)
answer = x * 4000000 + y
print('Part 2:', answer)"><pre><span class="pl-s1">x</span>, <span class="pl-s1">y</span> <span class="pl-c1">=</span> <span class="pl-en">missing_beacon</span>(<span class="pl-s1">sensors</span>)
<span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-s1">x</span> <span class="pl-c1">*</span> <span class="pl-c1">4000000</span> <span class="pl-c1">+</span> <span class="pl-s1">y</span>
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-16---proboscidea-volcanium" class="anchor" aria-hidden="true" href="#day-16---proboscidea-volcanium"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 16 - Proboscidea Volcanium</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/16" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day16.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-15" class="anchor" aria-hidden="true" href="#part-1-15"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">We are inside a volcano that is about to erupt, and we want to stop it. We can
control the internal pressure of the volcano by means of a series of <a href="https://en.wikipedia.org/wiki/Relief_valve" rel="nofollow">pressure
relief valves</a> connected together in a network of pipes. All
valves start closed, and each one will release a given amount of pressure per
minute if opened. Opening a valve takes 1 minute, and traveling from a valve to
another that is connected to it also takes 1 minute. We initially start at the
valve with identifier <code>AA</code> and have 30 minutes until the volcano erupts, and we
want to maximize the total amount of pressure to relieve during this time.</p>
<p dir="auto">It's clear from the problem statement that what we are dealing with is an
undirected <a href="https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)" rel="nofollow">graph</a>, where the nodes are valves and the edges are the
pipes connecting them. What we essentially want to do is find the best "path" of
actions that take at most 30 mintues and give the best total pressure release
possible.</p>
<p dir="auto">Let's parse the input into a graph structure then. I will use a dictionary of
lists for this purpose. A <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow"><code>defaultdict</code></a> comes in
handy as usual in these cases, so that we don't have to check whether a key is
already present or not. The lines of input are a bit annoying to parse, but if
we simply <a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow"><code>.split()</code></a> each one on whitespace one we'll notice
that the second field contains the name of a valve, and the fifth contains its
"pressure released per minute". Fields from the 10th onwards contain other
valves connected to the first one: we can use <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> with a
<a href="https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions" rel="nofollow"><code>lambda</code></a> to easily extract those by <a href="https://docs.python.org/3/library/stdtypes.html#str.strip" rel="nofollow"><code>.strip()</code></a>ping
away commas where needed.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="rates = {}
graph = defaultdict(list)

with open(...) as fin:
    for fields in map(str.split, fin):
        src  = fields[1]                                      # name of this valve
        dsts = list(map(lambda x: x.rstrip(','), fields[9:])) # valves connected to it
        rate = int(fields[4][5:-1])                           # pressure release rate (per minute)

        rates[src] = rate

        for dst in dsts:
            graph[src].append(dst)"><pre><span class="pl-s1">rates</span> <span class="pl-c1">=</span> {}
<span class="pl-s1">graph</span> <span class="pl-c1">=</span> <span class="pl-en">defaultdict</span>(<span class="pl-s1">list</span>)

<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">fields</span> <span class="pl-c1">in</span> <span class="pl-en">map</span>(<span class="pl-s1">str</span>.<span class="pl-s1">split</span>, <span class="pl-s1">fin</span>):
        <span class="pl-s1">src</span>  <span class="pl-c1">=</span> <span class="pl-s1">fields</span>[<span class="pl-c1">1</span>]                                      <span class="pl-c"># name of this valve</span>
        <span class="pl-s1">dsts</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-en">map</span>(<span class="pl-k">lambda</span> <span class="pl-s1">x</span>: <span class="pl-s1">x</span>.<span class="pl-en">rstrip</span>(<span class="pl-s">','</span>), <span class="pl-s1">fields</span>[<span class="pl-c1">9</span>:])) <span class="pl-c"># valves connected to it</span>
        <span class="pl-s1">rate</span> <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">fields</span>[<span class="pl-c1">4</span>][<span class="pl-c1">5</span>:<span class="pl-c1">-</span><span class="pl-c1">1</span>])                           <span class="pl-c"># pressure release rate (per minute)</span>

        <span class="pl-s1">rates</span>[<span class="pl-s1">src</span>] <span class="pl-c1">=</span> <span class="pl-s1">rate</span>

        <span class="pl-k">for</span> <span class="pl-s1">dst</span> <span class="pl-c1">in</span> <span class="pl-s1">dsts</span>:
            <span class="pl-s1">graph</span>[<span class="pl-s1">src</span>].<span class="pl-en">append</span>(<span class="pl-s1">dst</span>)</pre></div>
<p dir="auto">The <code>graph</code> dictionary we just created is of the form <code>{valve: [&lt;connected valves&gt;...]}</code>, so doing <code>graph['AA']</code> will give us the list of graph nodes
adjacent to the valve named <code>'AA'</code>. Additionally, the <code>rates</code> dictionary, kept
separate from <code>graph</code> for simplicity, will tell us what's the pressure release
rate of any valve.</p>
<p dir="auto">There are several ways to solve the problem: most notably, this problem is a
good candidate for a <a href="https://en.wikipedia.org/wiki/Dynamic_programming" rel="nofollow">dynamic programming</a>. This is the solution I
initially had in mind (but miserably failed to implement for whatever reason)
and also the one that a lot of other people used. The first instinctive thought
however when reading such a problem would be: can we brute-force the solution?
Well, as it turns out, <em>yes</em>, almost, if we are smart about it.</p>
<p dir="auto">The first thing to usually do to brute-force something is understand what's the
space of the solutions we are looking to brute-force. We can represent a
solution as a dictionary of the form <code>{valve_id: time_of_release}</code>, which
contains all the valves we decided to open and the time at which they were
opened. Better yet, <code>{valve_id: time_remaining}</code> where <code>time_remaining</code> is the
amount of minutes remaining before the volcano erupts: this is much nicer since
the total pressure release of a valve can then simply be computed as
<code>rates[valve_id] * time_remaining</code>. Summing this up for all the valves in a
given solution will yield the total pressure release of the solution (i.e. the
value whose maximum we are looking for).</p>
<p dir="auto">Let's implement a function to calculate the score of a solution:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def score(rates, chosen_valves):
    tot = 0
    for valve, time_left in chosen_valves.items():
        tot += rates[valve] * time_left
    return tot"><pre><span class="pl-k">def</span> <span class="pl-en">score</span>(<span class="pl-s1">rates</span>, <span class="pl-s1">chosen_valves</span>):
    <span class="pl-s1">tot</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
    <span class="pl-k">for</span> <span class="pl-s1">valve</span>, <span class="pl-s1">time_left</span> <span class="pl-c1">in</span> <span class="pl-s1">chosen_valves</span>.<span class="pl-en">items</span>():
        <span class="pl-s1">tot</span> <span class="pl-c1">+=</span> <span class="pl-s1">rates</span>[<span class="pl-s1">valve</span>] <span class="pl-c1">*</span> <span class="pl-s1">time_left</span>
    <span class="pl-k">return</span> <span class="pl-s1">tot</span></pre></div>
<p dir="auto">How can we enumerate all the possible solutions (i.e. choices of valves to open
and when)? In order to choose a set of valves, we need to also make sure we do
not exceed the 30 minutes time limit, and therefore the path taken to choose a
given set of valves to open is very important. Clearly, it doesn't make sense to
loop around and waste time, so ideally we would want to follow the shortest
possible path between any pair of valves.</p>
<p dir="auto">Say we want to choose valves <code>AA</code> and <code>XX</code>, but they are <em>not</em> directly
connected to each other: we'd need to find the shortest path from <code>AA</code> to <code>XX</code>.
In order to enumerate all valid solutions we will need to perform this action an
awful lot of times! Thankfully, there's an algorithm that can help us. The
<a href="https://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm" rel="nofollow">Floyd-Warshall</a> algorithm does exactly what we need: it
calculates the minimum distance between any possible pair of nodes of a given
graph. In our case, since all the arcs of the graph have the same weight, this
would be equivalent to performing a <a href="https://en.wikipedia.org/wiki/Breadth-first_search" rel="nofollow">BFS</a> scan starting from every
single node and saving all the distances found, so that could also be
implemented instead.</p>
<p dir="auto">I'll be using standard Floyd-Warshall, implemented as a function returning a
dictionary of dictionaries of the form <code>{a: {b: dist, ...}, ...}</code>. I'm not going
to copy-paste my implementation here as it's nothing special (check it out in
<a href="/mebeim/aoc/blob/master/2022/solutions/day16.py">the full solution</a> if you need), let's just say that we have a
<code>floyd_warshall()</code> function that returns what we need.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="distance = floyd_warshall(graph)
# distance['AA']['BB'] -&gt; minimum distance from valve AA to BB"><pre><span class="pl-s1">distance</span> <span class="pl-c1">=</span> <span class="pl-en">floyd_warshall</span>(<span class="pl-s1">graph</span>)
<span class="pl-c"># distance['AA']['BB'] -&gt; minimum distance from valve AA to BB</span></pre></div>
<p dir="auto">The minimum distance from one valve to another represents the time it takes to
travel between the two. Now that we have all the distances between any pair of
valves, it's easy to know how much it'd cost to choose an arbitrary valve at any
point in time.</p>
<p dir="auto">Now we can start enumerating all the possible solutions as choices of valves
that respect the timing constraint. One simple way to do it is through
<a href="https://en.wikipedia.org/wiki/Depth-first_search" rel="nofollow">depth-first search</a>, starting from valve <code>AA</code>.</p>
<ol dir="auto">
<li>Start at <code>AA</code> with <code>30</code> minutes remaining and no valves chosen.</li>
<li>For each of the valves we did not already choose: try choosing it. Choosing
a valve means spending some time traveling to it (which we already calculated
for all pairs of valves), plus 1 minute to open it.</li>
<li>Make a recursive call with the updated remaining time, valves to choose from
and valves chosen. Save the returned choices to return them later.</li>
</ol>
<p dir="auto">As already said, we'll keep track of the valves chosen to be released through a
dictionary <code>{valve: time_of_release}</code>, and return value of our function will be
a list of dictionaries representing the currently chosen valves along with all
the other possibilities of chosen valves explored by deeper recursive calls.</p>
<p dir="auto">Here's the commented code to do this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def solutions(distance, rates, valves, time=30, cur='AA', chosen={}):
    res = [chosen]

    # We can't reach any other valve in less than 2m, as it would take minimum
    # 1m to reach it plus 1m to open it, and therefore it'd be stay open for 0m.
    if time &lt; 2:
        return res

    # For all the valves we can currently choose
    for nxt in valves:
        # Choosing this valve will take distance[cur][nxt] to reach it, plus 1m to open it
        new_time   = time - (distance[cur][nxt] + 1)
        # Choose this valve, it will stay open exactly for new_time (i.e. the time
        # we have now minus the time it takes to reach and open it).
        new_chosen = chosen | {nxt: new_time}
        # The new valves to choose from will not include this one
        new_valves = valves - {nxt}
        # Collect all possible choices having taken this valve
        res += solutions(distance, rates, new_valves, new_time, nxt, new_chosen)

    return res"><pre><span class="pl-k">def</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">valves</span>, <span class="pl-s1">time</span><span class="pl-c1">=</span><span class="pl-c1">30</span>, <span class="pl-s1">cur</span><span class="pl-c1">=</span><span class="pl-s">'AA'</span>, <span class="pl-s1">chosen</span><span class="pl-c1">=</span>{}):
    <span class="pl-s1">res</span> <span class="pl-c1">=</span> [<span class="pl-s1">chosen</span>]

    <span class="pl-c"># We can't reach any other valve in less than 2m, as it would take minimum</span>
    <span class="pl-c"># 1m to reach it plus 1m to open it, and therefore it'd be stay open for 0m.</span>
    <span class="pl-k">if</span> <span class="pl-s1">time</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">2</span>:
        <span class="pl-k">return</span> <span class="pl-s1">res</span>

    <span class="pl-c"># For all the valves we can currently choose</span>
    <span class="pl-k">for</span> <span class="pl-s1">nxt</span> <span class="pl-c1">in</span> <span class="pl-s1">valves</span>:
        <span class="pl-c"># Choosing this valve will take distance[cur][nxt] to reach it, plus 1m to open it</span>
        <span class="pl-s1">new_time</span>   <span class="pl-c1">=</span> <span class="pl-s1">time</span> <span class="pl-c1">-</span> (<span class="pl-s1">distance</span>[<span class="pl-s1">cur</span>][<span class="pl-s1">nxt</span>] <span class="pl-c1">+</span> <span class="pl-c1">1</span>)
        <span class="pl-c"># Choose this valve, it will stay open exactly for new_time (i.e. the time</span>
        <span class="pl-c"># we have now minus the time it takes to reach and open it).</span>
        <span class="pl-s1">new_chosen</span> <span class="pl-c1">=</span> <span class="pl-s1">chosen</span> <span class="pl-c1">|</span> {<span class="pl-s1">nxt</span>: <span class="pl-s1">new_time</span>}
        <span class="pl-c"># The new valves to choose from will not include this one</span>
        <span class="pl-s1">new_valves</span> <span class="pl-c1">=</span> <span class="pl-s1">valves</span> <span class="pl-c1">-</span> {<span class="pl-s1">nxt</span>}
        <span class="pl-c"># Collect all possible choices having taken this valve</span>
        <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">new_valves</span>, <span class="pl-s1">new_time</span>, <span class="pl-s1">nxt</span>, <span class="pl-s1">new_chosen</span>)

    <span class="pl-k">return</span> <span class="pl-s1">res</span></pre></div>
<p dir="auto">Now the above <code>solutions()</code> function will return <em>all possible combinations</em> of
valves that we can open in under 30 minutes, along with the amount of time each
one will stay open. There are a couple of optimizations to be made though.</p>
<p dir="auto">First of all, let's convert it into a <a href="https://docs.python.org/3/howto/functional.html#generators" rel="nofollow">generator</a>. Lists are
slow to work with, especially when you have a lot of them. This is very simple,
all we need to do is <code>yield</code> each possible choice as soon as we get ahold of it
instead of accumulating them in a list:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def solutions(distance, rates, valves, time=30, cur='AA', chosen={}):
    yield chosen

    if time &lt; 2:
        return

    for nxt in valves:
        new_time   = time - (distance[cur][nxt] + 1)
        new_chosen = chosen | {nxt: new_time}
        new_valves = valves - {nxt}
        yield from solutions(distance, rates, new_valves, new_time, nxt, new_chosen)"><pre><span class="pl-k">def</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">valves</span>, <span class="pl-s1">time</span><span class="pl-c1">=</span><span class="pl-c1">30</span>, <span class="pl-s1">cur</span><span class="pl-c1">=</span><span class="pl-s">'AA'</span>, <span class="pl-s1">chosen</span><span class="pl-c1">=</span>{}):
    <span class="pl-k">yield</span> <span class="pl-s1">chosen</span>

    <span class="pl-k">if</span> <span class="pl-s1">time</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">2</span>:
        <span class="pl-k">return</span>

    <span class="pl-k">for</span> <span class="pl-s1">nxt</span> <span class="pl-c1">in</span> <span class="pl-s1">valves</span>:
        <span class="pl-s1">new_time</span>   <span class="pl-c1">=</span> <span class="pl-s1">time</span> <span class="pl-c1">-</span> (<span class="pl-s1">distance</span>[<span class="pl-s1">cur</span>][<span class="pl-s1">nxt</span>] <span class="pl-c1">+</span> <span class="pl-c1">1</span>)
        <span class="pl-s1">new_chosen</span> <span class="pl-c1">=</span> <span class="pl-s1">chosen</span> <span class="pl-c1">|</span> {<span class="pl-s1">nxt</span>: <span class="pl-s1">new_time</span>}
        <span class="pl-s1">new_valves</span> <span class="pl-c1">=</span> <span class="pl-s1">valves</span> <span class="pl-c1">-</span> {<span class="pl-s1">nxt</span>}
        <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">new_valves</span>, <span class="pl-s1">new_time</span>, <span class="pl-s1">nxt</span>, <span class="pl-s1">new_chosen</span>)</pre></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="valves = set(graph.keys())

for choice in solutions(distance, rates, valves):
    pass # calculate max score"><pre><span class="pl-s1">valves</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>(<span class="pl-s1">graph</span>.<span class="pl-en">keys</span>())

<span class="pl-k">for</span> <span class="pl-s1">choice</span> <span class="pl-c1">in</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">valves</span>):
    <span class="pl-k">pass</span> <span class="pl-c"># calculate max score</span></pre></div>
<p dir="auto">Now, the above works fine, however it's very slow. The function does not even
seem to terminate soon. Indeed, even for the small example input we have, it
generates over <em>9 million</em> possible solutions. We can reduce this number by a
lot if we notice one very important thing: <strong>there seem to be a lot of valves
with a pressure release rate of <em>zero</em> in our input</strong>. It is pointless to open
any of them, since they will contribute nothing and only make us waste time to
reach them. We can therefore avoid them. If we pass a <code>valves</code> set that excludes
them, the number of possible choices for each recursive call (<code>for nxt in valves</code>) will be greatly reduced, which will in turn exponentially decrease the
total number of solutions returned.</p>
<p dir="auto">We can use <a href="https://docs.python.org/3/library/functions.html#filter" rel="nofollow"><code>filter</code></a> and the rates in the <code>rates</code> dictionary
to exclude useless valves, and re-perform the call:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="good = set(filter(rates.get, graph.keys()))

for choice in solutions(distance, rates, good):
    pass # calculate max score"><pre><span class="pl-s1">good</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>(<span class="pl-en">filter</span>(<span class="pl-s1">rates</span>.<span class="pl-s1">get</span>, <span class="pl-s1">graph</span>.<span class="pl-en">keys</span>()))

<span class="pl-k">for</span> <span class="pl-s1">choice</span> <span class="pl-c1">in</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">good</span>):
    <span class="pl-k">pass</span> <span class="pl-c"># calculate max score</span></pre></div>
<p dir="auto">And finally, another important optimization to make is avoiding unnecessary
recursive calls when we already know the remaining time we are passing is not
enough to open any other valve. This means moving the <code>time &lt; 2</code> check inside
the loop:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content=" def solutions(distance, rates, valves, time=30, cur='AA', chosen={}):
-    yield chosen
-
-    if time &lt; 2:
-        return
-
     for nxt in valves:
         new_time   = time - (distance[cur][nxt] + 1)
+        if new_time &lt; 2:
+            continue
+
         new_chosen = chosen | {nxt: new_time}
         new_valves = valves - {nxt}
         yield from solutions(distance, rates, new_valves, new_time, nxt, new_chosen)
+
+    yield chosen"><pre> def solutions(distance, rates, valves, time=30, cur='AA', chosen={}):
<span class="pl-md"><span class="pl-md">-</span>    yield chosen</span>
<span class="pl-md"><span class="pl-md">-</span></span>
<span class="pl-md"><span class="pl-md">-</span>    if time &lt; 2:</span>
<span class="pl-md"><span class="pl-md">-</span>        return</span>
<span class="pl-md"><span class="pl-md">-</span></span>
     for nxt in valves:
         new_time   = time - (distance[cur][nxt] + 1)
<span class="pl-mi1"><span class="pl-mi1">+</span>        if new_time &lt; 2:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>            continue</span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
         new_chosen = chosen | {nxt: new_time}
         new_valves = valves - {nxt}
         yield from solutions(distance, rates, new_valves, new_time, nxt, new_chosen)
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    yield chosen</span></pre></div>
<p dir="auto">We have all we need to get the answer now:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="best = 0
for choice in solutions(distance, rates, valves):
    cur = score(rates, choice)
    if cur &gt; best:
        best = cur"><pre><span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-k">for</span> <span class="pl-s1">choice</span> <span class="pl-c1">in</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">valves</span>):
    <span class="pl-s1">cur</span> <span class="pl-c1">=</span> <span class="pl-en">score</span>(<span class="pl-s1">rates</span>, <span class="pl-s1">choice</span>)
    <span class="pl-k">if</span> <span class="pl-s1">cur</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">best</span>:
        <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-s1">cur</span></pre></div>
<p dir="auto">And since all we are doing is calculating a maximum, we can use <code>max()</code> plus a
generator expression for it:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="best = max(score(rates, s) for s in solutions(distance, rates, good))
print('Part 1:', best)"><pre><span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-en">score</span>(<span class="pl-s1">rates</span>, <span class="pl-s1">s</span>) <span class="pl-k">for</span> <span class="pl-s1">s</span> <span class="pl-c1">in</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">good</span>))
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">best</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-15" class="anchor" aria-hidden="true" href="#part-2-15"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">For the second part of today's problem, we are told that now we work in <em>two</em> at
the same problem. Both "players" move together, and the total time is now 26
minutes instead of 30. The answer we need to find is the same.</p>
<p dir="auto">Okay... clearly the fact that we have two players means that they are going to
open different valves, since a valve cannot be opened twice. Therefore, at least
in theory, all we would need to do is try every possible combination of two
solutions that do not have valves in common, more or less like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="sols = list(solutions(distance, rates, good, 26))
best = 0

for s1 in sols:
    for s2 in sols:
        if ...: # s1 and s2 do not have valves in common
            cur = score(rates, s1) + score(rates, s2)
            if cur &gt; best:
                best = cur"><pre><span class="pl-s1">sols</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">good</span>, <span class="pl-c1">26</span>))
<span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">s1</span> <span class="pl-c1">in</span> <span class="pl-s1">sols</span>:
    <span class="pl-k">for</span> <span class="pl-s1">s2</span> <span class="pl-c1">in</span> <span class="pl-s1">sols</span>:
        <span class="pl-k">if</span> ...: <span class="pl-c"># s1 and s2 do not have valves in common</span>
            <span class="pl-s1">cur</span> <span class="pl-c1">=</span> <span class="pl-en">score</span>(<span class="pl-s1">rates</span>, <span class="pl-s1">s1</span>) <span class="pl-c1">+</span> <span class="pl-en">score</span>(<span class="pl-s1">rates</span>, <span class="pl-s1">s2</span>)
            <span class="pl-k">if</span> <span class="pl-s1">cur</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">best</span>:
                <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-s1">cur</span></pre></div>
<p dir="auto">However... <code>len(sols)</code> for our input is <code>18676</code>, and a double nested <code>for</code> loop
means 18676<sup>2</sup> = ~350 million solutions to test (half of that in
theory, since we do not care about the order of <code>s1</code> and <code>s2</code>, but still). That
is... a bit too much. We need to somehow find another simplification.</p>
<p dir="auto">There are a lot of solutions, but we know that only <em>some</em> among them will
achieve the maximum score. What about among <em>all the solutions that involve the
same valves?</em> Well, given a set of valves to open, there will be a lot of
different possible orders in which to open them... however, analogously, only
<em>some</em> among them will yield the maximum score, therefore only a single maximum
score <em>per subset of chosen valves</em> is possible.</p>
<p dir="auto">We can iterate over the solutions for a single player once and pre-calculate the
maximum score possible for any given set of valves to open (regardless of the
order in which they are opened). Let's do this using a dictionary, more
precisely a <code>defaultdict</code> of <code>int</code> for commodity. The "key" to remember will be
the set of valves in a given solution. We cannot use a <code>set</code> as key since it is
mutable, but we can use a <code>frezenset</code> (the immutable variant of a <code>set</code>).</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="maxscore = defaultdict(int)

for solution in solutions(distance, rates, good, 26):
    k = frozenset(choice)
    s = score(rates, choice)

    if s &gt; maxscore[k]:
        maxscore[k] = s"><pre><span class="pl-s1">maxscore</span> <span class="pl-c1">=</span> <span class="pl-en">defaultdict</span>(<span class="pl-s1">int</span>)

<span class="pl-k">for</span> <span class="pl-s1">solution</span> <span class="pl-c1">in</span> <span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">good</span>, <span class="pl-c1">26</span>):
    <span class="pl-s1">k</span> <span class="pl-c1">=</span> <span class="pl-en">frozenset</span>(<span class="pl-s1">choice</span>)
    <span class="pl-s1">s</span> <span class="pl-c1">=</span> <span class="pl-en">score</span>(<span class="pl-s1">rates</span>, <span class="pl-s1">choice</span>)

    <span class="pl-k">if</span> <span class="pl-s1">s</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">maxscore</span>[<span class="pl-s1">k</span>]:
        <span class="pl-s1">maxscore</span>[<span class="pl-s1">k</span>] <span class="pl-c1">=</span> <span class="pl-s1">s</span></pre></div>
<p dir="auto">Now <code>maxscore[set_of_valves]</code> will hold the maximum possible score attainable by
opening <code>set_of_valves</code>, irrespective of the order they are opened. The size of
this dictionary is a lot smaller than the number of different solutions returned
by <code>solutions()</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="print(len(list(solutions(distance, rates, good, 26)))) # 18676
print(len(maxscore)) # 2342"><pre><span class="pl-en">print</span>(<span class="pl-en">len</span>(<span class="pl-en">list</span>(<span class="pl-en">solutions</span>(<span class="pl-s1">distance</span>, <span class="pl-s1">rates</span>, <span class="pl-s1">good</span>, <span class="pl-c1">26</span>)))) <span class="pl-c"># 18676</span>
<span class="pl-en">print</span>(<span class="pl-en">len</span>(<span class="pl-s1">maxscore</span>)) <span class="pl-c"># 2342</span></pre></div>
<p dir="auto">Iterating over all possible pairs of solutions, we can then discard those that
have common keys (since as we already said both players cannot open the same
valve), and calculate the maximum of the scores of the remaining ones:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="best = 0

for s1, score1 in maxscore.items():
    for s2, score2 in maxscore.items():
        if len(s1 &amp; s2) == 0: # a &amp; b == intersection of the sets a and b
            continue

        cur = score1 + score2
        if cur &gt; best:
            best = cur"><pre><span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">s1</span>, <span class="pl-s1">score1</span> <span class="pl-c1">in</span> <span class="pl-s1">maxscore</span>.<span class="pl-en">items</span>():
    <span class="pl-k">for</span> <span class="pl-s1">s2</span>, <span class="pl-s1">score2</span> <span class="pl-c1">in</span> <span class="pl-s1">maxscore</span>.<span class="pl-en">items</span>():
        <span class="pl-k">if</span> <span class="pl-en">len</span>(<span class="pl-s1">s1</span> <span class="pl-c1">&amp;</span> <span class="pl-s1">s2</span>) <span class="pl-c1">==</span> <span class="pl-c1">0</span>: <span class="pl-c"># a &amp; b == intersection of the sets a and b</span>
            <span class="pl-k">continue</span>

        <span class="pl-s1">cur</span> <span class="pl-c1">=</span> <span class="pl-s1">score1</span> <span class="pl-c1">+</span> <span class="pl-s1">score2</span>
        <span class="pl-k">if</span> <span class="pl-s1">cur</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">best</span>:
            <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-s1">cur</span></pre></div>
<p dir="auto">We are doing a bit too many iterations as we don't care about the order of <code>a</code>
and <code>b</code>. We can use <a href="https://docs.python.org/3/library/itertools.html#itertools.combinations" rel="nofollow"><code>itertools.combinations()</code></a> to
iterate over all possible pairs without taking the order into account:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from itertools import combinations

best = 0

for (s1, score1), (s2, score2) in combinations(maxscore.items(), 2):
    if len(s1 &amp; s2) == 0:
        continue

    cur = score1 + score2
    if cur &gt; best:
        best = cur

print('Part 2:', best)"><pre><span class="pl-k">from</span> <span class="pl-s1">itertools</span> <span class="pl-k">import</span> <span class="pl-s1">combinations</span>

<span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> (<span class="pl-s1">s1</span>, <span class="pl-s1">score1</span>), (<span class="pl-s1">s2</span>, <span class="pl-s1">score2</span>) <span class="pl-c1">in</span> <span class="pl-en">combinations</span>(<span class="pl-s1">maxscore</span>.<span class="pl-en">items</span>(), <span class="pl-c1">2</span>):
    <span class="pl-k">if</span> <span class="pl-en">len</span>(<span class="pl-s1">s1</span> <span class="pl-c1">&amp;</span> <span class="pl-s1">s2</span>) <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
        <span class="pl-k">continue</span>

    <span class="pl-s1">cur</span> <span class="pl-c1">=</span> <span class="pl-s1">score1</span> <span class="pl-c1">+</span> <span class="pl-s1">score2</span>
    <span class="pl-k">if</span> <span class="pl-s1">cur</span> <span class="pl-c1">&gt;</span> <span class="pl-s1">best</span>:
        <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-s1">cur</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">best</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-18---boiling-boulders" class="anchor" aria-hidden="true" href="#day-18---boiling-boulders"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 18 - Boiling Boulders</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/18" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day18.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-16" class="anchor" aria-hidden="true" href="#part-1-16"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Today we are dealing with 3D space and cubes. We are given a list of <code>x,y,z</code>
coordinates, each one representing a unit cube (1x1x1) in space, and we want to
find out how many faces in total do not touch other cubes.</p>
<p dir="auto">Let's start by quickly parsing the input. We have lines of integers separated by
commas, so just <a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow"><code>.split()</code></a> them and <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a>
them to <code>int</code>. We want to keep a count of cube faces, so let's add the
coordinates of each cube we scan to a dictionary of the form
<code>{coords: free_faces}</code>, initially filled with all <code>6</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cubes = {}

with open(...) as fin:
    for line in fin:
        coords = tuple(map(int, line.split(',')))
        cubes[coords] = 6"><pre><span class="pl-s1">cubes</span> <span class="pl-c1">=</span> {}

<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
        <span class="pl-s1">coords</span> <span class="pl-c1">=</span> <span class="pl-en">tuple</span>(<span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">line</span>.<span class="pl-en">split</span>(<span class="pl-s">','</span>)))
        <span class="pl-s1">cubes</span>[<span class="pl-s1">coords</span>] <span class="pl-c1">=</span> <span class="pl-c1">6</span></pre></div>
<p dir="auto">A unit cube at <code>x,y,z</code> can be in contact with any of its immediate neighbors, at
<code>xÂ±1,y,z</code>, <code>x,yÂ±1,z</code> and <code>x,y,zÂ±1</code>. Let's write a
<a href="https://docs.python.org/3/howto/functional.html#generators" rel="nofollow">generator function</a> to calculate and <code>yield</code> the coordinates of
the neighbors of a cube. We only need to go forward one step in any of the 6
possible directions:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def neighbors(x, y, z):
    yield (x + 1, y    , z    )
    yield (x - 1, y    , z    )
    yield (x    , y + 1, z    )
    yield (x    , y - 1, z    )
    yield (x    , y    , z + 1)
    yield (x    , y    , z - 1)"><pre><span class="pl-k">def</span> <span class="pl-en">neighbors</span>(<span class="pl-s1">x</span>, <span class="pl-s1">y</span>, <span class="pl-s1">z</span>):
    <span class="pl-k">yield</span> (<span class="pl-s1">x</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">y</span>    , <span class="pl-s1">z</span>    )
    <span class="pl-k">yield</span> (<span class="pl-s1">x</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">y</span>    , <span class="pl-s1">z</span>    )
    <span class="pl-k">yield</span> (<span class="pl-s1">x</span>    , <span class="pl-s1">y</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">z</span>    )
    <span class="pl-k">yield</span> (<span class="pl-s1">x</span>    , <span class="pl-s1">y</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-s1">z</span>    )
    <span class="pl-k">yield</span> (<span class="pl-s1">x</span>    , <span class="pl-s1">y</span>    , <span class="pl-s1">z</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)
    <span class="pl-k">yield</span> (<span class="pl-s1">x</span>    , <span class="pl-s1">y</span>    , <span class="pl-s1">z</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>)</pre></div>
<p dir="auto">For any given unit cube, we can know how many faces touch other cubes by simply
checking how many of the 6 neighbors were present in our input. For each
present neighbor, we will have exactly one face touching it, and therefore we
can decrement our initial count of <code>6</code> free faces. Since the function we
just wrote takes 3 arguments, we can use <a href="https://docs.python.org/3/tutorial/controlflow.html#unpacking-argument-lists" rel="nofollow">unpack</a> (<code>*</code>) each
cube's coordinates when calling it.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for c in cubes:
    for n in neighbors(*c):
        if n in cubes:
            cubes[c] -= 1"><pre><span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-s1">cubes</span>:
    <span class="pl-k">for</span> <span class="pl-s1">n</span> <span class="pl-c1">in</span> <span class="pl-en">neighbors</span>(<span class="pl-c1">*</span><span class="pl-s1">c</span>):
        <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">in</span> <span class="pl-s1">cubes</span>:
            <span class="pl-s1">cubes</span>[<span class="pl-s1">c</span>] <span class="pl-c1">-=</span> <span class="pl-c1">1</span></pre></div>
<p dir="auto">The internal <code>for</code> is only performing a sum over a condition, so we can turn it
into a call to <a href="https://docs.python.org/3/library/functions.html#sum" rel="nofollow"><code>sum()</code></a> plus a
<a href="https://www.python.org/dev/peps/pep-0289/" rel="nofollow">generator expression</a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for c in cubes:
    cubes[c] -= sum(n in cubes for n in neighbors(*c))"><pre><span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-s1">cubes</span>:
    <span class="pl-s1">cubes</span>[<span class="pl-s1">c</span>] <span class="pl-c1">-=</span> <span class="pl-en">sum</span>(<span class="pl-s1">n</span> <span class="pl-c1">in</span> <span class="pl-s1">cubes</span> <span class="pl-k">for</span> <span class="pl-s1">n</span> <span class="pl-c1">in</span> <span class="pl-en">neighbors</span>(<span class="pl-c1">*</span><span class="pl-s1">c</span>))</pre></div>
<p dir="auto">Finally, summing up all the values in <code>cubes</code> will yield the total number of
"free" faces that are not in contact with other cubes:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="surface = sum(cubes.values())
print('Part 1:', surface)"><pre><span class="pl-s1">surface</span> <span class="pl-c1">=</span> <span class="pl-en">sum</span>(<span class="pl-s1">cubes</span>.<span class="pl-en">values</span>())
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">surface</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-16" class="anchor" aria-hidden="true" href="#part-2-16"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">What we were actually trying to compute in part 1 was the total external surface
area of the cubes we have, counting connected cubes together as a single 3D
shape. However, the naÃ¯ve approach of counting how many faces are "free" (not
touching other cubes) is not enough, as we can have a structure of cubes that
completely surrounds an empty portion of space, and the free faces in the inside
should not be counted. This is what we need to do for part 2: figure out how
many faces we over-counted and calculate the real external surface area.</p>
<p dir="auto">This is intimidating at first, but things will get much clearer with a few
examples. For simplicity, we can reason in 2D, and then apply the same concepts
to 3D. Take for example the following structures where <code>#</code> means we have a
<em>square</em> there and <code>.</code> means empty space:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  A       B       C       D
..#..   .###.   #####   #####
.#.#.   #..#.   #...#   #.#.#
..#..   #.#..   .##.#   ###.#
        .#...   .....   ..###"><pre lang="none" class="notranslate"><code>  A       B       C       D
..#..   .###.   #####   #####
.#.#.   #..#.   #...#   #.#.#
..#..   #.#..   .##.#   ###.#
        .#...   .....   ..###
</code></pre></div>
<p dir="auto">We have:</p>
<ul dir="auto">
<li>
<p dir="auto">Structure A above composed of 4 squares, of which none of them touch each
other on any side, so we have a total of 16 free sides. However, these 4
squares completely surround an empty square, and therefore we can distinguish
between 4 <em>internal</em> sides and 12 <em>external</em> sides. The external perimeter
is 12.</p>
</li>
<li>
<p dir="auto">Similarly, for B, we have a "hole" of 3 contiguous squares. The total number
of free sides is 23, but the external perimeter is 16.</p>
</li>
<li>
<p dir="auto">Structure C does not have an internal perimeter, as it does not completely
surround any region of 2D space.</p>
</li>
<li>
<p dir="auto">Structure D has two "holes" and traps two different regions of space on its
inside. It has an internal perimeter of 10 and an external perimeter of 18.</p>
</li>
</ul>
<p dir="auto">Now it should be clear what we are dealing with. The same concepts apply in 3D
space where we have surface areas instead of perimeters, it's just harder to
visualize. Given a solid structure of unit cubes, some regions of spaces could
be trapped inside it, and therefore not contribute to the external surface area.</p>
<p dir="auto">How can we detect these pockets of empty space? The simplest solution is to
check every single unit of space in the 3D <a href="https://en.wikipedia.org/wiki/Minimum_bounding_box" rel="nofollow">bounding box</a>
that includes all the unit cubes in our input. The 3D bounding box (you could
actually call it a "bounding cube") we are looking for will have coordinates
spanning from the minimum to the maximum coordinates we have one on each axis.
These can be calculated easily:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="minx = miny = minz = float('inf')
maxx = maxy = maxz = 0

for x, y, z in cubes:
    minx, maxx = min(x, minx), max(x, maxx)
    miny, maxy = min(y, miny), max(y, maxy)
    minz, maxz = min(z, minz), max(z, maxz)"><pre><span class="pl-s1">minx</span> <span class="pl-c1">=</span> <span class="pl-s1">miny</span> <span class="pl-c1">=</span> <span class="pl-s1">minz</span> <span class="pl-c1">=</span> <span class="pl-en">float</span>(<span class="pl-s">'inf'</span>)
<span class="pl-s1">maxx</span> <span class="pl-c1">=</span> <span class="pl-s1">maxy</span> <span class="pl-c1">=</span> <span class="pl-s1">maxz</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

<span class="pl-k">for</span> <span class="pl-s1">x</span>, <span class="pl-s1">y</span>, <span class="pl-s1">z</span> <span class="pl-c1">in</span> <span class="pl-s1">cubes</span>:
    <span class="pl-s1">minx</span>, <span class="pl-s1">maxx</span> <span class="pl-c1">=</span> <span class="pl-en">min</span>(<span class="pl-s1">x</span>, <span class="pl-s1">minx</span>), <span class="pl-en">max</span>(<span class="pl-s1">x</span>, <span class="pl-s1">maxx</span>)
    <span class="pl-s1">miny</span>, <span class="pl-s1">maxy</span> <span class="pl-c1">=</span> <span class="pl-en">min</span>(<span class="pl-s1">y</span>, <span class="pl-s1">miny</span>), <span class="pl-en">max</span>(<span class="pl-s1">y</span>, <span class="pl-s1">maxy</span>)
    <span class="pl-s1">minz</span>, <span class="pl-s1">maxz</span> <span class="pl-c1">=</span> <span class="pl-en">min</span>(<span class="pl-s1">z</span>, <span class="pl-s1">minz</span>), <span class="pl-en">max</span>(<span class="pl-s1">z</span>, <span class="pl-s1">maxz</span>)</pre></div>
<p dir="auto">To simplify any bound checks to perform later, we can create a
<a href="https://docs.python.org/3/library/functions.html#range" rel="nofollow"><code>range</code></a> object for each axis, and then use <code>x in rangex</code>
instead of <code>minx &lt;= x &lt;= maxx</code> (which is exactly the check made when doing
<code>x in rangex</code>):</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="rangex = range(minx, maxx + 1)
rangey = range(miny, maxy + 1)
rangez = range(minz, maxz + 1)"><pre><span class="pl-s1">rangex</span> <span class="pl-c1">=</span> <span class="pl-en">range</span>(<span class="pl-s1">minx</span>, <span class="pl-s1">maxx</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)
<span class="pl-s1">rangey</span> <span class="pl-c1">=</span> <span class="pl-en">range</span>(<span class="pl-s1">miny</span>, <span class="pl-s1">maxy</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)
<span class="pl-s1">rangez</span> <span class="pl-c1">=</span> <span class="pl-en">range</span>(<span class="pl-s1">minz</span>, <span class="pl-s1">maxz</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>)</pre></div>
<p dir="auto">For each unit cube of <em>free space</em> inside the bounding box, we can try
"escaping" the bounding box by visiting any other <em>free</em> unit cubes of space
that we can reach (i.e. coordinates that are not in our input). This can be done
through either <a href="https://en.wikipedia.org/wiki/Breadth-first_search" rel="nofollow">BFS</a> or <a href="https://en.wikipedia.org/wiki/Depth-first_search" rel="nofollow">DFS</a>. If we manage to escape the
bounding box, it means that we were not inside an internal "pocket" of space. On
the other hand, if we cannot escape, it means we found such a pocket, and we are
surrounded by non-empty unit cubes. To count the number of "internal" faces we
can perform our exploration and increment a counter whenever we are prevented
from moving in any of the 6 directions by a non-empty unit cube.</p>
<p dir="auto">Let's implement an <code>escape()</code> function that does exactly this, using iterative
DFS with a <a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow"><code>deque</code></a> as queue. We'll keep track of the
number of "touched" internal faces with a counter, and return <code>0</code> if we manage
to escape, otherwise the counter.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def escape(cubes, src, rangex, rangey, rangez):
    seen = set()
    queue = deque([src])
    faces_touched = 0

    while queue:
        p = queue.pop()
        if p in seen:
            continue

        seen.add(p)
        x, y, z, = p

        # Did we escape the bounding box?
        if x not in rangex or y not in rangey or z not in rangez:
            # If so, we are not trapped in an internal pocket
            return 0, seen

        # Try exploring all 6 directions
        for n in neighbors(x, y, z):
            # If we are blocked in this direction, it means we touched an internal face
            if n in cubes:
                faces_touched += 1
            else:
                # Otherwise, keep going
                if n not in seen:
                    queue.append(n)

    # We ran out of free space to visit, which means we are trapped in an internal pocket
    return faces_touched, seen"><pre><span class="pl-k">def</span> <span class="pl-en">escape</span>(<span class="pl-s1">cubes</span>, <span class="pl-s1">src</span>, <span class="pl-s1">rangex</span>, <span class="pl-s1">rangey</span>, <span class="pl-s1">rangez</span>):
    <span class="pl-s1">seen</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>()
    <span class="pl-s1">queue</span> <span class="pl-c1">=</span> <span class="pl-en">deque</span>([<span class="pl-s1">src</span>])
    <span class="pl-s1">faces_touched</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-k">while</span> <span class="pl-s1">queue</span>:
        <span class="pl-s1">p</span> <span class="pl-c1">=</span> <span class="pl-s1">queue</span>.<span class="pl-en">pop</span>()
        <span class="pl-k">if</span> <span class="pl-s1">p</span> <span class="pl-c1">in</span> <span class="pl-s1">seen</span>:
            <span class="pl-k">continue</span>

        <span class="pl-s1">seen</span>.<span class="pl-en">add</span>(<span class="pl-s1">p</span>)
        <span class="pl-s1">x</span>, <span class="pl-s1">y</span>, <span class="pl-s1">z</span>, <span class="pl-c1">=</span> <span class="pl-s1">p</span>

        <span class="pl-c"># Did we escape the bounding box?</span>
        <span class="pl-k">if</span> <span class="pl-s1">x</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">rangex</span> <span class="pl-c1">or</span> <span class="pl-s1">y</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">rangey</span> <span class="pl-c1">or</span> <span class="pl-s1">z</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">rangez</span>:
            <span class="pl-c"># If so, we are not trapped in an internal pocket</span>
            <span class="pl-k">return</span> <span class="pl-c1">0</span>, <span class="pl-s1">seen</span>

        <span class="pl-c"># Try exploring all 6 directions</span>
        <span class="pl-k">for</span> <span class="pl-s1">n</span> <span class="pl-c1">in</span> <span class="pl-en">neighbors</span>(<span class="pl-s1">x</span>, <span class="pl-s1">y</span>, <span class="pl-s1">z</span>):
            <span class="pl-c"># If we are blocked in this direction, it means we touched an internal face</span>
            <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">in</span> <span class="pl-s1">cubes</span>:
                <span class="pl-s1">faces_touched</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
            <span class="pl-k">else</span>:
                <span class="pl-c"># Otherwise, keep going</span>
                <span class="pl-k">if</span> <span class="pl-s1">n</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">seen</span>:
                    <span class="pl-s1">queue</span>.<span class="pl-en">append</span>(<span class="pl-s1">n</span>)

    <span class="pl-c"># We ran out of free space to visit, which means we are trapped in an internal pocket</span>
    <span class="pl-k">return</span> <span class="pl-s1">faces_touched</span>, <span class="pl-s1">seen</span></pre></div>
<p dir="auto">You may have noticed that the above function also returns a <code>seen</code> set of
visited coordinates. This is because we <em>need</em> to keep track of all the visited
coordinates of free space: if an exploration finds an internal pocket starting
from a given point in space, we do not need to perform a second redundant
exploration for any of the points we have visited during the first. Most
importantly, doing so would also make us double-count the number of internal
faces we touch, and we don't want that!</p>
<p dir="auto">Now that we have a function able to identify and count internal faces, we can
call it for every <em>empty</em> unit cube inside our bounding box, and accumulate the
results. We need three nested <code>for</code> loops to iterate over all possible <code>x,y,z</code>
coordinates, so we can use <a href="https://docs.python.org/3/library/itertools.html#itertools.product" rel="nofollow"><code>itertools.product()</code></a> to
make our life easier.</p>
<p dir="auto">Let's get our part 2 answer:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="allseen = set()

for c in product(rangex, rangey, rangez):
    if c not in cubes: # this is an empty unit cube of space
        if c not in allseen: # this is not in an internal pocket we already found
            touched, seen = escape(cubes, c, rangex, rangey, rangez)
            surface -= touched
            allseen |= seen

print('Part 2:', surface)"><pre><span class="pl-s1">allseen</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>()

<span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">product</span>(<span class="pl-s1">rangex</span>, <span class="pl-s1">rangey</span>, <span class="pl-s1">rangez</span>):
    <span class="pl-k">if</span> <span class="pl-s1">c</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">cubes</span>: <span class="pl-c"># this is an empty unit cube of space</span>
        <span class="pl-k">if</span> <span class="pl-s1">c</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">allseen</span>: <span class="pl-c"># this is not in an internal pocket we already found</span>
            <span class="pl-s1">touched</span>, <span class="pl-s1">seen</span> <span class="pl-c1">=</span> <span class="pl-en">escape</span>(<span class="pl-s1">cubes</span>, <span class="pl-s1">c</span>, <span class="pl-s1">rangex</span>, <span class="pl-s1">rangey</span>, <span class="pl-s1">rangez</span>)
            <span class="pl-s1">surface</span> <span class="pl-c1">-=</span> <span class="pl-s1">touched</span>
            <span class="pl-s1">allseen</span> |= <span class="pl-s1">seen</span>

<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">surface</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-19---not-enough-minerals" class="anchor" aria-hidden="true" href="#day-19---not-enough-minerals"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 19 - Not Enough Minerals</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/19" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day19.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-17" class="anchor" aria-hidden="true" href="#part-1-17"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">For today's problem we are building robots to mine some minerals... interesting.
There are 4 mineral types: ore, clay, obsidian and geodes. Additionally, there
are also 4 robot types, each of which can mine the corresponding mineral. We are
given a list of blueprints: each blueprint tells us which minerals (and how many
units) are needed to build a robot of a given type. We start with only one
ore-mining robot, and we have 24 minutes of time. Each robot we have can mine
one unit of its mineral per minute, and building a new robot takes 1 minute. We
need to figure out the maximum number of geodes we can mine with each of the
given blueprints, and calculate the best score among the blueprints we have,
which is given by the blueprint id multiplied by the maximum number of geodes
achievable with it.</p>
<p dir="auto">Let's get input parsing out of the way. Each line of input is a quite long
sentence containing some positive integer quantities. We know all sentences are
formatted in the same way, so we can just extract all the integers on each line
with a regular expression using <a href="https://docs.python.org/3/library/re.html#re.Pattern.findall" rel="nofollow"><code>.findall()</code></a>, and
accumulate these numbers in a list:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="import re

exp = re.compile(r'\d+')
blueprints = []

with open(...) as fin:
    for line in fin:
        blueprints.append(tuple(map(int, exp.findall(line))))"><pre><span class="pl-k">import</span> <span class="pl-s1">re</span>

<span class="pl-s1">exp</span> <span class="pl-c1">=</span> <span class="pl-s1">re</span>.<span class="pl-en">compile</span>(<span class="pl-s">r'\d+'</span>)
<span class="pl-s1">blueprints</span> <span class="pl-c1">=</span> []

<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
        <span class="pl-s1">blueprints</span>.<span class="pl-en">append</span>(<span class="pl-en">tuple</span>(<span class="pl-en">map</span>(<span class="pl-s1">int</span>, <span class="pl-s1">exp</span>.<span class="pl-en">findall</span>(<span class="pl-s1">line</span>))))</pre></div>
<p dir="auto">We are dealing with a <a href="https://en.wikipedia.org/wiki/Search_problem" rel="nofollow">search problem</a>. Given four things,
we can <em>theoretically</em> solve any search problem:</p>
<ol dir="auto">
<li>A consistent definition of a "state".</li>
<li>A start state.</li>
<li>A way to find successors of a given state (i.e. transition from one state to
any other possible state).</li>
<li>A way to check if a state is a goal.</li>
</ol>
<p dir="auto">Let's see what we have for our problem:</p>
<ul dir="auto">
<li>
<p dir="auto">First, we need to define what exactly is a state. In our case, a state could
be represented by the current time left, the amount of resources we have of
each type, and the number of robots we have of each type. If at any given time
two different sequences of choices bring us to the same state, we know both
those choice sequences are equivalent, and the reachable states from now on
are the same.</p>
</li>
<li>
<p dir="auto">Given the above, for our start state we have <code>24</code> minutes left, <code>0</code> of each
material and <code>0</code> of each robot type, except for <code>1</code> ore-mining robot.</p>
</li>
<li>
<p dir="auto">A transition from one state to another can be of two different kinds:</p>
<ul dir="auto">
<li>Wait one minute without building any robot, and let the current robots we
have mine resources.</li>
<li>Build one robot of some type (assuming we have resources to do so), while
also having pre-existing ones mine resources. There are 4 different
transitions of this kind (one per robot type).</li>
</ul>
</li>
<li>
<p dir="auto">A goal state is any state where the time left is <code>0</code>, and its "score" is the
number of geodes we have in such a state.</p>
</li>
</ul>
<p dir="auto">States can be seen as <em>nodes</em> in a graph, actions that change state can be seen
as <em>edges</em> of the graph, and goal states can be seen as nodes with no outgoing
edges. A search problem can therefore be solved using different graph
exploration techniques like <a href="https://en.wikipedia.org/wiki/Breadth-first_search" rel="nofollow">BFS</a>, <a href="https://en.wikipedia.org/wiki/Depth-first_search" rel="nofollow">DFS</a>,
<a href="https://en.wikipedia.org/wiki/A*_search_algorithm" rel="nofollow">A-star</a>, and so on.</p>
<p dir="auto">Let's go with iterative DFS, which is pretty simple to implement. We'll write a
<code>search()</code> function that takes the parameters of a blueprint as input and
explores the state space finding the best goal states it comes across. As with
normal DFS, it's pointless to visit the same state multiple times, so we'll keep
a set of <code>visited</code> states to avoid this. As usual, we'll use a
<a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow"><code>deque</code></a> for the queue of states to visit.</p>
<p dir="auto">As said above, each state will be a <code>tuple</code> of the following form:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="(time_left, ore, clay, obsidian, geodes, robots_ore, robots_clay, robots_obsidian, robots_geode)"><pre>(<span class="pl-s1">time_left</span>, <span class="pl-s1">ore</span>, <span class="pl-s1">clay</span>, <span class="pl-s1">obsidian</span>, <span class="pl-s1">geodes</span>, <span class="pl-s1">robots_ore</span>, <span class="pl-s1">robots_clay</span>, <span class="pl-s1">robots_obsidian</span>, <span class="pl-s1">robots_geode</span>)</pre></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def search(blueprint):
    (rore_cost,      # Cost in ore to build an ore-mining robot.
     rclay_cost,     # Cost in ore to build a clay-mining robot.
     robs_cost_ore,  # Cost in ore to build an obsidian-mining robot.
     robs_cost_clay, # Cost in clay to build an obsidian-mining robot.
     rgeo_cost_ore,  # Cost in ore to build a geode-mining robot.
     rgeo_cost_obs   # Cost in obsidian to build a geode-mining robot.
    ) = blueprint

    time    = 24
    best    = 0     # Best number of geodes we are able to collect.
    visited = set() # Visited states.

    # The &quot;frontier&quot; of our search, containing states to explore next.
    # In the initial state we only have 1 ore-mining robot.
    q = deque([(time, 0, 0, 0, 0, 1, 0, 0, 0)])

    while q:
        time, ore, clay, obs, geo, rore, rclay, robs, rgeo = state = q.pop()
        if state in visited:
            continue

        visited.add(state)

        # Each robot we have mines 1 resource of its type, taking 1 minute.
        newore  = ore  + rore
        newclay = clay + rclay
        newobs  = obs  + robs
        newgeo  = geo  + rgeo
        time -= 1

        # If we run out of time, we reached a &quot;goal&quot; state. Update the best
        # number of geodes we were able to mine.
        if time == 0:
            best = max(best, newgeo)
            continue

        # Following are the possible actions (transitions) to take...

        # We can always just spend one minute only mining without building any robot.
        q.append((time, newore, newclay, newobs, newgeo, rore, rclay, robs, rgeo))

        # If we have enough materials for a geode-mining robot, we could also build that.
        if obs &gt;= rgeo_cost_obs and ore &gt;= rgeo_cost_ore:
            q.append((
                time,
                newore - rgeo_cost_ore,
                newclay,
                newobs - rgeo_cost_obs,
                newgeo,
                rore, rclay, robs, rgeo + 1
            ))

        # If we have enough materials for an obsidian-mining robot, we could also build that.
        if clay &gt;= robs_cost_clay and ore &gt;= robs_cost_ore:
            q.append((
                time,
                newore - robs_cost_ore,
                newclay - robs_cost_clay,
                newobs,
                newgeo,
                rore, rclay, robs + 1, rgeo
            ))

        # If we have enough materials for a clay-mining robot, we could also build that.
        if ore &gt;= rclay_cost:
            q.append((
                time,
                newore - rclay_cost,
                newclay,
                newobs,
                newgeo,
                rore, rclay + 1, robs, rgeo
            ))

        # If we have enough materials for an ore-mining robot, we could also build that.
        if ore &gt;= rore_cost:
            q.append((
                time,
                newore - rore_cost,
                newclay,
                newobs,
                newgeo,
                rore + 1, rclay, robs, rgeo
            ))

    return best"><pre><span class="pl-k">def</span> <span class="pl-en">search</span>(<span class="pl-s1">blueprint</span>):
    (<span class="pl-s1">rore_cost</span>,      <span class="pl-c"># Cost in ore to build an ore-mining robot.</span>
     <span class="pl-s1">rclay_cost</span>,     <span class="pl-c"># Cost in ore to build a clay-mining robot.</span>
     <span class="pl-s1">robs_cost_ore</span>,  <span class="pl-c"># Cost in ore to build an obsidian-mining robot.</span>
     <span class="pl-s1">robs_cost_clay</span>, <span class="pl-c"># Cost in clay to build an obsidian-mining robot.</span>
     <span class="pl-s1">rgeo_cost_ore</span>,  <span class="pl-c"># Cost in ore to build a geode-mining robot.</span>
     <span class="pl-s1">rgeo_cost_obs</span>   <span class="pl-c"># Cost in obsidian to build a geode-mining robot.</span>
    ) <span class="pl-c1">=</span> <span class="pl-s1">blueprint</span>

    <span class="pl-s1">time</span>    <span class="pl-c1">=</span> <span class="pl-c1">24</span>
    <span class="pl-s1">best</span>    <span class="pl-c1">=</span> <span class="pl-c1">0</span>     <span class="pl-c"># Best number of geodes we are able to collect.</span>
    <span class="pl-s1">visited</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>() <span class="pl-c"># Visited states.</span>

    <span class="pl-c"># The "frontier" of our search, containing states to explore next.</span>
    <span class="pl-c"># In the initial state we only have 1 ore-mining robot.</span>
    <span class="pl-s1">q</span> <span class="pl-c1">=</span> <span class="pl-en">deque</span>([(<span class="pl-s1">time</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>)])

    <span class="pl-k">while</span> <span class="pl-s1">q</span>:
        <span class="pl-s1">time</span>, <span class="pl-s1">ore</span>, <span class="pl-s1">clay</span>, <span class="pl-s1">obs</span>, <span class="pl-s1">geo</span>, <span class="pl-s1">rore</span>, <span class="pl-s1">rclay</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">rgeo</span> <span class="pl-c1">=</span> <span class="pl-s1">state</span> <span class="pl-c1">=</span> <span class="pl-s1">q</span>.<span class="pl-en">pop</span>()
        <span class="pl-k">if</span> <span class="pl-s1">state</span> <span class="pl-c1">in</span> <span class="pl-s1">visited</span>:
            <span class="pl-k">continue</span>

        <span class="pl-s1">visited</span>.<span class="pl-en">add</span>(<span class="pl-s1">state</span>)

        <span class="pl-c"># Each robot we have mines 1 resource of its type, taking 1 minute.</span>
        <span class="pl-s1">newore</span>  <span class="pl-c1">=</span> <span class="pl-s1">ore</span>  <span class="pl-c1">+</span> <span class="pl-s1">rore</span>
        <span class="pl-s1">newclay</span> <span class="pl-c1">=</span> <span class="pl-s1">clay</span> <span class="pl-c1">+</span> <span class="pl-s1">rclay</span>
        <span class="pl-s1">newobs</span>  <span class="pl-c1">=</span> <span class="pl-s1">obs</span>  <span class="pl-c1">+</span> <span class="pl-s1">robs</span>
        <span class="pl-s1">newgeo</span>  <span class="pl-c1">=</span> <span class="pl-s1">geo</span>  <span class="pl-c1">+</span> <span class="pl-s1">rgeo</span>
        <span class="pl-s1">time</span> <span class="pl-c1">-=</span> <span class="pl-c1">1</span>

        <span class="pl-c"># If we run out of time, we reached a "goal" state. Update the best</span>
        <span class="pl-c"># number of geodes we were able to mine.</span>
        <span class="pl-k">if</span> <span class="pl-s1">time</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-s1">best</span>, <span class="pl-s1">newgeo</span>)
            <span class="pl-k">continue</span>

        <span class="pl-c"># Following are the possible actions (transitions) to take...</span>

        <span class="pl-c"># We can always just spend one minute only mining without building any robot.</span>
        <span class="pl-s1">q</span>.<span class="pl-en">append</span>((<span class="pl-s1">time</span>, <span class="pl-s1">newore</span>, <span class="pl-s1">newclay</span>, <span class="pl-s1">newobs</span>, <span class="pl-s1">newgeo</span>, <span class="pl-s1">rore</span>, <span class="pl-s1">rclay</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">rgeo</span>))

        <span class="pl-c"># If we have enough materials for a geode-mining robot, we could also build that.</span>
        <span class="pl-k">if</span> <span class="pl-s1">obs</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rgeo_cost_obs</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rgeo_cost_ore</span>:
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((
                <span class="pl-s1">time</span>,
                <span class="pl-s1">newore</span> <span class="pl-c1">-</span> <span class="pl-s1">rgeo_cost_ore</span>,
                <span class="pl-s1">newclay</span>,
                <span class="pl-s1">newobs</span> <span class="pl-c1">-</span> <span class="pl-s1">rgeo_cost_obs</span>,
                <span class="pl-s1">newgeo</span>,
                <span class="pl-s1">rore</span>, <span class="pl-s1">rclay</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">rgeo</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>
            ))

        <span class="pl-c"># If we have enough materials for an obsidian-mining robot, we could also build that.</span>
        <span class="pl-k">if</span> <span class="pl-s1">clay</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">robs_cost_clay</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">robs_cost_ore</span>:
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((
                <span class="pl-s1">time</span>,
                <span class="pl-s1">newore</span> <span class="pl-c1">-</span> <span class="pl-s1">robs_cost_ore</span>,
                <span class="pl-s1">newclay</span> <span class="pl-c1">-</span> <span class="pl-s1">robs_cost_clay</span>,
                <span class="pl-s1">newobs</span>,
                <span class="pl-s1">newgeo</span>,
                <span class="pl-s1">rore</span>, <span class="pl-s1">rclay</span>, <span class="pl-s1">robs</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">rgeo</span>
            ))

        <span class="pl-c"># If we have enough materials for a clay-mining robot, we could also build that.</span>
        <span class="pl-k">if</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rclay_cost</span>:
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((
                <span class="pl-s1">time</span>,
                <span class="pl-s1">newore</span> <span class="pl-c1">-</span> <span class="pl-s1">rclay_cost</span>,
                <span class="pl-s1">newclay</span>,
                <span class="pl-s1">newobs</span>,
                <span class="pl-s1">newgeo</span>,
                <span class="pl-s1">rore</span>, <span class="pl-s1">rclay</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">rgeo</span>
            ))

        <span class="pl-c"># If we have enough materials for an ore-mining robot, we could also build that.</span>
        <span class="pl-k">if</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rore_cost</span>:
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((
                <span class="pl-s1">time</span>,
                <span class="pl-s1">newore</span> <span class="pl-c1">-</span> <span class="pl-s1">rore_cost</span>,
                <span class="pl-s1">newclay</span>,
                <span class="pl-s1">newobs</span>,
                <span class="pl-s1">newgeo</span>,
                <span class="pl-s1">rore</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">rclay</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">rgeo</span>
            ))

    <span class="pl-k">return</span> <span class="pl-s1">best</span></pre></div>
<p dir="auto">The above DFS search is theoretically correct... however, if we try to run it,
we'll notice that it does take a while to finish. A relatively long while. This
is because the search space that we are trying to explore is currently very
large. Taking a look above, for <em>every single state we branch out 5 times</em>. We
need to somehow reduce the search space. This is one of the most important
aspects of a search problem. It's rather straightforward to code a DFS search on
any given search problem once you have identified states and transitions, the
real work is optimizing it, finding a way to <em>prune</em> away paths that lead to
sub-optimal goals as much as possible and as early as possible.</p>
<p dir="auto">A lot of smart people have listed different assumptions and optimizations that
can be applied while searching in today's
<a href="https://www.reddit.com/r/adventofcode/comments/zpihwi/2022_day_19_solutions/?sort=confidence" rel="nofollow">Reddit solution megathread</a>, some of which are rather
straightforward. I'm going to apply some here, until we reach a state where our
program is efficient enough.</p>
<p dir="auto">The first thing to notice is that we can set an upper limit to the number of
robots to build. If the maximum amount of ore we need to build a robot is <em>N</em>,
then we'll never need more than <em>N</em> ore-mining robots. Having <em>N</em> is enough to
build the most expensive robot (ore-wise) every single minute. The same can be
applied to other minerals: we don't need more clay robots than the amount of
clay needed for obsidian robots, and we don't need more obsidian robots than the
amount of obsidian needed for geode robots.</p>
<p dir="auto">We can calculate these maximum needed amounts of minerals at the start of our
function:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def search(blueprint):
    # ...
    max_ore_needed  = max(rore_cost, rclay_cost, robs_cost_ore, rgeo_cost_ore)
    max_clay_needed = robs_cost_clay
    max_obs_needed  = rgeo_cost_obs
    # ..."><pre><span class="pl-k">def</span> <span class="pl-en">search</span>(<span class="pl-s1">blueprint</span>):
    <span class="pl-c"># ...</span>
    <span class="pl-s1">max_ore_needed</span>  <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-s1">rore_cost</span>, <span class="pl-s1">rclay_cost</span>, <span class="pl-s1">robs_cost_ore</span>, <span class="pl-s1">rgeo_cost_ore</span>)
    <span class="pl-s1">max_clay_needed</span> <span class="pl-c1">=</span> <span class="pl-s1">robs_cost_clay</span>
    <span class="pl-s1">max_obs_needed</span>  <span class="pl-c1">=</span> <span class="pl-s1">rgeo_cost_obs</span>
    <span class="pl-c"># ...</span></pre></div>
<p dir="auto">Before trying to build a robot of any kind, let's stop and ask ourselves: do
we really need to? If not, we can avoid it and prune the branch. This simple
optimization cuts down the search space by a considerable amount. In terms of
code, it means adding a condition to the <code>if</code> for each branch. The only branch
that does not need this is the one for building geode-mining robots, as we
always want the most we can.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def search(blueprint):
        # ... unchanged ...

        if clay &gt;= robs_cost_clay and ore &gt;= robs_cost_ore:
            # Avoid building more obsidian robots than the max obsidian per minute needed.
            if obs &lt; max_obs_needed:
                q.append((...)) # unchanged

        if ore &gt;= rclay_cost:
            # Avoid building more clay robots than the max clay per minute needed.
            if rclay &lt; max_clay_needed:
                q.append((...)) # unchanged

        if ore &gt;= rore_cost:
            # Avoid building more ore robots than the max ore per minute needed.
            if rore &lt; max_ore_needed:
                q.append((...)) # unchanged

    return best"><pre><span class="pl-k">def</span> <span class="pl-en">search</span>(<span class="pl-s1">blueprint</span>):
        <span class="pl-c"># ... unchanged ...</span>

        <span class="pl-k">if</span> <span class="pl-s1">clay</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">robs_cost_clay</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">robs_cost_ore</span>:
            <span class="pl-c"># Avoid building more obsidian robots than the max obsidian per minute needed.</span>
            <span class="pl-k">if</span> <span class="pl-s1">obs</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_obs_needed</span>:
                <span class="pl-s1">q</span>.<span class="pl-en">append</span>((...)) <span class="pl-c"># unchanged</span>

        <span class="pl-k">if</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rclay_cost</span>:
            <span class="pl-c"># Avoid building more clay robots than the max clay per minute needed.</span>
            <span class="pl-k">if</span> <span class="pl-s1">rclay</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_clay_needed</span>:
                <span class="pl-s1">q</span>.<span class="pl-en">append</span>((...)) <span class="pl-c"># unchanged</span>

        <span class="pl-k">if</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rore_cost</span>:
            <span class="pl-c"># Avoid building more ore robots than the max ore per minute needed.</span>
            <span class="pl-k">if</span> <span class="pl-s1">rore</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_ore_needed</span>:
                <span class="pl-s1">q</span>.<span class="pl-en">append</span>((...)) <span class="pl-c"># unchanged</span>

    <span class="pl-k">return</span> <span class="pl-s1">best</span></pre></div>
<p dir="auto">Of course, those <code>if</code> conditions can be merged for simplicity:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def search(blueprint):
        # ... unchanged ...

        if obs &lt; max_obs_needed and clay &gt;= robs_cost_clay and ore &gt;= robs_cost_ore:
            q.append((...))

        if rclay &lt; max_clay_needed and ore &gt;= rclay_cost:
            q.append((...))

        if rore &lt; max_ore_needed and ore &gt;= rore_cost:
            q.append((...))

    return best"><pre><span class="pl-k">def</span> <span class="pl-en">search</span>(<span class="pl-s1">blueprint</span>):
        <span class="pl-c"># ... unchanged ...</span>

        <span class="pl-k">if</span> <span class="pl-s1">obs</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_obs_needed</span> <span class="pl-c1">and</span> <span class="pl-s1">clay</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">robs_cost_clay</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">robs_cost_ore</span>:
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((...))

        <span class="pl-k">if</span> <span class="pl-s1">rclay</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_clay_needed</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rclay_cost</span>:
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((...))

        <span class="pl-k">if</span> <span class="pl-s1">rore</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_ore_needed</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rore_cost</span>:
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((...))

    <span class="pl-k">return</span> <span class="pl-s1">best</span></pre></div>
<p dir="auto">This already cuts the execution time in half (at least on the example input),
but we can keep improving.</p>
<p dir="auto">Let's now ask ourselves: when does it make sense to wait for some minerals to
be mined? Currently, our code <em>always</em> tries to explore a new state with a
transition that just waits one minute of time to only mine. Exactly here:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="        # We can always just spend one minute only mining without building any robot.
        q.append((time, newore, newclay, newobs, newgeo, rore, rclay, robs, rgeo))"><pre>        <span class="pl-c"># We can always just spend one minute only mining without building any robot.</span>
        <span class="pl-s1">q</span>.<span class="pl-en">append</span>((<span class="pl-s1">time</span>, <span class="pl-s1">newore</span>, <span class="pl-s1">newclay</span>, <span class="pl-s1">newobs</span>, <span class="pl-s1">newgeo</span>, <span class="pl-s1">rore</span>, <span class="pl-s1">rclay</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">rgeo</span>))</pre></div>
<p dir="auto">This can sometimes be a waste of time. Similarly to what we discussed for the
previous optimization above, there is a certain maximum amount of any given
mineral type above which we'll never need to go. That is the maximum amount
needed to build one robot per minute using that mineral. It only makes sense to
wait for some mineral if we have less than the maximum needed <em>and</em> if we also
have at least one robot to mine it.</p>
<p dir="auto">We already calculated these maximum needed amounts. Let's also use them to
perform this check and avoid spending one turn only mining if needed. The above
line becomes:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="        # Does it make sense to wait for a resource? I.E. do I have less than
        # the max needed and do I also have robots to produce it?
        if (robs and obs &lt; max_obs_needed) or (rclay and clay &lt; max_clay_needed) or ore &lt; max_ore_needed:
            # If so, we can also try just spending one minute only mining without building any robot.
            q.append((time, newore, newclay, newobs, newgeo, rore, rclay, robs, rgeo))"><pre>        <span class="pl-c"># Does it make sense to wait for a resource? I.E. do I have less than</span>
        <span class="pl-c"># the max needed and do I also have robots to produce it?</span>
        <span class="pl-k">if</span> (<span class="pl-s1">robs</span> <span class="pl-c1">and</span> <span class="pl-s1">obs</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_obs_needed</span>) <span class="pl-c1">or</span> (<span class="pl-s1">rclay</span> <span class="pl-c1">and</span> <span class="pl-s1">clay</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_clay_needed</span>) <span class="pl-c1">or</span> <span class="pl-s1">ore</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_ore_needed</span>:
            <span class="pl-c"># If so, we can also try just spending one minute only mining without building any robot.</span>
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((<span class="pl-s1">time</span>, <span class="pl-s1">newore</span>, <span class="pl-s1">newclay</span>, <span class="pl-s1">newobs</span>, <span class="pl-s1">newgeo</span>, <span class="pl-s1">rore</span>, <span class="pl-s1">rclay</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">rgeo</span>))</pre></div>
<p dir="auto">A little faster, nice, let's keep going!</p>
<p dir="auto">The third thing to notice is that we can <em>estimate</em> how good of a state we are
in, and prune away any paths passing through sub-optimal states. In the
best-case scenario (assuming we have robots and resources), we can build exactly
1 geode-mining robot per minute, and keep all the other geode-mining robots
mining. For example, if we find ourselves at <code>time=3</code> minutes left, and we have
<code>0</code> geodes and <code>3</code> geode-mining robots, in the best-case scenario (building one
more geode-mining robot per minute) we can mine another <code>3 + 2 + 1 = 6</code> geodes.
<strong>The same reasoning can be applied to all minerals.</strong></p>
<p dir="auto">In general, if we find ourselves with <em>t</em> time left, <em>n</em> minerals of a given
type already mined, and <em>r</em> mining robots for that mineral, in the best-case
scenario we can get a maximum of <em>n + r + (r + 1) + (r + 2) + ... + (r + t)</em>
minerals, which can also be written (grouping <em>r</em>) as <em>n + (t + 1)r + 1 + 2 +
3 + ... + t</em>. That last part consisting of the sum of the first <em>t</em> natural
numbers is exactly the <em>t-th</em> (lol) <a href="https://en.wikipedia.org/wiki/Triangular_number" rel="nofollow">triangular number</a>,
so the formula can be further simplified to <em>n + (t + 1)r + t(t + 1)/2</em>.</p>
<p dir="auto">Let's write a small helper function to calculate the maximum number of minerals
of a given type achievable in the best-case scenario:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def best_case_scenario(initial_amount, robots, t):
    return initial_amount + robots * (t + 1) + t * (t + 1) // 2"><pre><span class="pl-k">def</span> <span class="pl-en">best_case_scenario</span>(<span class="pl-s1">initial_amount</span>, <span class="pl-s1">robots</span>, <span class="pl-s1">t</span>):
    <span class="pl-k">return</span> <span class="pl-s1">initial_amount</span> <span class="pl-c1">+</span> <span class="pl-s1">robots</span> <span class="pl-c1">*</span> (<span class="pl-s1">t</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>) <span class="pl-c1">+</span> <span class="pl-s1">t</span> <span class="pl-c1">*</span> (<span class="pl-s1">t</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>) <span class="pl-c1">//</span> <span class="pl-c1">2</span></pre></div>
<p dir="auto">We can now use it to perform three optimizations of the same kind any time we
visit a new state:</p>
<ol dir="auto">
<li>If the amount of geodes achievable in the best-case scenario number is lower
than the current <code>best</code> we have, we can discard the state and any of its
successors.</li>
<li>If the amount of obsidian achievable in the best-case scenario is lower than
the amount needed to build a geode robot, we know we'll never be able to
build geode robots anymore, so we can calculate the final score as
<code>newgeodes + rgeo * time</code> and avoid exploring any further.</li>
<li>Likewise, this also applies to "ore", as geode robots need both ore and
obsidian to be built.</li>
</ol>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def search(blueprint):
    # ... unchanged ...

    while q:
        # ... unchanged ...

        if time == 0:
            best = max(best, newgeo)
            continue

        # If we can't mine more geodes in the best-case scenario, bail out.
        if best_case_scenario(newgeo, rgeo, time) &lt; best:
            continue

        # If we can't mine enough obsidian to build new geode robots even in the
        # best-case scenario, we already know how many geodes we'll be able to get.
        if best_case_scenario(newobs, robs, time) &lt; rgeo_cost_obs:
            best = max(best, newgeo + rgeo * time)
            continue

        # Likewise for ore.
        if best_case_scenario(newore, rore, time) &lt; rgeo_cost_ore:
            best = max(best, newgeo + rgeo * time)
            continue

        # ... unchanged ..."><pre><span class="pl-k">def</span> <span class="pl-en">search</span>(<span class="pl-s1">blueprint</span>):
    <span class="pl-c"># ... unchanged ...</span>

    <span class="pl-k">while</span> <span class="pl-s1">q</span>:
        <span class="pl-c"># ... unchanged ...</span>

        <span class="pl-k">if</span> <span class="pl-s1">time</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-s1">best</span>, <span class="pl-s1">newgeo</span>)
            <span class="pl-k">continue</span>

        <span class="pl-c"># If we can't mine more geodes in the best-case scenario, bail out.</span>
        <span class="pl-k">if</span> <span class="pl-en">best_case_scenario</span>(<span class="pl-s1">newgeo</span>, <span class="pl-s1">rgeo</span>, <span class="pl-s1">time</span>) <span class="pl-c1">&lt;</span> <span class="pl-s1">best</span>:
            <span class="pl-k">continue</span>

        <span class="pl-c"># If we can't mine enough obsidian to build new geode robots even in the</span>
        <span class="pl-c"># best-case scenario, we already know how many geodes we'll be able to get.</span>
        <span class="pl-k">if</span> <span class="pl-en">best_case_scenario</span>(<span class="pl-s1">newobs</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">time</span>) <span class="pl-c1">&lt;</span> <span class="pl-s1">rgeo_cost_obs</span>:
            <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-s1">best</span>, <span class="pl-s1">newgeo</span> <span class="pl-c1">+</span> <span class="pl-s1">rgeo</span> <span class="pl-c1">*</span> <span class="pl-s1">time</span>)
            <span class="pl-k">continue</span>

        <span class="pl-c"># Likewise for ore.</span>
        <span class="pl-k">if</span> <span class="pl-en">best_case_scenario</span>(<span class="pl-s1">newore</span>, <span class="pl-s1">rore</span>, <span class="pl-s1">time</span>) <span class="pl-c1">&lt;</span> <span class="pl-s1">rgeo_cost_ore</span>:
            <span class="pl-s1">best</span> <span class="pl-c1">=</span> <span class="pl-en">max</span>(<span class="pl-s1">best</span>, <span class="pl-s1">newgeo</span> <span class="pl-c1">+</span> <span class="pl-s1">rgeo</span> <span class="pl-c1">*</span> <span class="pl-s1">time</span>)
            <span class="pl-k">continue</span>

        <span class="pl-c"># ... unchanged ...</span></pre></div>
<p dir="auto">We are getting there. There is only one last optimization I will make, which is
also the one that improves our solution the most. Credit goes to
<a href="https://www.reddit.com/user/Coffee_Doggo" rel="nofollow">u/Coffee_Doggo</a> for figuring this out and
<a href="https://www.reddit.com/r/adventofcode/comments/zpihwi/2022_day_19_solutions/j0vvtdt/" rel="nofollow">commenting about it</a>.</p>
<p dir="auto">Fourth and final thing to notice: if we ever find ourselves with the ability to
build a robot of a given type, <em>and</em> the previous minute we also had the chance
to build it, <em>but</em> decided to not build anything instead... doing it now doesn't
make much sense. We should have done it earlier! We can throw away this option.</p>
<p dir="auto">The above will require us to keep track of which robots we were able to build at
any given state and pass that information to the next state. We can do it by
adding a simple list to our queue, containing numeric IDs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="ORE, CLAY, OBS, GEO = range(4)"><pre><span class="pl-v">ORE</span>, <span class="pl-v">CLAY</span>, <span class="pl-v">OBS</span>, <span class="pl-v">GEO</span> <span class="pl-c1">=</span> <span class="pl-en">range</span>(<span class="pl-c1">4</span>)</pre></div>
<p dir="auto">Here are the modifications that we need to apply:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def search(blueprint):
    # ...

    # Add another element here, the list of robots we could have built in the
    # previous step, but decided not to build instead.
    q = deque([(time, 0, 0, 0, 0, 1, 0, 0, 0, [])])

    while q:
        tmp = q.pop()

        # This last list we added is not part of the state.
        state = tmp[:-1]
        if state in visited:
            continue

        visited.add(state)

        time, ore, clay, obs, geo, rore, rclay, robs, rgeo, did_not_build = tmp

        # ... unchanged ...

        can_build = []

        if obs &gt;= rgeo_cost_obs and ore &gt;= rgeo_cost_ore:
            # Did we have the chance to build this robot type in the previous iteration
            # but decided to not build anything instead? If so, we just wasted precious
            # time, it's pointless to do it now that we are late, the result is inevitably
            # going to be worse.
            if GEO not in did_not_build:
                # Remember that we could have built a geode robot.
                can_build.append(GEO)
                # Pass along an empyy list, we built a robot so we don't have a list
                # of robots that we &quot;could have built&quot; but didn't.
                q.append((..., []))

        if robs &lt; max_obs_needed and clay &gt;= robs_cost_clay and ore &gt;= robs_cost_ore:
            # Likewise.
            if OBS not in did_not_build:
                can_build.append(OBS)
                q.append((..., []))

        if rclay &lt; max_clay_needed and ore &gt;= rclay_cost:
            # Likewise.
            if CLAY not in did_not_build:
                can_build.append(CLAY)
                q.append((..., []))

        if rore &lt; max_ore_needed and ore &gt;= rore_cost:
            # Likewise.
            if ORE not in did_not_build:
                can_build.append(ORE)
                q.append((..., []))

        # If we can also &quot;wait&quot; without building, pass along the list of robots
        # we couldhave built, but decided to not build instead.
        if (robs and obs &lt; max_obs_needed) or (rclay and clay &lt; max_clay_needed) or ore &lt; max_ore_needed:
            q.append((..., can_build))

    return best"><pre><span class="pl-k">def</span> <span class="pl-en">search</span>(<span class="pl-s1">blueprint</span>):
    <span class="pl-c"># ...</span>

    <span class="pl-c"># Add another element here, the list of robots we could have built in the</span>
    <span class="pl-c"># previous step, but decided not to build instead.</span>
    <span class="pl-s1">q</span> <span class="pl-c1">=</span> <span class="pl-en">deque</span>([(<span class="pl-s1">time</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">0</span>, [])])

    <span class="pl-k">while</span> <span class="pl-s1">q</span>:
        <span class="pl-s1">tmp</span> <span class="pl-c1">=</span> <span class="pl-s1">q</span>.<span class="pl-en">pop</span>()

        <span class="pl-c"># This last list we added is not part of the state.</span>
        <span class="pl-s1">state</span> <span class="pl-c1">=</span> <span class="pl-s1">tmp</span>[:<span class="pl-c1">-</span><span class="pl-c1">1</span>]
        <span class="pl-k">if</span> <span class="pl-s1">state</span> <span class="pl-c1">in</span> <span class="pl-s1">visited</span>:
            <span class="pl-k">continue</span>

        <span class="pl-s1">visited</span>.<span class="pl-en">add</span>(<span class="pl-s1">state</span>)

        <span class="pl-s1">time</span>, <span class="pl-s1">ore</span>, <span class="pl-s1">clay</span>, <span class="pl-s1">obs</span>, <span class="pl-s1">geo</span>, <span class="pl-s1">rore</span>, <span class="pl-s1">rclay</span>, <span class="pl-s1">robs</span>, <span class="pl-s1">rgeo</span>, <span class="pl-s1">did_not_build</span> <span class="pl-c1">=</span> <span class="pl-s1">tmp</span>

        <span class="pl-c"># ... unchanged ...</span>

        <span class="pl-s1">can_build</span> <span class="pl-c1">=</span> []

        <span class="pl-k">if</span> <span class="pl-s1">obs</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rgeo_cost_obs</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rgeo_cost_ore</span>:
            <span class="pl-c"># Did we have the chance to build this robot type in the previous iteration</span>
            <span class="pl-c"># but decided to not build anything instead? If so, we just wasted precious</span>
            <span class="pl-c"># time, it's pointless to do it now that we are late, the result is inevitably</span>
            <span class="pl-c"># going to be worse.</span>
            <span class="pl-k">if</span> <span class="pl-v">GEO</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">did_not_build</span>:
                <span class="pl-c"># Remember that we could have built a geode robot.</span>
                <span class="pl-s1">can_build</span>.<span class="pl-en">append</span>(<span class="pl-v">GEO</span>)
                <span class="pl-c"># Pass along an empyy list, we built a robot so we don't have a list</span>
                <span class="pl-c"># of robots that we "could have built" but didn't.</span>
                <span class="pl-s1">q</span>.<span class="pl-en">append</span>((..., []))

        <span class="pl-k">if</span> <span class="pl-s1">robs</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_obs_needed</span> <span class="pl-c1">and</span> <span class="pl-s1">clay</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">robs_cost_clay</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">robs_cost_ore</span>:
            <span class="pl-c"># Likewise.</span>
            <span class="pl-k">if</span> <span class="pl-v">OBS</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">did_not_build</span>:
                <span class="pl-s1">can_build</span>.<span class="pl-en">append</span>(<span class="pl-v">OBS</span>)
                <span class="pl-s1">q</span>.<span class="pl-en">append</span>((..., []))

        <span class="pl-k">if</span> <span class="pl-s1">rclay</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_clay_needed</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rclay_cost</span>:
            <span class="pl-c"># Likewise.</span>
            <span class="pl-k">if</span> <span class="pl-v">CLAY</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">did_not_build</span>:
                <span class="pl-s1">can_build</span>.<span class="pl-en">append</span>(<span class="pl-v">CLAY</span>)
                <span class="pl-s1">q</span>.<span class="pl-en">append</span>((..., []))

        <span class="pl-k">if</span> <span class="pl-s1">rore</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_ore_needed</span> <span class="pl-c1">and</span> <span class="pl-s1">ore</span> <span class="pl-c1">&gt;=</span> <span class="pl-s1">rore_cost</span>:
            <span class="pl-c"># Likewise.</span>
            <span class="pl-k">if</span> <span class="pl-v">ORE</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">did_not_build</span>:
                <span class="pl-s1">can_build</span>.<span class="pl-en">append</span>(<span class="pl-v">ORE</span>)
                <span class="pl-s1">q</span>.<span class="pl-en">append</span>((..., []))

        <span class="pl-c"># If we can also "wait" without building, pass along the list of robots</span>
        <span class="pl-c"># we couldhave built, but decided to not build instead.</span>
        <span class="pl-k">if</span> (<span class="pl-s1">robs</span> <span class="pl-c1">and</span> <span class="pl-s1">obs</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_obs_needed</span>) <span class="pl-c1">or</span> (<span class="pl-s1">rclay</span> <span class="pl-c1">and</span> <span class="pl-s1">clay</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_clay_needed</span>) <span class="pl-c1">or</span> <span class="pl-s1">ore</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">max_ore_needed</span>:
            <span class="pl-s1">q</span>.<span class="pl-en">append</span>((..., <span class="pl-s1">can_build</span>))

    <span class="pl-k">return</span> <span class="pl-s1">best</span></pre></div>
<p dir="auto">NOTE: in my complete solution I use a bitmask instead of a list to remember the
robots that could have been built. I simply represent "none" as 0, and any other
robot kind as a power of 2 (1, 2, 4, 8). Then I can <em>bitwise or</em> robot kinds
together. A value of <code>0b1111</code> for example means all robot kinds could have been
built.</p>
<p dir="auto">We can <em>finally</em> run the above function for each blueprint and collect the
results:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="total = 0
for bid, *blueprint in blueprints:
    total += bid * search(blueprint)"><pre><span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-k">for</span> <span class="pl-s1">bid</span>, <span class="pl-c1">*</span><span class="pl-s1">blueprint</span> <span class="pl-c1">in</span> <span class="pl-s1">blueprints</span>:
    <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-s1">bid</span> <span class="pl-c1">*</span> <span class="pl-en">search</span>(<span class="pl-s1">blueprint</span>)</pre></div>
<p dir="auto">Pardon me, but I cannot resist turning that loop into a
<a href="https://docs.python.org/3/library/functions.html#sum" rel="nofollow"><code>sum()</code></a> + <a href="https://www.python.org/dev/peps/pep-0289/" rel="nofollow">generator expression</a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="total = sum(bid * search(b) for bid, *b in blueprints)
print('Part 1:', total)"><pre><span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-en">sum</span>(<span class="pl-s1">bid</span> <span class="pl-c1">*</span> <span class="pl-en">search</span>(<span class="pl-s1">b</span>) <span class="pl-k">for</span> <span class="pl-s1">bid</span>, <span class="pl-c1">*</span><span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">blueprints</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">total</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-17" class="anchor" aria-hidden="true" href="#part-2-17"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">We are now told to only consider the <em>first 3</em> blueprints, calculate the maximum
amount of geodes achievable with them in <em>32</em> minutes, and then calculate the
product of these three numbers.</p>
<p dir="auto">Thankfully, all those optimizations we made in part one were worth it! We have
a reasonably fast function, and we can simply move our <code>time</code> variable in the
function signature to be passed as a parameter:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="-def search(blueprint):
+def search(blueprint, time=24):
     rore_cost, rclay_cost, robs_cost_ore, robs_cost_clay, rgeo_cost_ore, rgeo_cost_obs = blueprint
     max_ore_needed  = max(rore_cost, rclay_cost, robs_cost_ore, rgeo_cost_ore)
     max_clay_needed = robs_cost_clay
     max_obs_needed  = rgeo_cost_obs

-    time = 24
     best = 0
     ..."><pre><span class="pl-md"><span class="pl-md">-</span>def search(blueprint):</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>def search(blueprint, time=24):</span>
     rore_cost, rclay_cost, robs_cost_ore, robs_cost_clay, rgeo_cost_ore, rgeo_cost_obs = blueprint
     max_ore_needed  = max(rore_cost, rclay_cost, robs_cost_ore, rgeo_cost_ore)
     max_clay_needed = robs_cost_clay
     max_obs_needed  = rgeo_cost_obs

<span class="pl-md"><span class="pl-md">-</span>    time = 24</span>
     best = 0
     ...</pre></div>
<p dir="auto">All that's left to do is get our second star:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="total = 1
for bid, *blueprint in blueprints[:3]:
    total *= search(blueprint, 32)"><pre><span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
<span class="pl-k">for</span> <span class="pl-s1">bid</span>, <span class="pl-c1">*</span><span class="pl-s1">blueprint</span> <span class="pl-c1">in</span> <span class="pl-s1">blueprints</span>[:<span class="pl-c1">3</span>]:
    <span class="pl-s1">total</span> <span class="pl-c1">*=</span> <span class="pl-en">search</span>(<span class="pl-s1">blueprint</span>, <span class="pl-c1">32</span>)</pre></div>
<p dir="auto">Again, the above is simplifiable into a call to <a href="https://docs.python.org/3/library/math.html#math.prod" rel="nofollow"><code>math.prod()</code></a>
plus a generator expression:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="total = prod(search(b, 32) for _, *b in blueprints[:3])
print('Part 2:', total)"><pre><span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-en">prod</span>(<span class="pl-en">search</span>(<span class="pl-s1">b</span>, <span class="pl-c1">32</span>) <span class="pl-k">for</span> <span class="pl-s1">_</span>, <span class="pl-c1">*</span><span class="pl-s1">b</span> <span class="pl-c1">in</span> <span class="pl-s1">blueprints</span>[:<span class="pl-c1">3</span>])
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">total</span>)</pre></div>
<p dir="auto">Woah. Tough day, but definitely an entertaining one!</p>
<h2 dir="auto"><a id="user-content-day-20---grove-positioning-system" class="anchor" aria-hidden="true" href="#day-20---grove-positioning-system"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 20 - Grove Positioning System</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/20" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day20.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-18" class="anchor" aria-hidden="true" href="#part-1-18"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Simple problem today. We are given a list of integers, and we need to "shuffle"
them moving each one around according to the same rule. Each number, <em>in the
order they are originally given</em>, needs to be moved in the list a number of
steps forward or backward equal to its value (negatives numbers move backward).
The input list is cyclic, so moving forward past its end will mean wrapping back
to the first spot. After performing this operation on every single number, we
need to locate the number <code>0</code> and find the sum of the 1000th, 2000th and 3000th
number after it (remembering that the list is cyclic).</p>
<p dir="auto">We mostly have to follow the rules here. The only problem with the algorithm we
need to apply is that the mixing operation must be done for each number in the
original order we are given, but the operation itself moves numbers around: we
need to somehow keep track of them. It would be easy to do if all the numbers
were different, but we have duplicates in our input, and we need to track
duplicates separately. This can be done in different ways, but the simplest one
is to "wrap" each number up in an object that stores additional information to
help us unequivocally identify it.</p>
<p dir="auto">The wrapper object could be anything, for example, a tuple of the form
<code>(original_index, number)</code> would suffice, as the original index will be unique
for each number. This is what most people used today as it's intuitive and also
one of the first things that come to mind. I implemented this approach too,
<a href="/mebeim/aoc/blob/master/2022/misc/day20/tuples.py">the code is here</a>, however, I'm going to use a
wrapper <code>class</code>, which in my opinion makes things a bit more intuitive and is
also slightly faster using CPython.</p>
<p dir="auto">By default, in Python all instances of a class are different from each other
when compared, unless they implement special
<a href="https://docs.python.org/3/reference/datamodel.html#object.__eq__" rel="nofollow"><code>__eq__()</code> or <code>__ne__()</code></a> methods. We're going to define a class
that only holds one property (the number we want to wrap) and implements no
methods except the <a href="https://docs.python.org/3/reference/datamodel.html#object.__init__" rel="nofollow"><code>__init__()</code></a> constructor. Since we're going
to use this class a lot, listing the property name in the
<a href="https://docs.python.oattrgetterrg/3/reference/datamodel.html#slots" rel="nofollow"><code>__slots__</code></a> class variable will speed things up a bit (follow
the link to understand why).</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="class Number:
    __slots__ = 'value'

    def __init__(self, value):
        self.value = int(value)"><pre><span class="pl-k">class</span> <span class="pl-v">Number</span>:
    <span class="pl-s1">__slots__</span> <span class="pl-c1">=</span> <span class="pl-s">'value'</span>

    <span class="pl-k">def</span> <span class="pl-en">__init__</span>(<span class="pl-s1">self</span>, <span class="pl-s1">value</span>):
        <span class="pl-s1">self</span>.<span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">value</span>)</pre></div>
<p dir="auto">Now let's parse the input. It's going to be very easy as we have one integer per
line, just <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> everything to a <code>Number</code>, which will also
take care of <code>str</code> to <code>int</code> conversion (<code>self.value = int(value)</code>), and store
all the objects in a <code>tuple</code>. To mix stuff around, we can later copy the content
of said <code>tuple</code> into a <code>list</code>, which will allow us to remove and insert elements
as we please, while still iterating over the elements in the original order.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    order = tuple(map(Number, fin))"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">order</span> <span class="pl-c1">=</span> <span class="pl-en">tuple</span>(<span class="pl-en">map</span>(<span class="pl-v">Number</span>, <span class="pl-s1">fin</span>))</pre></div>
<p dir="auto">Onto the actual mixing, let's write a function for it. The rules to follow are
simple. For every number in the original order:</p>
<ol dir="auto">
<li>Find its index in the list using <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="nofollow"><code>.index()</code></a>.</li>
<li>Remove it with <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="nofollow"><code>.pop(index)</code></a>.</li>
<li>Calculate its new index and re-insert it with <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="nofollow"><code>.insert()</code></a>.</li>
</ol>
<p dir="auto">Remember: the list we are dealing with is actually cyclic, so if we exceed the
length we should wrap back around. This can be easily done with a modulo (<code>%</code>)
operation: <code>index % len(numbers)</code> will always return an index between <code>0</code> and
<code>len(numbers) - 1</code>, wrapping back to <code>0</code> when <code>index == len(numbers)</code>. What's
even cooler is that this will also work out of the box with negative values,
given the way Python's modulo is defined.</p>
<p dir="auto">Following the steps above, let's write a function to do the mixing and calculate
the final result. After mixing the numbers one by one according to their
original order, we'll simply scan the list to find the number whose <code>.value</code> is
<code>0</code> and then calculate the sum of the 1000th, 2000th and 3000th number past it.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def mix(order):
    # Copy everything into a list to be able to move things around.
    numbers = list(order)

    for num in order:
        # Find the number.
        i = numbers.index(num)
        # Remove it.
        numbers.pop(i)
        # Calculate its new position.
        i = (i + num.value) % len(numbers)
        # Re-insert it.
        numbers.insert(i, num)

    for zero_idx, num in enumerate(numbers):
        if num.value == 0:
            break

    res  = numbers[(zero_idx + 1000) % len(numbers)].value
    res += numbers[(zero_idx + 2000) % len(numbers)].value
    res += numbers[(zero_idx + 3000) % len(numbers)].value
    return res"><pre><span class="pl-k">def</span> <span class="pl-en">mix</span>(<span class="pl-s1">order</span>):
    <span class="pl-c"># Copy everything into a list to be able to move things around.</span>
    <span class="pl-s1">numbers</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-s1">order</span>)

    <span class="pl-k">for</span> <span class="pl-s1">num</span> <span class="pl-c1">in</span> <span class="pl-s1">order</span>:
        <span class="pl-c"># Find the number.</span>
        <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-s1">numbers</span>.<span class="pl-en">index</span>(<span class="pl-s1">num</span>)
        <span class="pl-c"># Remove it.</span>
        <span class="pl-s1">numbers</span>.<span class="pl-en">pop</span>(<span class="pl-s1">i</span>)
        <span class="pl-c"># Calculate its new position.</span>
        <span class="pl-s1">i</span> <span class="pl-c1">=</span> (<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-s1">num</span>.<span class="pl-s1">value</span>) <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">numbers</span>)
        <span class="pl-c"># Re-insert it.</span>
        <span class="pl-s1">numbers</span>.<span class="pl-en">insert</span>(<span class="pl-s1">i</span>, <span class="pl-s1">num</span>)

    <span class="pl-k">for</span> <span class="pl-s1">zero_idx</span>, <span class="pl-s1">num</span> <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">numbers</span>):
        <span class="pl-k">if</span> <span class="pl-s1">num</span>.<span class="pl-s1">value</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-k">break</span>

    <span class="pl-s1">res</span>  <span class="pl-c1">=</span> <span class="pl-s1">numbers</span>[(<span class="pl-s1">zero_idx</span> <span class="pl-c1">+</span> <span class="pl-c1">1000</span>) <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">numbers</span>)].<span class="pl-s1">value</span>
    <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-s1">numbers</span>[(<span class="pl-s1">zero_idx</span> <span class="pl-c1">+</span> <span class="pl-c1">2000</span>) <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">numbers</span>)].<span class="pl-s1">value</span>
    <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-s1">numbers</span>[(<span class="pl-s1">zero_idx</span> <span class="pl-c1">+</span> <span class="pl-c1">3000</span>) <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">numbers</span>)].<span class="pl-s1">value</span>
    <span class="pl-k">return</span> <span class="pl-s1">res</span></pre></div>
<p dir="auto"><strong>A little digression</strong>. It's worth noting that we are doing a lot of <code>.pop()</code>
and <code>.insert()</code> operations on a <code>list</code>. This is usually slow and requires
re-scanning the entire list to fix the position of any elements past the
insertion point. In fact, these operations take <em>O(n)</em> time. Another way of
solving the problem would be using <a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow"><code>collections.deque</code></a>,
which has fast pop and append operations on both ends, and exposes a
<a href="https://docs.python.org/3/library/collections.html#collections.deque.rotate" rel="nofollow"><code>.rotate()</code></a> method to cyclically rotate elements around <em>n</em>
spots in <em>O(n)</em>.</p>
<p dir="auto">The <code>deque</code> data structure was used by a lot of people, and I also wrote
<a href="/mebeim/aoc/blob/master/2022/misc/day20/deque.py">an alternative solution using it</a>. Even if at a first
glance it seems like it should be a faster solution, it really is not. This is
because we would still be doing 3 operations with complexity <em>O(n)</em> (one
<code>.index()</code> and two <code>.rotate()</code>), which is fundamentally the same we are already
doing with our list (one <code>.index()</code>, one <code>.pop()</code> and one <code>.insert()</code>). On top
of that, since under the hood
<a href="https://stackoverflow.com/a/6257048/3889449" rel="nofollow"><code>deque</code> is implemented as a doubly-linked list</a>, the <code>.index()</code>
method needs to traverse a linked list of pointers, which is an inherently
slower operation compared to scanning a contiguous chunk of memory holding the
elements.</p>
<p dir="auto">Now, getting back to the problem, we are basically done! All we need to do is
call the function to get our answer:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = mix(order)
print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">mix</span>(<span class="pl-s1">order</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-18" class="anchor" aria-hidden="true" href="#part-2-18"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">The numbers we had now change. Every number needs to be multiplied by
<code>811589153</code> before doing anything. Then, we need to do the same thing we did for
part 1, but this time the mixing happens <em>10 times in a row</em>.</p>
<p dir="auto">Well, we already have the <code>mix()</code> function ready. We can effortlessly add a
parameter to specify the number of times to mix, and wrap the mixing code in one
more <code>for</code> loop:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def mix(order, times=1): # Added times= parameter.
    numbers = list(order)

    for _ in range(times): # Mix as many times as needed.
        for num in order:
            i = numbers.index(num)
            numbers.pop(i)
            i = (i + num.value) % len(numbers)
            numbers.insert(i, num)

    for zero_idx, num in enumerate(numbers):
        if num.value == 0:
            break

    res  = numbers[(zero_idx + 1000) % len(numbers)].value
    res += numbers[(zero_idx + 2000) % len(numbers)].value
    res += numbers[(zero_idx + 3000) % len(numbers)].value
    return res"><pre><span class="pl-k">def</span> <span class="pl-en">mix</span>(<span class="pl-s1">order</span>, <span class="pl-s1">times</span><span class="pl-c1">=</span><span class="pl-c1">1</span>): <span class="pl-c"># Added times= parameter.</span>
    <span class="pl-s1">numbers</span> <span class="pl-c1">=</span> <span class="pl-en">list</span>(<span class="pl-s1">order</span>)

    <span class="pl-k">for</span> <span class="pl-s1">_</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">times</span>): <span class="pl-c"># Mix as many times as needed.</span>
        <span class="pl-k">for</span> <span class="pl-s1">num</span> <span class="pl-c1">in</span> <span class="pl-s1">order</span>:
            <span class="pl-s1">i</span> <span class="pl-c1">=</span> <span class="pl-s1">numbers</span>.<span class="pl-en">index</span>(<span class="pl-s1">num</span>)
            <span class="pl-s1">numbers</span>.<span class="pl-en">pop</span>(<span class="pl-s1">i</span>)
            <span class="pl-s1">i</span> <span class="pl-c1">=</span> (<span class="pl-s1">i</span> <span class="pl-c1">+</span> <span class="pl-s1">num</span>.<span class="pl-s1">value</span>) <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">numbers</span>)
            <span class="pl-s1">numbers</span>.<span class="pl-en">insert</span>(<span class="pl-s1">i</span>, <span class="pl-s1">num</span>)

    <span class="pl-k">for</span> <span class="pl-s1">zero_idx</span>, <span class="pl-s1">num</span> <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">numbers</span>):
        <span class="pl-k">if</span> <span class="pl-s1">num</span>.<span class="pl-s1">value</span> <span class="pl-c1">==</span> <span class="pl-c1">0</span>:
            <span class="pl-k">break</span>

    <span class="pl-s1">res</span>  <span class="pl-c1">=</span> <span class="pl-s1">numbers</span>[(<span class="pl-s1">zero_idx</span> <span class="pl-c1">+</span> <span class="pl-c1">1000</span>) <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">numbers</span>)].<span class="pl-s1">value</span>
    <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-s1">numbers</span>[(<span class="pl-s1">zero_idx</span> <span class="pl-c1">+</span> <span class="pl-c1">2000</span>) <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">numbers</span>)].<span class="pl-s1">value</span>
    <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-s1">numbers</span>[(<span class="pl-s1">zero_idx</span> <span class="pl-c1">+</span> <span class="pl-c1">3000</span>) <span class="pl-c1">%</span> <span class="pl-en">len</span>(<span class="pl-s1">numbers</span>)].<span class="pl-s1">value</span>
    <span class="pl-k">return</span> <span class="pl-s1">res</span></pre></div>
<p dir="auto">Now we can now modify the values of our numbers and run the algorithm again:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for num in order:
    num.value *= 811589153

answer = mix(order, 10)
print('Part 2:', answer)"><pre><span class="pl-k">for</span> <span class="pl-s1">num</span> <span class="pl-c1">in</span> <span class="pl-s1">order</span>:
    <span class="pl-s1">num</span>.<span class="pl-s1">value</span> <span class="pl-c1">*=</span> <span class="pl-c1">811589153</span>

<span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">mix</span>(<span class="pl-s1">order</span>, <span class="pl-c1">10</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<p dir="auto">As simple as that!</p>
<h2 dir="auto"><a id="user-content-day-21---monkey-math" class="anchor" aria-hidden="true" href="#day-21---monkey-math"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 21 - Monkey Math</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/21" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day21.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<p dir="auto"><strong>Note</strong>: my solution for part 2 of today's problem relies on the fact that the
input is a well-formed binary expression tree. This is not explicitly stated in
the problem statement, and is an assumption I (and many others) made to solve
the problem with a rather simple algorithm.</p>
<h3 dir="auto"><a id="user-content-part-1-19" class="anchor" aria-hidden="true" href="#part-1-19"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Today we are dealing with a <a href="https://en.wikipedia.org/wiki/Binary_expression_tree" rel="nofollow">binary expression tree</a>. We
are given a list of variables of the form <code>name: value</code>, where each <code>name</code> is a
string, while each <code>value</code> can either be an expression to compute on two other
variables (<code>a &lt;op&gt; b</code>), or an integer. We need to calculate the value of <code>root</code>.</p>
<p dir="auto">Let's start with input parsing. As already anticipated, we are dealing with a
tree, and <code>root</code> represents the root of the tree. We aren't explicitly told that
this is a tree (i.e. all nodes appear on the right at most once), we could
actually be dealing with a graph where multiple nodes can have edges pointing to
the same node. Nonetheless, as long as there are no loops, we are safe and the
expression result can be easily computed. As a side note, the inputs for today's
problem <em>do actually represent trees</em>.</p>
<p dir="auto">Each node can either be a binary expression node referencing other two nodes or
a leaf (a simple integer). We'll create a dictionary of the form <code>{name: value}</code>
where <code>value</code> is either an integer or a 3-element list of the form
<code>[name1, op, name2]</code>. The way our input is given, creating this structure is
trivial. All we need to do is <a href="https://docs.python.org/3/library/stdtypes.html#str.strip" rel="nofollow"><code>.strip()</code></a> and
<a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow"><code>.split()</code></a> each line in the correct way. First split on <code>': '</code>
to get the left and right side, then check if the right side is an integer
(using e.g. <a href="https://docs.python.org/3/library/stdtypes.html#str.isdigic" rel="nofollow"><code>.isdigit()</code></a>) to decide whether to parse it or
<code>.split()</code> again.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="T = {}
with open(...) as fin:
    for line in fin:
        a, b = line.strip().split(': ')
        T[a] = int(b) if b.isdigit() else b.split()"><pre><span class="pl-v">T</span> <span class="pl-c1">=</span> {}
<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
        <span class="pl-s1">a</span>, <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-s1">line</span>.<span class="pl-en">strip</span>().<span class="pl-en">split</span>(<span class="pl-s">': '</span>)
        <span class="pl-v">T</span>[<span class="pl-s1">a</span>] <span class="pl-c1">=</span> <span class="pl-en">int</span>(<span class="pl-s1">b</span>) <span class="pl-k">if</span> <span class="pl-s1">b</span>.<span class="pl-en">isdigit</span>() <span class="pl-k">else</span> <span class="pl-s1">b</span>.<span class="pl-en">split</span>()</pre></div>
<p dir="auto">Our tree <code>T</code> now contains all the information we need to calculate the value of
the expression. Starting at <code>'root'</code>, we can perform a simple
<a href="https://en.wikipedia.org/wiki/Depth-first_search" rel="nofollow">depth-first</a> traversal of the tree: if we encounter a "value" node we
can just return the value; while if we encounter an "expresison" node we can
first find the left and right operands' values recursively, then perform the
needed operation and return its result.</p>
<p dir="auto">To make our life easier, we can use a <code>dict</code> as map for the operations. We need
to perform addition (<code>+</code>), subtraction (<code>-</code>), multiplication (<code>*</code>) and division
(<code>/</code>). The <a href="https://docs.python.org/3/library/operator.html#" rel="nofollow"><code>operator</code></a> module has all these in the form of
functions taking two parameters. For the division, we'll use
<a href="https://docs.python.org/3/library/operator.html#operator.floordiv" rel="nofollow"><code>floordiv</code></a> (equivalent to the <code>//</code> operator).</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from operator import add, sub, mul, floordiv

OPMAP = {
    '+': add,
    '*': mul,
    '-': sub,
    '/': floordiv
}"><pre><span class="pl-k">from</span> <span class="pl-s1">operator</span> <span class="pl-k">import</span> <span class="pl-s1">add</span>, <span class="pl-s1">sub</span>, <span class="pl-s1">mul</span>, <span class="pl-s1">floordiv</span>

<span class="pl-v">OPMAP</span> <span class="pl-c1">=</span> {
    <span class="pl-s">'+'</span>: <span class="pl-s1">add</span>,
    <span class="pl-s">'*'</span>: <span class="pl-s1">mul</span>,
    <span class="pl-s">'-'</span>: <span class="pl-s1">sub</span>,
    <span class="pl-s">'/'</span>: <span class="pl-s1">floordiv</span>
}</pre></div>
<p dir="auto">To distinguish whether we are dealing with a value or expression node, we can
use <a href="https://docs.python.org/3/library/functions.html#isinstance" rel="nofollow"><code>isinstance()</code></a> to check whether <code>T[node]</code> is a
<code>list</code> or an <code>int</code>. We will treat <code>T</code> as a global variable for simplicity, but
it could also be passed as parameter.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def calc(value, list):
        # This is a value node, just return the value.
        return value

    # This is an expression node.
    l, op, r = value
    # Compute left and right value.
    lvalue = calc(l)
    rvalue = calc(r)
    # Perform operation and return result.
    return OPMAP[op](lvalue, rvalue)"><pre><span class="pl-k">def</span> <span class="pl-en">calc</span>(<span class="pl-s1">value</span>, <span class="pl-s1">list</span>):
        <span class="pl-c"># This is a value node, just return the value.</span>
        <span class="pl-k">return</span> <span class="pl-s1">value</span>

    <span class="pl-c"># This is an expression node.</span>
    <span class="pl-s1">l</span>, <span class="pl-s1">op</span>, <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-s1">value</span>
    <span class="pl-c"># Compute left and right value.</span>
    <span class="pl-s1">lvalue</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s1">l</span>)
    <span class="pl-s1">rvalue</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s1">r</span>)
    <span class="pl-c"># Perform operation and return result.</span>
    <span class="pl-k">return</span> <span class="pl-v">OPMAP</span>[<span class="pl-s1">op</span>](<span class="pl-s1">lvalue</span>, <span class="pl-s1">rvalue</span>)</pre></div>
<p dir="auto">Since our input seems to be a well-formed tree, we're only going to visit each
node exactly once. If that was not the case though, and our input was an acyclic
graph, we could optimize the above function with the help of
<a href="https://docs.python.org/3/library/functools.html#functools.lru_cache" rel="nofollow"><code>@lru_cache()</code></a> to <a href="https://en.wikipedia.org/wiki/Memoization" rel="nofollow">memoize</a> node
values and avoid wasting time computing them multiple times.</p>
<p dir="auto">To get our answer we can now simply call the function on <code>'root'</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = calc('root')
print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s">'root'</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-19" class="anchor" aria-hidden="true" href="#part-2-19"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">Now we are told that the <code>'root'</code> expression node is actually an equality check
between its left and right operand. Furthermore, we do not know the value of the
value node <code>'humn'</code>: we need to find a value for it such that the equality check
at <code>'root'</code> is satisfied.</p>
<p dir="auto">The complexity of this second part of the problem depends on the form of the two
expressions on the left and right side of the root equality check. We know that
we are looking for exactly one solution, so we cannot be dealing with
polynomials of degree higher than 1, meaning that we cannot find an expression
node of the form <code>humn * humn</code>, or in general <code>A * b</code> where both <code>A</code> and <code>B</code>
include <code>humn</code> in their subtrees.</p>
<p dir="auto">There's a small problem though: nobody technically guarantees that we cannot
encounter expression nodes of the form <code>humn + humn</code> (or <code>A + B</code> where either of
the two leads to <code>humn</code>) or similar. Encountering one of these would mean that
the input does not form a tree, but a graph, which would make the problem harder
to solve. Since as already stated in part 1, the inputs of today's problem are
all well-formed binary expression trees, we will assume that something like this
cannot happen. For this reason, I wrote an <code>is_tree()</code> check for this assumption
in my <a href="/mebeim/aoc/blob/master/2022/solutions/day21.py">complete solution</a>.</p>
<p dir="auto">What is happening now is that we essentially have one side of the tree at <code>root</code>
with an unknown value, but <em>we know it must match the value of the other side</em>.
Let's replace <code>T['humn']</code> with <code>None</code>, and modify the <code>calc()</code> function to tell
us which side has unknown value: whenever we encounter a value that is <code>None</code> or
an expression where one of the two operands has value <code>None</code>, we'll return
<code>None</code> to propagate it back to the top. While we are at it, let's also decorate
the function with <a href="https://docs.python.org/3/library/functools.html#functools.lru_cache" rel="nofollow"><code>@lru_cache()</code></a> since we're going to
call it multiple times for the same nodes now.</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="+@lru_cache()
 def calc(node):
     value = T[node]
     if not isinstance(value, list):
         return value

     l, op, r = value
     lvalue = calc(l)
     rvalue = calc(r)
+
+    if lvalue is None or rvalue is None:
+        return Noner
     return OPMAP[op](lvalue, rvalue)"><pre><span class="pl-mi1"><span class="pl-mi1">+</span>@lru_cache()</span>
 def calc(node):
     value = T[node]
     if not isinstance(value, list):
         return value

     l, op, r = value
     lvalue = calc(l)
     rvalue = calc(r)
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    if lvalue is None or rvalue is None:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        return Noner</span>
     return OPMAP[op](lvalue, rvalue)</pre></div>
<p dir="auto"><strong>Note</strong>: since we have decorated <code>calc</code> with <code>lru_cache</code>, we need to remember
calling <code>calc.cache_clear()</code> after using it for part 1, otherwise the cache will
hold the wrong values for part 2.</p>
<p dir="auto">Now we can check which side of the <code>root</code> node has value <code>None</code>, and we'll know
that its expected value should be the one of the other side:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="T['humn'] = None

l, _, r = T['root']
lvalue = calc(l)
rvalue = calc(r)

if lvalue is None:
    # 'humn' is on this side of the tree.
    # The expected value of this side of the tree is rvalue.
    ...
else:
    # 'humn' is on this side of the tree.
    # The expected value of this side of the tree is lvalue.
    ..."><pre><span class="pl-v">T</span>[<span class="pl-s">'humn'</span>] <span class="pl-c1">=</span> <span class="pl-c1">None</span>

<span class="pl-s1">l</span>, <span class="pl-s1">_</span>, <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-v">T</span>[<span class="pl-s">'root'</span>]
<span class="pl-s1">lvalue</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s1">l</span>)
<span class="pl-s1">rvalue</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s1">r</span>)

<span class="pl-k">if</span> <span class="pl-s1">lvalue</span> <span class="pl-c1">is</span> <span class="pl-c1">None</span>:
    <span class="pl-c"># 'humn' is on this side of the tree.</span>
    <span class="pl-c"># The expected value of this side of the tree is rvalue.</span>
    ...
<span class="pl-k">else</span>:
    <span class="pl-c"># 'humn' is on this side of the tree.</span>
    <span class="pl-c"># The expected value of this side of the tree is lvalue.</span>
    ...</pre></div>
<p dir="auto">To solve the problem and find the unknown value of <code>humn</code>, we can navigate the
tree recursively exploring the node whose value is unknown, keeping track of
what value it should have:</p>
<ul dir="auto">
<li>If we are at <code>humn</code>, we just found its value: it's the expected value we are
carrying around.</li>
<li>Otherwise we must be at some expression node, where one of the two child nodes
(left or right) has unknown value. We know the expected value of the current
node. We can compute the expected value of the node with unknown value
performing the opposite of the expression.</li>
</ul>
<p dir="auto">For example, assume that initially for <code>root</code> we have <code>lvalue = None</code> and
<code>rvalue = 123</code>: we know that <code>humn</code> is somewhere on the left of <code>root</code>, and that
the value of the left node should be <code>123</code>. We explore the left node, and find
an expression with operation <code>+</code>, <code>lvalue = 100</code> and <code>rvalue = None</code>. We know
that <code>lvalue + rvalue == 123</code>, and therefore <code>100 + rvalue == 123</code>. We can now
perform the opposite operation to find out that
<code>rvalue == 123 - lvalue == 123 - 100 == 23</code>. Now we can continue on the right
node knowing its expected value is <code>23</code>.</p>
<p dir="auto">Each time we explore a new node, we can compute the new expected value of either
of the two children as follows (let's call the expected value <code>E</code> for
conciseness):</p>
<ul dir="auto">
<li>If the operation is <code>+</code>: we know <code>E = L + R</code>, so <code>L = E - R</code> and <code>R = E - L</code>.</li>
<li>If the operation is <code>*</code>: we know <code>E = L * R</code>, so <code>L = E / R</code> and <code>R = E / L</code>.</li>
<li>If the operation is <code>-</code>: we know <code>E = L - R</code>, so <code>L = E + R</code> and <code>R = L - E</code>.</li>
<li>If the operation is <code>/</code>: we know <code>E = L / R</code>, so <code>L = E * R</code> and <code>R = L / E</code>.</li>
</ul>
<p dir="auto">Notice how in the above list we have two expressions that stand out. While in
general we have <code>L_or_R = E &lt;inverse_op&gt; R_or_L</code>, for <code>-</code> and <code>/</code> we have
different formulas to compute <code>L</code> and <code>R</code>. This is because these operations are
not <a href="https://en.wikipedia.org/wiki/Commutative_property" rel="nofollow">commutative</a>.</p>
<p dir="auto">Nonetheless, we can build another <code>dict</code> to use as mapping for the operations to
perform in the same way we did for part 1. Each function will take <code>E</code> as first
aprameter and the other side as second parameter. This time though we'll also
need to know if the value that we want to calculate is the left or the right: we
can do this with a <code>bool</code>. We can mostly still use the functions from the
<code>operator</code> module, except for calculating the right side of <code>/</code> and <code>-</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Calculate R or L knowing that E = L op R.
# True  = need to calculate L given E and R as parameters.
# False = need to calculate R given E and L as parameters.
REV_OPMAP = {
    ('+', True ): sub,
    ('+', False): sub,
    ('*', True ): floordiv,
    ('*', False): floordiv,
    ('-', True ): add,
    ('-', False): lambda x, l: l - x,
    ('/', True ): mul,
    ('/', False): lambda x, l: l // x,
}"><pre><span class="pl-c"># Calculate R or L knowing that E = L op R.</span>
<span class="pl-c"># True  = need to calculate L given E and R as parameters.</span>
<span class="pl-c"># False = need to calculate R given E and L as parameters.</span>
<span class="pl-v">REV_OPMAP</span> <span class="pl-c1">=</span> {
    (<span class="pl-s">'+'</span>, <span class="pl-c1">True</span> ): <span class="pl-s1">sub</span>,
    (<span class="pl-s">'+'</span>, <span class="pl-c1">False</span>): <span class="pl-s1">sub</span>,
    (<span class="pl-s">'*'</span>, <span class="pl-c1">True</span> ): <span class="pl-s1">floordiv</span>,
    (<span class="pl-s">'*'</span>, <span class="pl-c1">False</span>): <span class="pl-s1">floordiv</span>,
    (<span class="pl-s">'-'</span>, <span class="pl-c1">True</span> ): <span class="pl-s1">add</span>,
    (<span class="pl-s">'-'</span>, <span class="pl-c1">False</span>): <span class="pl-k">lambda</span> <span class="pl-s1">x</span>, <span class="pl-s1">l</span>: <span class="pl-s1">l</span> <span class="pl-c1">-</span> <span class="pl-s1">x</span>,
    (<span class="pl-s">'/'</span>, <span class="pl-c1">True</span> ): <span class="pl-s1">mul</span>,
    (<span class="pl-s">'/'</span>, <span class="pl-c1">False</span>): <span class="pl-k">lambda</span> <span class="pl-s1">x</span>, <span class="pl-s1">l</span>: <span class="pl-s1">l</span> <span class="pl-c1">//</span> <span class="pl-s1">x</span>,
}</pre></div>
<p dir="auto">We can now apply the logic explained above to recursively follow the side of the
tree where our "unknown value" (<code>humn</code>) is located and update its expected value
along the way:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def find_value(node, expected):
    if node == 'humn':
        # We reached the node we wanted and we now know its value.
        return expected

    l, op, r = T[node]
    lvalue = calc(l)
    rvalue = calc(r)

    # We know expected = L op R...

    if lvalue is None:
        # Left side has unknown value, calculate its expected value and keep going.
        expected = REV_OPMAP[op, True](expected, rvalue)
        return find_value(l, expected)

    # Right side has unknown value, calculate its expected value and keep going.
    expected = REV_OPMAP[op, False](expected, lvalue)
    return find_value(r, expected)"><pre><span class="pl-k">def</span> <span class="pl-en">find_value</span>(<span class="pl-s1">node</span>, <span class="pl-s1">expected</span>):
    <span class="pl-k">if</span> <span class="pl-s1">node</span> <span class="pl-c1">==</span> <span class="pl-s">'humn'</span>:
        <span class="pl-c"># We reached the node we wanted and we now know its value.</span>
        <span class="pl-k">return</span> <span class="pl-s1">expected</span>

    <span class="pl-s1">l</span>, <span class="pl-s1">op</span>, <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-v">T</span>[<span class="pl-s1">node</span>]
    <span class="pl-s1">lvalue</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s1">l</span>)
    <span class="pl-s1">rvalue</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s1">r</span>)

    <span class="pl-c"># We know expected = L op R...</span>

    <span class="pl-k">if</span> <span class="pl-s1">lvalue</span> <span class="pl-c1">is</span> <span class="pl-c1">None</span>:
        <span class="pl-c"># Left side has unknown value, calculate its expected value and keep going.</span>
        <span class="pl-s1">expected</span> <span class="pl-c1">=</span> <span class="pl-v">REV_OPMAP</span>[<span class="pl-s1">op</span>, <span class="pl-c1">True</span>](<span class="pl-s1">expected</span>, <span class="pl-s1">rvalue</span>)
        <span class="pl-k">return</span> <span class="pl-en">find_value</span>(<span class="pl-s1">l</span>, <span class="pl-s1">expected</span>)

    <span class="pl-c"># Right side has unknown value, calculate its expected value and keep going.</span>
    <span class="pl-s1">expected</span> <span class="pl-c1">=</span> <span class="pl-v">REV_OPMAP</span>[<span class="pl-s1">op</span>, <span class="pl-c1">False</span>](<span class="pl-s1">expected</span>, <span class="pl-s1">lvalue</span>)
    <span class="pl-k">return</span> <span class="pl-en">find_value</span>(<span class="pl-s1">r</span>, <span class="pl-s1">expected</span>)</pre></div>
<p dir="auto">We can now find the answer we were looking for:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="T['humn'] = None

l, _, r = T['root']
lvalue = calc(l)
rvalue = calc(r)

if lvalue is None:
    answer = find_value(l, rvalue)
else:
    answer = find_value(r, rvalue)"><pre><span class="pl-v">T</span>[<span class="pl-s">'humn'</span>] <span class="pl-c1">=</span> <span class="pl-c1">None</span>

<span class="pl-s1">l</span>, <span class="pl-s1">_</span>, <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-v">T</span>[<span class="pl-s">'root'</span>]
<span class="pl-s1">lvalue</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s1">l</span>)
<span class="pl-s1">rvalue</span> <span class="pl-c1">=</span> <span class="pl-en">calc</span>(<span class="pl-s1">r</span>)

<span class="pl-k">if</span> <span class="pl-s1">lvalue</span> <span class="pl-c1">is</span> <span class="pl-c1">None</span>:
    <span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">find_value</span>(<span class="pl-s1">l</span>, <span class="pl-s1">rvalue</span>)
<span class="pl-k">else</span>:
    <span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">find_value</span>(<span class="pl-s1">r</span>, <span class="pl-s1">rvalue</span>)</pre></div>
<p dir="auto">Since <code>root</code> is <code>L == R</code>, we could also re-write it as <code>L - R</code>, knowing that the
resoult should be <code>0</code>, and simplify the above logic:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="T['humn'] = None
T['root'][1] = '-'
answer = find_value('root', 0)
print('Part 2:', answer)"><pre><span class="pl-v">T</span>[<span class="pl-s">'humn'</span>] <span class="pl-c1">=</span> <span class="pl-c1">None</span>
<span class="pl-v">T</span>[<span class="pl-s">'root'</span>][<span class="pl-c1">1</span>] <span class="pl-c1">=</span> <span class="pl-s">'-'</span>
<span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">find_value</span>(<span class="pl-s">'root'</span>, <span class="pl-c1">0</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-22---monkey-map" class="anchor" aria-hidden="true" href="#day-22---monkey-map"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 22 - Monkey Map</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/22" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day22.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-20" class="anchor" aria-hidden="true" href="#part-1-20"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Ah, moving inside a 2D ASCII grid yet again. What's different this time? Let's
see...</p>
<p dir="auto">We are given a 2D grid as input, which however looks kind of weird, it's not the
usual rectangle, but instead, it has multiple rectangular sections connected
together. There are walls (<code>#</code>) and free cells (<code>.</code>) we can walk on. Other than
the map, we are given a list of movement instructions in the form of a single,
long string. Instructions are of two types: turning 90 degrees in place (<code>L</code> or
<code>R</code>) or moving forward a given number of steps. Whenever we bump into a wall, we
need to stop advancing, and whenever we fall off of the grid we wrap around and
continue on the opposite side (i.e. if there isn't a wall immediately stopping
us there).</p>
<p dir="auto">We start facing right, and we need to determine our final position and facing
direction after following all the instructions. The answer to provide is a
linear combination of our row, column and facing direction expressed as a
number: <em>1000r + 4c + d</em>.</p>
<p dir="auto">The task looks simple enough. The only annoying part is the wrapping around, but
that can be solved quite easily once we understand how to represent the grid.</p>
<p dir="auto">Our input looks something like this (scaled down):</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="    .#...#..
    ...#....
    ..#...#.
    ##..
    .#.#
    .#..
........
#.#...#.
#....#..
.#..
.#..
....

14R42L38R43L9L2L14L11..."><pre lang="none" class="notranslate"><code>    .#...#..
    ...#....
    ..#...#.
    ##..
    .#.#
    .#..
........
#.#...#.
#....#..
.#..
.#..
....

14R42L38R43L9L2L14L11...
</code></pre></div>
<p dir="auto">We can only walk on free cells (<code>.</code>), but not on empty ones (spaces), and
coordinates start from the top-left at row 1, column 1. We are initially on row
1 on the first free cell (<code>.</code>). The final line of input contains the movement
instructions to follow. They are all weirdly compressed together, so we'll
somehow need to separate them later.</p>
<p dir="auto">As the problem statement mentions, directions can be considered integers. Let's
create some global constants for directions, cell types and row/column deltas to
apply to move in a given direction:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="WALL, FREE, EMPTY = '#. '
RIGHT, DOWN, LEFT, UP = range(4)

DIRMAP = [
    (0, 1),  # moving right
    (1, 0),  # moving down
    (0, -1), # moving left
    (-1, 0), # moving up
]"><pre><span class="pl-v">WALL</span>, <span class="pl-v">FREE</span>, <span class="pl-v">EMPTY</span> <span class="pl-c1">=</span> <span class="pl-s">'#. '</span>
<span class="pl-v">RIGHT</span>, <span class="pl-v">DOWN</span>, <span class="pl-v">LEFT</span>, <span class="pl-v">UP</span> <span class="pl-c1">=</span> <span class="pl-en">range</span>(<span class="pl-c1">4</span>)

<span class="pl-v">DIRMAP</span> <span class="pl-c1">=</span> [
    (<span class="pl-c1">0</span>, <span class="pl-c1">1</span>),  <span class="pl-c"># moving right</span>
    (<span class="pl-c1">1</span>, <span class="pl-c1">0</span>),  <span class="pl-c"># moving down</span>
    (<span class="pl-c1">0</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>), <span class="pl-c"># moving left</span>
    (<span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">0</span>), <span class="pl-c"># moving up</span>
]</pre></div>
<p dir="auto">For now, let's parse this weirdly shaped grid into a list of strings. We can
just read the entire input and use <a href="https://docs.python.org/3/library/stdtypes.html#str.splitlines" rel="nofollow"><code>.splitlines()</code></a>, then
extract the last line containing movement instructions and throw away the empty
one.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="grid = []

with open(...) as fin:
    grid  = fin.read().splitlines()
    moves = grid[-1]  # Take last line with movement instructions.
    grid  = grid[:-2] # Throw away last two lines."><pre><span class="pl-s1">grid</span> <span class="pl-c1">=</span> []

<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">grid</span>  <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">splitlines</span>()
    <span class="pl-s1">moves</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-c1">-</span><span class="pl-c1">1</span>]  <span class="pl-c"># Take last line with movement instructions.</span>
    <span class="pl-s1">grid</span>  <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[:<span class="pl-c1">-</span><span class="pl-c1">2</span>] <span class="pl-c"># Throw away last two lines.</span></pre></div>
<p dir="auto">Because of the shape of the grid, not all lines of input are of the same length,
and in fact, the top part of the grid is way wider than the bottom one. To make
our life a lot easier, we can just take the maximum width and turn the grid into
an actual rectangle, expanding shorter rows with empty spaces through
<a href="https://docs.python.org/3/library/stdtypes.html#str.ljust" rel="nofollow"><code>.ljust()</code></a>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="HEIGHT, WIDTH = len(grid), max(map(len, grid))

for i in range(HEIGHT):
    grid[i] = grid[i].ljust(WIDTH, EMPTY)"><pre><span class="pl-v">HEIGHT</span>, <span class="pl-v">WIDTH</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">grid</span>), <span class="pl-en">max</span>(<span class="pl-en">map</span>(<span class="pl-s1">len</span>, <span class="pl-s1">grid</span>))

<span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">HEIGHT</span>):
    <span class="pl-s1">grid</span>[<span class="pl-s1">i</span>] <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-s1">i</span>].<span class="pl-en">ljust</span>(<span class="pl-v">WIDTH</span>, <span class="pl-v">EMPTY</span>)</pre></div>
<p dir="auto">Additionally, we will need an easy way to detect whether we are going out of
bounds (and therefore need to wrap around). To avoid a bunch of annoying
bound-checking <code>if</code> statements, we can simply add two rows of empty cells at the
top and at the bottom of the grid, as weel as two columns of empty cells on the
left and the right. This also makes the actual grid start at <code>grid[1][x]</code> (where
<code>x</code> is the column of the leftmost free cell in the top row) instead of
<code>grid[0][x]</code>, which is nice since the coordinate system used in the problem
statement considers the top-left as row 1, column 1.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for i in range(HEIGHT):
    # Add two empty columns left and right.
    grid[i] = EMPTY + grid[i].ljust(WIDTH, EMPTY) + EMPTY

HEIGHT += 2
WIDTH  += 2

# Add two empty rows at the top and at the bottom.
grid = [EMPTY * WIDTH] + grid + [EMPTY * WIDTH]"><pre><span class="pl-k">for</span> <span class="pl-s1">i</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">HEIGHT</span>):
    <span class="pl-c"># Add two empty columns left and right.</span>
    <span class="pl-s1">grid</span>[<span class="pl-s1">i</span>] <span class="pl-c1">=</span> <span class="pl-v">EMPTY</span> <span class="pl-c1">+</span> <span class="pl-s1">grid</span>[<span class="pl-s1">i</span>].<span class="pl-en">ljust</span>(<span class="pl-v">WIDTH</span>, <span class="pl-v">EMPTY</span>) <span class="pl-c1">+</span> <span class="pl-v">EMPTY</span>

<span class="pl-v">HEIGHT</span> <span class="pl-c1">+=</span> <span class="pl-c1">2</span>
<span class="pl-v">WIDTH</span>  <span class="pl-c1">+=</span> <span class="pl-c1">2</span>

<span class="pl-c"># Add two empty rows at the top and at the bottom.</span>
<span class="pl-s1">grid</span> <span class="pl-c1">=</span> [<span class="pl-v">EMPTY</span> <span class="pl-c1">*</span> <span class="pl-v">WIDTH</span>] <span class="pl-c1">+</span> <span class="pl-s1">grid</span> <span class="pl-c1">+</span> [<span class="pl-v">EMPTY</span> <span class="pl-c1">*</span> <span class="pl-v">WIDTH</span>]</pre></div>
<p dir="auto">Now, in order to iterate over the movement instructions we'll need to separate
turning instructions (<code>L</code>, <code>R</code>) from advancement instructions (numbers). We can
do this with a silly hack: add spaces around any <code>L</code> and <code>R</code> using
<a href="https://docs.python.org/3/library/stdtypes.html#str.replace" rel="nofollow"><code>.replace()</code></a>, and then split the whole thing. We can then use
<a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> with a <a href="https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions" rel="nofollow">lambda</a> to transform integers into
actual <code>int</code>s as needed:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="moves = moves.replace('R', ' R ').replace('L', ' L ').split()
moves = tuple(map(lambda m: m if m in 'LR' else int(m), moves))"><pre><span class="pl-s1">moves</span> <span class="pl-c1">=</span> <span class="pl-s1">moves</span>.<span class="pl-en">replace</span>(<span class="pl-s">'R'</span>, <span class="pl-s">' R '</span>).<span class="pl-en">replace</span>(<span class="pl-s">'L'</span>, <span class="pl-s">' L '</span>).<span class="pl-en">split</span>()
<span class="pl-s1">moves</span> <span class="pl-c1">=</span> <span class="pl-en">tuple</span>(<span class="pl-en">map</span>(<span class="pl-k">lambda</span> <span class="pl-s1">m</span>: <span class="pl-s1">m</span> <span class="pl-k">if</span> <span class="pl-s1">m</span> <span class="pl-c1">in</span> <span class="pl-s">'LR'</span> <span class="pl-k">else</span> <span class="pl-en">int</span>(<span class="pl-s1">m</span>), <span class="pl-s1">moves</span>))</pre></div>
<p dir="auto">To simulate walking around the grid, we'll need to handle wrapping around it.
Let's write a function to simulate one single step, and handle the wrapping.</p>
<p dir="auto">The way our grid is shaped, wrapping around going in a certain direction means
scanning the opposite side of our grid until we find the first cell that is not
empty. We can do this with a simple <code>for</code> loop, for example, wrapping from the
right side back to the left side while going right:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="for c in range(WIDTH):
    if grid[r][c] != EMPTY:
        break

newc = c"><pre><span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">WIDTH</span>):
    <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">!=</span> <span class="pl-v">EMPTY</span>:
        <span class="pl-k">break</span>

<span class="pl-s1">newc</span> <span class="pl-c1">=</span> <span class="pl-s1">c</span></pre></div>
<p dir="auto">The above <code>for</code> loop scans the grid until it finds a cell that satisfies a
specific condition. With the help of a filtered
<a href="https://www.python.org/dev/peps/pep-0289/" rel="nofollow">generator expression</a> and the <a href="https://docs.p%5Bd20-alt-deque%5D.ython.org/3/library/functions.html#next" rel="nofollow"><code>next()</code></a>
built-in, this can be simplified to a single line of code:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="newc = next(c for c in range(WIDTH) if grid[r][c] != EMPTY)"><pre><span class="pl-s1">newc</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">c</span> <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">WIDTH</span>) <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">!=</span> <span class="pl-v">EMPTY</span>)</pre></div>
<p dir="auto">We can apply the above logic for all four directions. Here's the final function:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def step(r, c, direction):
    dr, dc = DIRMAP[direction]
    r += dr
    c += dc

    if grid[r][c] == EMPTY:
        # We fell off the edge of the grid, we need to wrap to the opposite side.
        if direction == RIGHT:
            c = next(c for c in range(WIDTH) if grid[r][c] != EMPTY)
        elif direction == LEFT:
            c = next(c for c in range(WIDTH - 1, -1, -1) if grid[r][c] != EMPTY)
        elif direction == DOWN:
            r = next(r for r in range(HEIGHT) if grid[r][c] != EMPTY)
        else:
            r = next(r for r in range(HEIGHT - 1, -1, -1) if grid[r][c] != EMPTY)

    return r, c"><pre><span class="pl-k">def</span> <span class="pl-en">step</span>(<span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">direction</span>):
    <span class="pl-s1">dr</span>, <span class="pl-s1">dc</span> <span class="pl-c1">=</span> <span class="pl-v">DIRMAP</span>[<span class="pl-s1">direction</span>]
    <span class="pl-s1">r</span> <span class="pl-c1">+=</span> <span class="pl-s1">dr</span>
    <span class="pl-s1">c</span> <span class="pl-c1">+=</span> <span class="pl-s1">dc</span>

    <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">==</span> <span class="pl-v">EMPTY</span>:
        <span class="pl-c"># We fell off the edge of the grid, we need to wrap to the opposite side.</span>
        <span class="pl-k">if</span> <span class="pl-s1">direction</span> <span class="pl-c1">==</span> <span class="pl-v">RIGHT</span>:
            <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">c</span> <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">WIDTH</span>) <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">!=</span> <span class="pl-v">EMPTY</span>)
        <span class="pl-k">elif</span> <span class="pl-s1">direction</span> <span class="pl-c1">==</span> <span class="pl-v">LEFT</span>:
            <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">c</span> <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">WIDTH</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>) <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">!=</span> <span class="pl-v">EMPTY</span>)
        <span class="pl-k">elif</span> <span class="pl-s1">direction</span> <span class="pl-c1">==</span> <span class="pl-v">DOWN</span>:
            <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">r</span> <span class="pl-k">for</span> <span class="pl-s1">r</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">HEIGHT</span>) <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">!=</span> <span class="pl-v">EMPTY</span>)
        <span class="pl-k">else</span>:
            <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-en">next</span>(<span class="pl-s1">r</span> <span class="pl-k">for</span> <span class="pl-s1">r</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">HEIGHT</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>) <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">!=</span> <span class="pl-v">EMPTY</span>)

    <span class="pl-k">return</span> <span class="pl-s1">r</span>, <span class="pl-s1">c</span></pre></div>
<p dir="auto">Since there's only one unique opposite cell for each border cell of our grid, we
if we want we can also cache the results through
<a href="https://docs.python.org/3/library/functools.html#functools.lru_cache" rel="nofollow"><code>lru_cache()</code></a> by moving the wrapping logic inside four
different functions, for example like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from functools import lru_cache

@lru_cache()
def leftmost_col(r):
    return next(c for c in range(WIDTH) if grid[r][c] != EMPTY)"><pre><span class="pl-k">from</span> <span class="pl-s1">functools</span> <span class="pl-k">import</span> <span class="pl-s1">lru_cache</span>

<span class="pl-en">@<span class="pl-en">lru_cache</span>()</span>
<span class="pl-k">def</span> <span class="pl-en">leftmost_col</span>(<span class="pl-s1">r</span>):
    <span class="pl-k">return</span> <span class="pl-en">next</span>(<span class="pl-s1">c</span> <span class="pl-k">for</span> <span class="pl-s1">c</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-v">WIDTH</span>) <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">r</span>][<span class="pl-s1">c</span>] <span class="pl-c1">!=</span> <span class="pl-v">EMPTY</span>)</pre></div>
<p dir="auto">Now that we have a function to perform a single step in a given direction, we
can write a function to follow all the movement instructions in order. The only
thing we have to worry about is stopping at walls. The cell to start from will
be the leftmost free cell (<code>.</code>) on row <code>1</code>, so we can use
<a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists" rel="nofollow"><code>.index()</code></a> to find the column.</p>
<p dir="auto">We'll be encoding directions as an integer modulo <code>4</code>, that is from <code>0</code> to <code>3</code>:
each time we turn left (<code>L</code>) we'll decrement the number, and each time we turn
right (<code>R</code>) we'll increment it. When moving forward, we'll advance one <code>step()</code>
at a time until we either finish moving forward or hit a wall.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def walk(grid, moves):
    r = 1
    c = grid[1].index(FREE)
    d = RIGHT

    for move in moves:
        if move == 'L':
            d = (d - 1) % 4
        elif move == 'R':
            d = (d + 1) % 4
        else:
            for _ in range(move):
                newr, newc = step(r, c, d)

                # Stop if we hit a wall.
                if grid[newr][newc] == WALL:
                    break

                # Otherwise just keep going.
                r, c = newr, newc

    # Calculate the final answer.
    return 1000 * r + 4 * c + d"><pre><span class="pl-k">def</span> <span class="pl-en">walk</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">moves</span>):
    <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>
    <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-s1">grid</span>[<span class="pl-c1">1</span>].<span class="pl-en">index</span>(<span class="pl-v">FREE</span>)
    <span class="pl-s1">d</span> <span class="pl-c1">=</span> <span class="pl-v">RIGHT</span>

    <span class="pl-k">for</span> <span class="pl-s1">move</span> <span class="pl-c1">in</span> <span class="pl-s1">moves</span>:
        <span class="pl-k">if</span> <span class="pl-s1">move</span> <span class="pl-c1">==</span> <span class="pl-s">'L'</span>:
            <span class="pl-s1">d</span> <span class="pl-c1">=</span> (<span class="pl-s1">d</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>) <span class="pl-c1">%</span> <span class="pl-c1">4</span>
        <span class="pl-k">elif</span> <span class="pl-s1">move</span> <span class="pl-c1">==</span> <span class="pl-s">'R'</span>:
            <span class="pl-s1">d</span> <span class="pl-c1">=</span> (<span class="pl-s1">d</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>) <span class="pl-c1">%</span> <span class="pl-c1">4</span>
        <span class="pl-k">else</span>:
            <span class="pl-k">for</span> <span class="pl-s1">_</span> <span class="pl-c1">in</span> <span class="pl-en">range</span>(<span class="pl-s1">move</span>):
                <span class="pl-s1">newr</span>, <span class="pl-s1">newc</span> <span class="pl-c1">=</span> <span class="pl-en">step</span>(<span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">d</span>)

                <span class="pl-c"># Stop if we hit a wall.</span>
                <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">newr</span>][<span class="pl-s1">newc</span>] <span class="pl-c1">==</span> <span class="pl-v">WALL</span>:
                    <span class="pl-k">break</span>

                <span class="pl-c"># Otherwise just keep going.</span>
                <span class="pl-s1">r</span>, <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-s1">newr</span>, <span class="pl-s1">newc</span>

    <span class="pl-c"># Calculate the final answer.</span>
    <span class="pl-k">return</span> <span class="pl-c1">1000</span> <span class="pl-c1">*</span> <span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-c1">4</span> <span class="pl-c1">*</span> <span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-s1">d</span></pre></div>
<p dir="auto">All that's left to do is call the function we just wrote, which alredy calculates
the final result as <code>1000 * r + 4 * c + d</code> for us:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = walk(grid, moves)
print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">walk</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">moves</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-20" class="anchor" aria-hidden="true" href="#part-2-20"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">For the second part of the problem, we are told that the weirdly-shaped grid we
are working with is actually the <a href="https://en.wikipedia.org/wiki/Net_(polyhedron)" rel="nofollow"><strong>net</strong></a> of a 3D cube (i.e. an
"unfolded" cube laid out on a plane). The steps we need to make now take place
<em>on the outer surface of the cube</em>, so wrapping around happens completely
differently. The result we need to provide is the same as before: considering
the grid we have, we want the value of <em>1000r + 4r + d</em> given the final row (r),
column (c) and facing direction (d).</p>
<p dir="auto">"Falling off" of an edge now is a completely different story. It's very hard to
visualize with only ASCII art, or even with just pen and paper, so I'd recommend
drawing the net, cropping and folding an actual paper cube with uniquely
numbered faces (from 1 to 6).
<a href="/mebeim/aoc/blob/master/2022/misc/day22/paper_cube.jpg">This is what I did while originally solving the problem</a>, and I
doubt I would have been able to solve it without it.</p>
<p dir="auto">This is the numbering we'll use to identify faces:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="     +----+----+
     | 1  | 2  |
     |    |    |
     +----+----+
     | 3  |
     |    |
+----+----+
| 4  | 5  |
|    |    |
+----+----+
| 6  |
|    |
+----+"><pre lang="none" class="notranslate"><code>     +----+----+
     | 1  | 2  |
     |    |    |
     +----+----+
     | 3  |
     |    |
+----+----+
| 4  | 5  |
|    |    |
+----+----+
| 6  |
|    |
+----+
</code></pre></div>
<p dir="auto">Now, considering that the above is the 2D net of a 3D cube, the funny thing
about wrapping around the edges of the cube is that we can end up on an entirely
different face, <em>facing a different direction</em> (as seen from the 2D net
perspective). For example, if we reach the right edge of face 2 going right,
we'll end up on the right edge of face 5 <em>going left</em>! Even weirder, if we reach
the top edge of face 1 going up, we'll end up <em>on the left edge of face 6 going
right</em>!</p>
<p dir="auto">This is extremely counter-intuitive to reason about on the 2D net of our cube,
but here's a diagram to illustrate it:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;x
v           ^
v        +--^-+----+
v        | 1^ | 2  |
v        |    |   &gt;&gt;&gt;&gt;x
v        +----+----+  v
v        | 3  |       v
v        |    |       v
v   +----+----+       v
v   | 4  | 5  |       v
v   |    |   &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;x
v   +----+----+
v   | 6  |
x&gt;&gt;&gt;&gt;&gt;   |
    +----+"><pre lang="none" class="notranslate"><code>x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;x
v           ^
v        +--^-+----+
v        | 1^ | 2  |
v        |    |   &gt;&gt;&gt;&gt;x
v        +----+----+  v
v        | 3  |       v
v        |    |       v
v   +----+----+       v
v   | 4  | 5  |       v
v   |    |   &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;x
v   +----+----+
v   | 6  |
x&gt;&gt;&gt;&gt;&gt;   |
    +----+
</code></pre></div>
<p dir="auto">If we had to solve a more generalized version of the problem, we would also have
to deal with the fact that a 3D cube can actually be represented by
<a href="https://en.wikipedia.org/wiki/Net_(polyhedron)#/media/File:The_11_cubic_nets.svg" rel="nofollow"><em>11 different 2D nets</em></a> (layed out in different shapes).
Thankfully, we are given a fixed net layout, and thus we know which edges of
which faces are adjacent to one another. If this wasn't the case, we would also
need to detect that and act accordingly, figuring out the wrapping rules for any
possible net.</p>
<p dir="auto">In any case, after building and inspecting our own paper cube with faces labeled
as above, the wrapping becomes much simpler to understand. In terms of code,
we'll need a <code>face()</code> function to understand on which face we are standing and
a new <code>step()</code> function to apply the wrapping rules correctly.</p>
<p dir="auto">Our faces are 50x50, and we already know the minimum and maximum row/column for
each of them:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="1    51   101  151
|    |    |    |
|    +----+----+--- 1
|    | 1  | 2  |
|    |    |    |
|    +----+----+--- 51
|    | 3  |
|    |    |
+----+----+-------- 101
| 4  | 5  |
|    |    |
+----+----+-------- 151
| 6  |
|    |
+----+------------- 201"><pre lang="none" class="notranslate"><code>1    51   101  151
|    |    |    |
|    +----+----+--- 1
|    | 1  | 2  |
|    |    |    |
|    +----+----+--- 51
|    | 3  |
|    |    |
+----+----+-------- 101
| 4  | 5  |
|    |    |
+----+----+-------- 151
| 6  |
|    |
+----+------------- 201
</code></pre></div>
<p dir="auto">Accounting for the fact that we added one additional row/column on each side, we
can build a simple global <code>tuple</code> of constants to identify the bounds of our six
faces:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="FACES = (
    # rmin, rmax, cmin, cmax
    ( 1    , 50  , 51  , 100 ),
    ( 1    , 50  , 101 , 150 ),
    ( 51   , 100 , 51  , 100 ),
    ( 101  , 150 , 1   , 50  ),
    ( 101  , 150 , 51  , 100 ),
    ( 151  , 200 , 1   , 50  )
)"><pre><span class="pl-v">FACES</span> <span class="pl-c1">=</span> (
    <span class="pl-c"># rmin, rmax, cmin, cmax</span>
    ( <span class="pl-c1">1</span>    , <span class="pl-c1">50</span>  , <span class="pl-c1">51</span>  , <span class="pl-c1">100</span> ),
    ( <span class="pl-c1">1</span>    , <span class="pl-c1">50</span>  , <span class="pl-c1">101</span> , <span class="pl-c1">150</span> ),
    ( <span class="pl-c1">51</span>   , <span class="pl-c1">100</span> , <span class="pl-c1">51</span>  , <span class="pl-c1">100</span> ),
    ( <span class="pl-c1">101</span>  , <span class="pl-c1">150</span> , <span class="pl-c1">1</span>   , <span class="pl-c1">50</span>  ),
    ( <span class="pl-c1">101</span>  , <span class="pl-c1">150</span> , <span class="pl-c1">51</span>  , <span class="pl-c1">100</span> ),
    ( <span class="pl-c1">151</span>  , <span class="pl-c1">200</span> , <span class="pl-c1">1</span>   , <span class="pl-c1">50</span>  )
)</pre></div>
<p dir="auto">Given a row and column, we can now identify the face by iterating over the above
tuple and checking the coordinates against the bounds.</p>
<p dir="auto">Another important thing to remember is that whenever we need to wrap around and
switch faces, we will need to keep the correct offset on the edge of the new
face. For example, if we are on face 1 going up, we'll wrap to the left edge of
face 6. On this edge, the distance from the top of face 6 will be the same as
the previous distance from the left of face 1.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;x
v   x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;x    ^
v   v        +^----^+
v   v        |^    ^|
v   v        |  1   |
v   v        |      |
v   v        +------+
v   v
v   v +------+
v   x&gt;&gt;&gt;     |
v     |  6   |
x&gt;&gt;&gt;&gt;&gt;&gt;&gt;     |
      +------+"><pre lang="none" class="notranslate"><code>x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;x
v   x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;x    ^
v   v        +^----^+
v   v        |^    ^|
v   v        |  1   |
v   v        |      |
v   v        +------+
v   v
v   v +------+
v   x&gt;&gt;&gt;     |
v     |  6   |
x&gt;&gt;&gt;&gt;&gt;&gt;&gt;     |
      +------+
</code></pre></div>
<p dir="auto">Similarly, if we are on face 1 going left, we'll wrap to the left edge of face
4: this time the distance from the top of face 4 will be the same as the
previous distance from the <em>bottom</em> of face 1.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="             +------+
x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;     |
v            |  1   |
v   x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;     |
v   v        +------+
v   v
v   v +------+
v   x&gt;&gt;&gt;     |
v     |  4   |
x&gt;&gt;&gt;&gt;&gt;&gt;&gt;     |
      +------+"><pre lang="none" class="notranslate"><code>             +------+
x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;     |
v            |  1   |
v   x&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;     |
v   v        +------+
v   v
v   v +------+
v   x&gt;&gt;&gt;     |
v     |  4   |
x&gt;&gt;&gt;&gt;&gt;&gt;&gt;     |
      +------+
</code></pre></div>
<p dir="auto">To take the above into account, in our <code>face()</code> function, in addition to
identifying the face we are on, we'll also calculate the <em>relative</em> row and
column within the face. This will later be useful to calculate the exact
position on the edge of the new face after wrapping.</p>
<p dir="auto">To identify the face, we'll iterate over the previously created <code>FACE</code> global
tuple, using <a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow"><code>enumerate()</code></a> to start counting from <code>1</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def face(r, c):
    for face_id, (rmin, rmax, cmin, cmax) in enumerate(FACES, 1):
        if rmin &lt;= r &lt;= rmax and cmin &lt;= c &lt;= cmax:
            return face_id, r - rmin + 1, c - cmin + 1"><pre><span class="pl-k">def</span> <span class="pl-en">face</span>(<span class="pl-s1">r</span>, <span class="pl-s1">c</span>):
    <span class="pl-k">for</span> <span class="pl-s1">face_id</span>, (<span class="pl-s1">rmin</span>, <span class="pl-s1">rmax</span>, <span class="pl-s1">cmin</span>, <span class="pl-s1">cmax</span>) <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-v">FACES</span>, <span class="pl-c1">1</span>):
        <span class="pl-k">if</span> <span class="pl-s1">rmin</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">r</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">rmax</span> <span class="pl-c1">and</span> <span class="pl-s1">cmin</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">c</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">cmax</span>:
            <span class="pl-k">return</span> <span class="pl-s1">face_id</span>, <span class="pl-s1">r</span> <span class="pl-c1">-</span> <span class="pl-s1">rmin</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span>, <span class="pl-s1">c</span> <span class="pl-c1">-</span> <span class="pl-s1">cmin</span> <span class="pl-c1">+</span> <span class="pl-c1">1</span></pre></div>
<p dir="auto">Now we'll need a new <code>step()</code> function, let's call it <code>step_cube()</code>. First,
we'll calculate the new position as if we don't need to wrap. If the new
position is not an empty cell we're done, otherwise we'll need to wrap around.
Using the <code>face()</code> function, we can identify the current face and calcualte the
relative position within it. Then, the logic to apply is pretty boring and
repetitive, but the reasoning is the same as explained above for face 1. I'm not
going to copy-paste the entire function here as it's quite long, but you can
check it out in my <a href="/mebeim/aoc/blob/master/2022/solutions/day22.py">complete solution</a>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def step_cube(r, c, direction):
    dr, dc = DIRMAP[direction]
    newr = r + dr
    newc = c + dc

    if grid[newr][newc] != EMPTY:
        return newr, newc, direction

    # We fell off an edge, we need to wrap to another face...
    face_id, fr, fc = face(r, c)
    # fr = face-relative row (from the top left of the face)
    # fc = face-relative column (from the top left of the face)

    if face_id == 1:
        if direction == UP:
            # We'll end up on face 6 going right, the new row will be 150 + the
            # distance from the left of face 1 (i.e. fr), and the new column is
            # always 1.
            return fc + 150, 1, RIGHT

        # direction == LEFT -&gt; we'll end up on face 4 going right, the new row
        # will be 100 + the distance from the *bottom* of face 1 (i.e. 51 - fr),
        # and the new column is always 1.
        return (51 - fr) + 100, 1, RIGHT

    if face_id == 2:
        ...

    # ... and so on for all the other faces..."><pre><span class="pl-k">def</span> <span class="pl-en">step_cube</span>(<span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">direction</span>):
    <span class="pl-s1">dr</span>, <span class="pl-s1">dc</span> <span class="pl-c1">=</span> <span class="pl-v">DIRMAP</span>[<span class="pl-s1">direction</span>]
    <span class="pl-s1">newr</span> <span class="pl-c1">=</span> <span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-s1">dr</span>
    <span class="pl-s1">newc</span> <span class="pl-c1">=</span> <span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-s1">dc</span>

    <span class="pl-k">if</span> <span class="pl-s1">grid</span>[<span class="pl-s1">newr</span>][<span class="pl-s1">newc</span>] <span class="pl-c1">!=</span> <span class="pl-v">EMPTY</span>:
        <span class="pl-k">return</span> <span class="pl-s1">newr</span>, <span class="pl-s1">newc</span>, <span class="pl-s1">direction</span>

    <span class="pl-c"># We fell off an edge, we need to wrap to another face...</span>
    <span class="pl-s1">face_id</span>, <span class="pl-s1">fr</span>, <span class="pl-s1">fc</span> <span class="pl-c1">=</span> <span class="pl-en">face</span>(<span class="pl-s1">r</span>, <span class="pl-s1">c</span>)
    <span class="pl-c"># fr = face-relative row (from the top left of the face)</span>
    <span class="pl-c"># fc = face-relative column (from the top left of the face)</span>

    <span class="pl-k">if</span> <span class="pl-s1">face_id</span> <span class="pl-c1">==</span> <span class="pl-c1">1</span>:
        <span class="pl-k">if</span> <span class="pl-s1">direction</span> <span class="pl-c1">==</span> <span class="pl-v">UP</span>:
            <span class="pl-c"># We'll end up on face 6 going right, the new row will be 150 + the</span>
            <span class="pl-c"># distance from the left of face 1 (i.e. fr), and the new column is</span>
            <span class="pl-c"># always 1.</span>
            <span class="pl-k">return</span> <span class="pl-s1">fc</span> <span class="pl-c1">+</span> <span class="pl-c1">150</span>, <span class="pl-c1">1</span>, <span class="pl-v">RIGHT</span>

        <span class="pl-c"># direction == LEFT -&gt; we'll end up on face 4 going right, the new row</span>
        <span class="pl-c"># will be 100 + the distance from the *bottom* of face 1 (i.e. 51 - fr),</span>
        <span class="pl-c"># and the new column is always 1.</span>
        <span class="pl-k">return</span> (<span class="pl-c1">51</span> <span class="pl-c1">-</span> <span class="pl-s1">fr</span>) <span class="pl-c1">+</span> <span class="pl-c1">100</span>, <span class="pl-c1">1</span>, <span class="pl-v">RIGHT</span>

    <span class="pl-k">if</span> <span class="pl-s1">face_id</span> <span class="pl-c1">==</span> <span class="pl-c1">2</span>:
        ...

    <span class="pl-c"># ... and so on for all the other faces...</span></pre></div>
<p dir="auto">As you may have noticed above, the new <code>step_cube()</code> function also returns the
new direction to move in, since changing face also changes the direction we are
facing from the perspective of our 2D net. We can generalize our existing
<code>walk()</code> function to take the step function to use as an argument with a couple
of modifications:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="-def walk(grid, moves):
+def walk(grid, moves, step_func=step):
     r = 1
     c = grid[1].index(FREE)
     d = RIGHT

     for move in moves:
         if move == 'L':
             d = (d - 1) % 4
         elif move == 'R':
             d = (d + 1) % 4
         else:
             for _ in range(move):
-                newr, newc = step(r, c, d)
+                newr, newc, newd = step_func(r, c, d)
                 if grid[newr][newc] == WALL:
                     break

-                r, c = newr, newc
+                r, c, d = newr, newc, newd

     return 1000 * r + 4 * c + d"><pre><span class="pl-md"><span class="pl-md">-</span>def walk(grid, moves):</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>def walk(grid, moves, step_func=step):</span>
     r = 1
     c = grid[1].index(FREE)
     d = RIGHT

     for move in moves:
         if move == 'L':
             d = (d - 1) % 4
         elif move == 'R':
             d = (d + 1) % 4
         else:
             for _ in range(move):
<span class="pl-md"><span class="pl-md">-</span>                newr, newc = step(r, c, d)</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>                newr, newc, newd = step_func(r, c, d)</span>
                 if grid[newr][newc] == WALL:
                     break

<span class="pl-md"><span class="pl-md">-</span>                r, c = newr, newc</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>                r, c, d = newr, newc, newd</span>

     return 1000 * r + 4 * c + d</pre></div>
<p dir="auto">Given the way we modified <code>walk()</code> we also need to return a direction from our
original <code>step()</code> function, so let's do that:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content=" def step(r, c, direction):
     # ...

-    return r, c
+    return r, c, direction"><pre> def step(r, c, direction):
     # ...

<span class="pl-md"><span class="pl-md">-</span>    return r, c</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    return r, c, direction</span></pre></div>
<p dir="auto">The final solution is again only one function call away:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = walk(grid, moves, step_cube)
print('Part 2:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">walk</span>(<span class="pl-s1">grid</span>, <span class="pl-s1">moves</span>, <span class="pl-s1">step_cube</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-24---blizzard-basin" class="anchor" aria-hidden="true" href="#day-24---blizzard-basin"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 24 - Blizzard Basin</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/24" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day24.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<h3 dir="auto"><a id="user-content-part-1-21" class="anchor" aria-hidden="true" href="#part-1-21"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 1</h3>
<p dir="auto">Today's problem involves pathfinding, but with a twist. We are in a rectangular
grid surrounded by walls (<code>#</code>), where each cell is either free or represents <em>a
blizzard</em> (<code>&lt;</code>, <code>&gt;</code>, <code>^</code>, <code>v</code>). Given a start (2nd column of the first row) and
a destination (second-to-last column of the last row), we need to navigate the
grid being careful not to step in a blizzard or into a wall.</p>
<p dir="auto">Problem is, each instant of time, every blizzard moves forward one step in the
direction it is facing (i.e. <code>&gt;</code> moves to the right). Whenever a blizzard
reaches one of the four walls of the grid, it wraps around the same row/column,
continuing from the opposite side. Furthermore, a single cell can contain more
than one blizzard (each going in a different direction) at any given time.</p>
<p dir="auto">Each instant of time we can either move in one of the 4 cardinal directions
(north, south, east, west) or wait in place. We need to calculate the minimum
amount amount of time needed to reach the destination avoiding blizzards.</p>
<p dir="auto">Let's start by parsing the input into a grid: after reading the entire input,
<a href="https://docs.python.org/3/library/stdtypes.html#str.splitlines" rel="nofollow"><code>.splitlines()</code></a> is all we need.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    grid = fin.read().splitlines()"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">grid</span> <span class="pl-c1">=</span> <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">splitlines</span>()</pre></div>
<p dir="auto">Now, if it weren't for the added difficulty of the moving blizzards, today's
solution would be standard <a href="https://en.wikipedia.org/wiki/Breadth-first_search" rel="nofollow">BFS</a> on a grid. However, we'll need to
simulate the evolution of the blizzard in time. Keeping around the actual grid
and editing its content each iteration is slow and error-prone. The simplest way
to represent cells occupied by a blizzard would be a <code>set()</code> of coordinates so
that we can easily check whether a certain position contains any blizzard with
<code>(r, c) in blizzard</code>. However, this is not enough as we also need to keep track
of the direction each blizzard is moving. To do this, we can use a dictionary of
the form <code>{coords: list_of_directions}</code>: each cell (at a given coordinate) can
contain more than one blizzard at a given time, so this is an easy way to track
both the number of blizzards present and all their directions.</p>
<p dir="auto">A minimal example can help understand how multiple blizzards going in different
directions can end up overlapping on the same cell:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#.#####       #.#####       #.#####       #.#####
#.&gt;.&lt;.#  ==&gt;  #..2..#  ==&gt;  #.&lt;.&gt;.#  ==&gt;  #&lt;...&gt;# ==&gt; ...
#####.#       #####.#       #####.#       #####.#"><pre lang="none" class="notranslate"><code>#.#####       #.#####       #.#####       #.#####
#.&gt;.&lt;.#  ==&gt;  #..2..#  ==&gt;  #.&lt;.&gt;.#  ==&gt;  #&lt;...&gt;# ==&gt; ...
#####.#       #####.#       #####.#       #####.#
</code></pre></div>
<p dir="auto">To easily advance each blizzard in the right direction, we can remember
directions as tuples of the form <code>(delta_r, delta_c)</code>. Let's create a map that
associates each character representing a blizzard with one of these:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="DIRMAP = {
    '&gt;': ( 0,  1),
    '&lt;': ( 0, -1),
    'v': ( 1,  0),
    '^': (-1,  0),
}"><pre><span class="pl-v">DIRMAP</span> <span class="pl-c1">=</span> {
    <span class="pl-s">'&gt;'</span>: ( <span class="pl-c1">0</span>,  <span class="pl-c1">1</span>),
    <span class="pl-s">'&lt;'</span>: ( <span class="pl-c1">0</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>),
    <span class="pl-s">'v'</span>: ( <span class="pl-c1">1</span>,  <span class="pl-c1">0</span>),
    <span class="pl-s">'^'</span>: (<span class="pl-c1">-</span><span class="pl-c1">1</span>,  <span class="pl-c1">0</span>),
}</pre></div>
<p dir="auto">We know that each blizzard will wrap around and continue from the opposite side
of the row/column once it reaches a wall: if we discard all walls and only
consider the internal rectangle (enclosed in the walls) as the grid to work on,
the first row and column will start at <code>0</code>, and wrapping around can later be
handled with a modulo operation, e.g. <code>(row + 1) % height</code>.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="  01234567
0 #.######            012345
1 #&gt;&gt;.&lt;^&lt;#          0 &gt;&gt;.&lt;^&lt;
2 #.&lt;..&lt;&lt;#  =====&gt;  1 .&lt;..&lt;&lt;
3 #&gt;v.&gt;&lt;&gt;#          2 &gt;v.&gt;&lt;&gt;
5 ######.#
Actual grid      Simplified grid"><pre lang="none" class="notranslate"><code>  01234567
0 #.######            012345
1 #&gt;&gt;.&lt;^&lt;#          0 &gt;&gt;.&lt;^&lt;
2 #.&lt;..&lt;&lt;#  =====&gt;  1 .&lt;..&lt;&lt;
3 #&gt;v.&gt;&lt;&gt;#          2 &gt;v.&gt;&lt;&gt;
5 ######.#
Actual grid      Simplified grid
</code></pre></div>
<p dir="auto">Let's now iterate over the grid, ignoring the first and last row and the first
and last column of each row (which we know are all going to be walls). For each
blizzard we encounter, we'll remember its position and direction. The
<a href="https://docs.python.org/3/library/functions.html#enumerate" rel="nofollow"><code>enumerate()</code></a> built-in comes in handy here.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bliz = {}

for r, row in enumerate(grid[1:-1]):
    for c, cell in enumerate(row[1:-1]):
        if cell in DIRMAP:
            # There's a blizzard here (&lt; &gt; ^ v). Its directoin (delta_r, delta_c)
            # is given by the DIRMAP we created above.
            bliz[r, c] = [DIRMAP[cell]]"><pre><span class="pl-s1">bliz</span> <span class="pl-c1">=</span> {}

<span class="pl-k">for</span> <span class="pl-s1">r</span>, <span class="pl-s1">row</span> <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">grid</span>[<span class="pl-c1">1</span>:<span class="pl-c1">-</span><span class="pl-c1">1</span>]):
    <span class="pl-k">for</span> <span class="pl-s1">c</span>, <span class="pl-s1">cell</span> <span class="pl-c1">in</span> <span class="pl-en">enumerate</span>(<span class="pl-s1">row</span>[<span class="pl-c1">1</span>:<span class="pl-c1">-</span><span class="pl-c1">1</span>]):
        <span class="pl-k">if</span> <span class="pl-s1">cell</span> <span class="pl-c1">in</span> <span class="pl-v">DIRMAP</span>:
            <span class="pl-c"># There's a blizzard here (&lt; &gt; ^ v). Its directoin (delta_r, delta_c)</span>
            <span class="pl-c"># is given by the DIRMAP we created above.</span>
            <span class="pl-s1">bliz</span>[<span class="pl-s1">r</span>, <span class="pl-s1">c</span>] <span class="pl-c1">=</span> [<span class="pl-v">DIRMAP</span>[<span class="pl-s1">cell</span>]]</pre></div>
<p dir="auto">Since we discarded the external walls, the actual height and width of the
internal rectangle are 2 units less than the original grid's height and width.
The starting position is now at the first column of the row immediately above
the first one, and the destination is at the last column of the row immediately
below the last one. Let's calculate these values for later:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="height, width = len(grid) - 2, len(grid[0]) - 2
src, dst = (-1, 0), (height, width - 1)"><pre><span class="pl-s1">height</span>, <span class="pl-s1">width</span> <span class="pl-c1">=</span> <span class="pl-en">len</span>(<span class="pl-s1">grid</span>) <span class="pl-c1">-</span> <span class="pl-c1">2</span>, <span class="pl-en">len</span>(<span class="pl-s1">grid</span>[<span class="pl-c1">0</span>]) <span class="pl-c1">-</span> <span class="pl-c1">2</span>
<span class="pl-s1">src</span>, <span class="pl-s1">dst</span> <span class="pl-c1">=</span> (<span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">0</span>), (<span class="pl-s1">height</span>, <span class="pl-s1">width</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>)</pre></div>
<p dir="auto">Now into the actual guts of the problem: let's write a function to "evolve" the
current blizzards moving each of them one step forward, and returning a new
dictionary representing the new state of the blizzards. Each key in the <code>bliz</code>
dictionary we just created represents the coordinates of a cell containing one
or more blizzards, and their directions are listed in the associated value (a
<code>list</code>).</p>
<p dir="auto">We can iterate over the <a href="https://docs.python.org/3/library/stdtypes.html#dict.items" rel="nofollow"><code>.items()</code></a> of the dictionary, applying
the deltas listed in the directions for each coordinate. A
<a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow"><code>defaultdict</code></a> of <code>list</code> makes the whole operation
more convenient.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from collections import defaultdict

def evolve_blizzard(bliz, width, height):
    newbliz = defaultdict(list)

    for (r, c), directions in bliz.items():
        for dr, dc in directions:
            newr = (r + dr) % height
            newc = (c + dc) % width
            newbliz[newr, newc].append((dr, dc))

    return newbliz"><pre><span class="pl-k">from</span> <span class="pl-s1">collections</span> <span class="pl-k">import</span> <span class="pl-s1">defaultdict</span>

<span class="pl-k">def</span> <span class="pl-en">evolve_blizzard</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">width</span>, <span class="pl-s1">height</span>):
    <span class="pl-s1">newbliz</span> <span class="pl-c1">=</span> <span class="pl-en">defaultdict</span>(<span class="pl-s1">list</span>)

    <span class="pl-k">for</span> (<span class="pl-s1">r</span>, <span class="pl-s1">c</span>), <span class="pl-s1">directions</span> <span class="pl-c1">in</span> <span class="pl-s1">bliz</span>.<span class="pl-en">items</span>():
        <span class="pl-k">for</span> <span class="pl-s1">dr</span>, <span class="pl-s1">dc</span> <span class="pl-c1">in</span> <span class="pl-s1">directions</span>:
            <span class="pl-s1">newr</span> <span class="pl-c1">=</span> (<span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-s1">dr</span>) <span class="pl-c1">%</span> <span class="pl-s1">height</span>
            <span class="pl-s1">newc</span> <span class="pl-c1">=</span> (<span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-s1">dc</span>) <span class="pl-c1">%</span> <span class="pl-s1">width</span>
            <span class="pl-s1">newbliz</span>[<span class="pl-s1">newr</span>, <span class="pl-s1">newc</span>].<span class="pl-en">append</span>((<span class="pl-s1">dr</span>, <span class="pl-s1">dc</span>))

    <span class="pl-k">return</span> <span class="pl-s1">newbliz</span></pre></div>
<p dir="auto">Given the coordinates of our position and current the state of the blizzards, we
can now calculate all the possible neighboring coordinates we can move to. These
will be the ones inside the bounds of our simplified grid and not overlapping
with any blizzard. In addition to those, we can also stand still if a blizzard
does not hit us. Finally, one last thing to consider is that our destination is
at the last column and one row below the last row, which is technically out of
bounds: we can special-case this check.</p>
<p dir="auto">Let's write a <a href="https://docs.python.org/3/howto/functional.html#generators" rel="nofollow">generator function</a> to <code>yield</code> all valid
coordinates we can move to given the current position.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def neighbors(bliz, r, c, height, width):
    # Right above the destination? Even if out of bounds, that's also a valid position to move to.
    if r == height - 1 and c == width - 1:
        yield height, c

    # For each of the 4 cardinal directions...
    for dr, dc in ((0, 1), (1, 0), (0, -1), (-1, 0)):
        rr, cc = r + dr, c + dc
        # ... check if we are in bounds and if there is NO blizzard here...
        if 0 &lt;= rr &lt; height and 0 &lt;= cc &lt; width and (rr, cc) not in bliz:
            # ... if so, we can move here.
            yield rr, cc

    # We can also stand still if no blizzard hits us.
    if (r, c) not in bliz:
        yield r, c"><pre><span class="pl-k">def</span> <span class="pl-en">neighbors</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">r</span>, <span class="pl-s1">c</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>):
    <span class="pl-c"># Right above the destination? Even if out of bounds, that's also a valid position to move to.</span>
    <span class="pl-k">if</span> <span class="pl-s1">r</span> <span class="pl-c1">==</span> <span class="pl-s1">height</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span> <span class="pl-c1">and</span> <span class="pl-s1">c</span> <span class="pl-c1">==</span> <span class="pl-s1">width</span> <span class="pl-c1">-</span> <span class="pl-c1">1</span>:
        <span class="pl-k">yield</span> <span class="pl-s1">height</span>, <span class="pl-s1">c</span>

    <span class="pl-c"># For each of the 4 cardinal directions...</span>
    <span class="pl-k">for</span> <span class="pl-s1">dr</span>, <span class="pl-s1">dc</span> <span class="pl-c1">in</span> ((<span class="pl-c1">0</span>, <span class="pl-c1">1</span>), (<span class="pl-c1">1</span>, <span class="pl-c1">0</span>), (<span class="pl-c1">0</span>, <span class="pl-c1">-</span><span class="pl-c1">1</span>), (<span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-c1">0</span>)):
        <span class="pl-s1">rr</span>, <span class="pl-s1">cc</span> <span class="pl-c1">=</span> <span class="pl-s1">r</span> <span class="pl-c1">+</span> <span class="pl-s1">dr</span>, <span class="pl-s1">c</span> <span class="pl-c1">+</span> <span class="pl-s1">dc</span>
        <span class="pl-c"># ... check if we are in bounds and if there is NO blizzard here...</span>
        <span class="pl-k">if</span> <span class="pl-c1">0</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">rr</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">height</span> <span class="pl-c1">and</span> <span class="pl-c1">0</span> <span class="pl-c1">&lt;=</span> <span class="pl-s1">cc</span> <span class="pl-c1">&lt;</span> <span class="pl-s1">width</span> <span class="pl-c1">and</span> (<span class="pl-s1">rr</span>, <span class="pl-s1">cc</span>) <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">bliz</span>:
            <span class="pl-c"># ... if so, we can move here.</span>
            <span class="pl-k">yield</span> <span class="pl-s1">rr</span>, <span class="pl-s1">cc</span>

    <span class="pl-c"># We can also stand still if no blizzard hits us.</span>
    <span class="pl-k">if</span> (<span class="pl-s1">r</span>, <span class="pl-s1">c</span>) <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">bliz</span>:
        <span class="pl-k">yield</span> <span class="pl-s1">r</span>, <span class="pl-s1">c</span></pre></div>
<p dir="auto">Now for the heart of the problem: as anticipated, we can perform an iterative
<a href="https://en.wikipedia.org/wiki/Breadth-first_search" rel="nofollow">breadth-first search</a> from the starting position until we reach the
destination, tracking <em>time</em> instead of <em>distance</em>. This works because each
"step" we take is unitary, meaning it advances the time of exactly 1 unit.
Contrary to a "traditional" BFS though, in this case we can re-visit cells more
than once. In fact, merely standing still means only advancing the time,
visiting the same cell two times in a row. We can therefore avoid keeping track
of visited cells, but we still need to keep track of where we are.</p>
<p dir="auto">We'll keep track of all the possible positions we can be at the current time
using a <code>set</code>. A <code>list</code> or another similar dat structure would still work, but
we'd have to deal with unneeded duplicates, and a <code>set</code> takes care of those for
us. Initially (<code>time = 0</code>) this will only include the start position. We'll then
advance one step forward in time each iteration, evolving the blizzards and
figuring out the new reachable positions given by applying the <code>neighbors</code>
function to all the current positions we are tracking. If we ever find the
destination among those, we can stop and return the current time.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def bfs(bliz, src, dst, height, width):
    positions = {src}
    time = 0

    # While the destination is not reached.
    while dst not in positions:
        # Advance time and evolve blizzards moving them around.
        time += 1
        bliz = evolve_blizzard(bliz, width, height)

        # For each possible position we are tracking, calculate the next valid
        # positions, and add them to a new set.
        new_positions = set()
        for pos in positions:
            neighs = neighbors(bliz, *pos, height, width)
            new_positions.update(neighs)

        # Track these new positions in the next iteration.
        positions = new_position

    return time"><pre><span class="pl-k">def</span> <span class="pl-en">bfs</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">src</span>, <span class="pl-s1">dst</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>):
    <span class="pl-s1">positions</span> <span class="pl-c1">=</span> {<span class="pl-s1">src</span>}
    <span class="pl-s1">time</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-c"># While the destination is not reached.</span>
    <span class="pl-k">while</span> <span class="pl-s1">dst</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">positions</span>:
        <span class="pl-c"># Advance time and evolve blizzards moving them around.</span>
        <span class="pl-s1">time</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
        <span class="pl-s1">bliz</span> <span class="pl-c1">=</span> <span class="pl-en">evolve_blizzard</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">width</span>, <span class="pl-s1">height</span>)

        <span class="pl-c"># For each possible position we are tracking, calculate the next valid</span>
        <span class="pl-c"># positions, and add them to a new set.</span>
        <span class="pl-s1">new_positions</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>()
        <span class="pl-k">for</span> <span class="pl-s1">pos</span> <span class="pl-c1">in</span> <span class="pl-s1">positions</span>:
            <span class="pl-s1">neighs</span> <span class="pl-c1">=</span> <span class="pl-en">neighbors</span>(<span class="pl-s1">bliz</span>, <span class="pl-c1">*</span><span class="pl-s1">pos</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>)
            <span class="pl-s1">new_positions</span>.<span class="pl-en">update</span>(<span class="pl-s1">neighs</span>)

        <span class="pl-c"># Track these new positions in the next iteration.</span>
        <span class="pl-s1">positions</span> <span class="pl-c1">=</span> <span class="pl-s1">new_position</span>

    <span class="pl-k">return</span> <span class="pl-s1">time</span></pre></div>
<p dir="auto">We can also refactor the above inner loop into an <code>advance()</code> generator function
that takes a set of positions and yields any new valid position:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def advance(bliz, positions, height, width):
    for pos in positions:
        yield from neighbors(bliz, *pos, height, width)"><pre><span class="pl-k">def</span> <span class="pl-en">advance</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">positions</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>):
    <span class="pl-k">for</span> <span class="pl-s1">pos</span> <span class="pl-c1">in</span> <span class="pl-s1">positions</span>:
        <span class="pl-k">yield</span> <span class="pl-k">from</span> <span class="pl-en">neighbors</span>(<span class="pl-s1">bliz</span>, <span class="pl-c1">*</span><span class="pl-s1">pos</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>)</pre></div>
<p dir="auto">This makes the body of our <code>bfs()</code> function slimmer:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def bfs(bliz, src, dst, height, width):
    positions = {src}
    time = 0

    while dst not in positions:
        time += 1
        bliz = evolve_blizzard(bliz, width, height)
        positions = set(advance(bliz, positions, height, width))

    return time"><pre><span class="pl-k">def</span> <span class="pl-en">bfs</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">src</span>, <span class="pl-s1">dst</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>):
    <span class="pl-s1">positions</span> <span class="pl-c1">=</span> {<span class="pl-s1">src</span>}
    <span class="pl-s1">time</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-k">while</span> <span class="pl-s1">dst</span> <span class="pl-c1">not</span> <span class="pl-c1">in</span> <span class="pl-s1">positions</span>:
        <span class="pl-s1">time</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>
        <span class="pl-s1">bliz</span> <span class="pl-c1">=</span> <span class="pl-en">evolve_blizzard</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">width</span>, <span class="pl-s1">height</span>)
        <span class="pl-s1">positions</span> <span class="pl-c1">=</span> <span class="pl-en">set</span>(<span class="pl-en">advance</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">positions</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>))

    <span class="pl-k">return</span> <span class="pl-s1">time</span></pre></div>
<p dir="auto">All that's left to do is call the above function with the right parameters:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="time = bfs(bliz, src, dst, height, width)
print('Part 1:', time)"><pre><span class="pl-s1">time</span> <span class="pl-c1">=</span> <span class="pl-en">bfs</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">src</span>, <span class="pl-s1">dst</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">time</span>)</pre></div>
<h3 dir="auto"><a id="user-content-part-2-21" class="anchor" aria-hidden="true" href="#part-2-21"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Part 2</h3>
<p dir="auto">After reaching the destination, we need to go back to the start, and then go
back to the destination again. The end goal is still to figure out the minimum
amount of time needed, but the path is now longer.</p>
<p dir="auto">No big deal, we already have almost all we need, we only need to make a few
modifications to our functions. First of all, since now we can also go back to
the starting position, we need to special-case that too in the <code>neighbors()</code>
function:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content=" def neighbors(bliz, r, c, height, width):
-    if r == height - 1 and c == width - 1:
+    if r == 0 and c == 0:
+        yield -1, 0
+     elif r == height - 1 and c == width - 1:
         yield height, c

     # ... unchanged ..."><pre> def neighbors(bliz, r, c, height, width):
<span class="pl-md"><span class="pl-md">-</span>    if r == height - 1 and c == width - 1:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    if r == 0 and c == 0:</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>        yield -1, 0</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>     elif r == height - 1 and c == width - 1:</span>
         yield height, c

     # ... unchanged ...</pre></div>
<p dir="auto">Secondly, we now need to remember the final state of all the blizzards after the
first search. We can just return that along with the time in our <code>bfs()</code>
function:</p>
<div class="highlight highlight-source-diff notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content=" def bfs(bliz, src, dst, height, width):
     # ... unchanged ...

-    return time
+    return time, bliz"><pre> def bfs(bliz, src, dst, height, width):
     # ... unchanged ...

<span class="pl-md"><span class="pl-md">-</span>    return time</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    return time, bliz</span></pre></div>
<p dir="auto">After solving part 1, we'll overwrite the <code>bliz</code> variable with the new state:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="time1, bliz = bfs(bliz, src, dst, height, width)
print('Part 1:', time1)"><pre><span class="pl-s1">time1</span>, <span class="pl-s1">bliz</span> <span class="pl-c1">=</span> <span class="pl-en">bfs</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">src</span>, <span class="pl-s1">dst</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">time1</span>)</pre></div>
<p dir="auto">And for part 2, we'll now perform two more <code>bfs()</code> calls: one to go back to
<code>src</code> from <code>dst</code>, and one to go back to <code>dst</code> again. The total time taken will
will be the sum of the 3 times.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="time2, blitz = bfs(bliz, dst, src, height, width)
time3, _     = bfs(bliz, src, dst, height, width)
total_time = time1 + time2 + time3
print('Part 2:', total_time)"><pre><span class="pl-s1">time2</span>, <span class="pl-s1">blitz</span> <span class="pl-c1">=</span> <span class="pl-en">bfs</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">dst</span>, <span class="pl-s1">src</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>)
<span class="pl-s1">time3</span>, <span class="pl-s1">_</span>     <span class="pl-c1">=</span> <span class="pl-en">bfs</span>(<span class="pl-s1">bliz</span>, <span class="pl-s1">src</span>, <span class="pl-s1">dst</span>, <span class="pl-s1">height</span>, <span class="pl-s1">width</span>)
<span class="pl-s1">total_time</span> <span class="pl-c1">=</span> <span class="pl-s1">time1</span> <span class="pl-c1">+</span> <span class="pl-s1">time2</span> <span class="pl-c1">+</span> <span class="pl-s1">time3</span>
<span class="pl-en">print</span>(<span class="pl-s">'Part 2:'</span>, <span class="pl-s1">total_time</span>)</pre></div>
<h2 dir="auto"><a id="user-content-day-25---full-of-hot-air" class="anchor" aria-hidden="true" href="#day-25---full-of-hot-air"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Day 25 - Full of Hot Air</h2>
<p dir="auto"><a href="https://adventofcode.com/2022/day/25" rel="nofollow">Problem statement</a> â€” <a href="/mebeim/aoc/blob/master/2022/solutions/day25.py">Complete solution</a> â€” <a href="#advent-of-code-2022-walkthrough">Back to top</a></p>
<p dir="auto">Last problem of the year, and a fairly simple one thankfully. We are given a
list of numbers in a weird base-5 representation called "SNAFU"
(<a href="https://en.wikipedia.org/wiki/SNAFU" rel="nofollow">LOL at this name choice</a>). The digits used are <code>210-=</code>, where <code>-</code>
means <em>-1</em> and <code>=</code> means <em>-2</em>. We need to sum all these numbers, and calculate
the total <em>in the same base</em> (i.e. using these digits).</p>
<p dir="auto">The first thing we'll need is a function to convert from SNAFU (weird base 5) to
base 10. It's fairly straightforward: given a number, iterate over its digits,
convert them to their actual values, and multiply by the appropriate power of 5,
accumulating the result. For simplicity, let's use a <code>dict</code> to map SNAFU digits
to their actual values:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="VALUES = {'=': -2, '-': -1, '0': 0, '1': 1, '2': 2}"><pre><span class="pl-v">VALUES</span> <span class="pl-c1">=</span> {<span class="pl-s">'='</span>: <span class="pl-c1">-</span><span class="pl-c1">2</span>, <span class="pl-s">'-'</span>: <span class="pl-c1">-</span><span class="pl-c1">1</span>, <span class="pl-s">'0'</span>: <span class="pl-c1">0</span>, <span class="pl-s">'1'</span>: <span class="pl-c1">1</span>, <span class="pl-s">'2'</span>: <span class="pl-c1">2</span>}</pre></div>
<p dir="auto">Then, for the actual conversion, we can either start with <em>5<sup>0</sup></em> (1) or
and iterate over the digits in reverse order, or start with <em>5<sup>L-1</sup></em>
(where <em>L</em> is the total number of digits) and iterate normally. I chose the
latter.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def base10(n):
    power = 5 ** (len(n) - 1)
    res = 0

    for digit in n:
        res += VALUES[digit] * power
        power //= 5

    return res"><pre><span class="pl-k">def</span> <span class="pl-en">base10</span>(<span class="pl-s1">n</span>):
    <span class="pl-s1">power</span> <span class="pl-c1">=</span> <span class="pl-c1">5</span> <span class="pl-c1">**</span> (<span class="pl-en">len</span>(<span class="pl-s1">n</span>) <span class="pl-c1">-</span> <span class="pl-c1">1</span>)
    <span class="pl-s1">res</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>

    <span class="pl-k">for</span> <span class="pl-s1">digit</span> <span class="pl-c1">in</span> <span class="pl-s1">n</span>:
        <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-v">VALUES</span>[<span class="pl-s1">digit</span>] <span class="pl-c1">*</span> <span class="pl-s1">power</span>
        <span class="pl-s1">power</span> <span class="pl-c1">//=</span> <span class="pl-c1">5</span>

    <span class="pl-k">return</span> <span class="pl-s1">res</span></pre></div>
<p dir="auto">We can now convert every number in our input to base 10 and calculate their sum.
It's just a question of iterating and stripping input lines:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="total = 0
with open(...) as fin:
    for line in fin:
        total += base10(line.strip())"><pre><span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
<span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-k">for</span> <span class="pl-s1">line</span> <span class="pl-c1">in</span> <span class="pl-s1">fin</span>:
        <span class="pl-s1">total</span> <span class="pl-c1">+=</span> <span class="pl-en">base10</span>(<span class="pl-s1">line</span>.<span class="pl-en">strip</span>())</pre></div>
<p dir="auto">Or more concisely, using <a href="https://docs.python.org/3/library/functions.html#map" rel="nofollow"><code>map()</code></a> + <a href="https://docs.python.org/3/library/functions.html#sum" rel="nofollow"><code>sum()</code></a>,
with the help of <a href="https://docs.python.org/3/library/stdtypes.html#str.splitlines" rel="nofollow"><code>.splitlines()</code></a> to automatically trim away
newlines:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="with open(...) as fin:
    total = sum(map(base10, fin.read().split()))"><pre><span class="pl-k">with</span> <span class="pl-en">open</span>(...) <span class="pl-k">as</span> <span class="pl-s1">fin</span>:
    <span class="pl-s1">total</span> <span class="pl-c1">=</span> <span class="pl-en">sum</span>(<span class="pl-en">map</span>(<span class="pl-s1">base10</span>, <span class="pl-s1">fin</span>.<span class="pl-en">read</span>().<span class="pl-en">split</span>()))</pre></div>
<p dir="auto">The opposite conversion, from base 10 to SNAFU, is a little bit trickier. We
cannot do a "normal" base conversion as we are used to (we are, right?), because
we have negative digits (<code>-</code>, <code>=</code>). However, we can start with the code for a
normal conversion and see how we can get there.</p>
<p dir="auto">This is what a normal base 10 to base 5 conversion would look like:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def base10_to_base5(n):
    res = ''

    while n:
        n, digit = divmod(n, 5)
        res += str(digit)

    return res[::-1]"><pre><span class="pl-k">def</span> <span class="pl-en">base10_to_base5</span>(<span class="pl-s1">n</span>):
    <span class="pl-s1">res</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>

    <span class="pl-k">while</span> <span class="pl-s1">n</span>:
        <span class="pl-s1">n</span>, <span class="pl-s1">digit</span> <span class="pl-c1">=</span> <span class="pl-en">divmod</span>(<span class="pl-s1">n</span>, <span class="pl-c1">5</span>)
        <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-en">str</span>(<span class="pl-s1">digit</span>)

    <span class="pl-k">return</span> <span class="pl-s1">res</span>[::<span class="pl-c1">-</span><span class="pl-c1">1</span>]</pre></div>
<p dir="auto">The <a href="https://docs.python.org/3/library/functions.html#divmod" rel="nofollow"><code>divmod()</code></a> built-in used above simply calculates both
quotient and remainder of a division, it's the same as
<code>n, digit = n // 5, n % 5</code>.</p>
<p dir="auto">Now, the problem with the above conversion algorithm is that we will get digits
higher than <code>2</code>, which are not contemplated in SNAFU notation and cannot be
represented. However, <code>3</code> can be seen as <code>5 - 2</code> and <code>4</code> can be seen as <code>5 - 1</code>.
In fact, we can represent <code>3</code> and <code>4</code> with two SNAFU digits: <code>3</code> is <code>1=</code>
(<em>1Ã—5<sup>1</sup> - 2Ã—5<sup>0</sup></em>) and <code>4</code> is <code>1-</code> (<em>1Ã—5<sup>1</sup> -
1Ã—5<sup>0</sup></em>). This also works for higher powers: <em>3Ã—5<sup>7</sup> =
1x5<sup>8</sup> - 2Ã—5<sup>7</sup></em>; <em>4Ã—5<sup>9</sup> = 1x5<sup>10</sup> -
1Ã—5<sup>9</sup></em>. Therefore, for any digit higher than <code>2</code>, we can <em>increment
the next digit of the number, and then "borrow" from it</em>.</p>
<p dir="auto">Given the above, the function to convert a number from base 10 to SNAFU can be
written as follows:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def snafu(n):
    res = ''

    while n:
        n, digit = divmod(n, 5)

        if digit &gt; 2:
            # Add 1 more of the next (higher) power of 5
            n += 1

            # Borrow from it:
            if digit == 3:
                res += '=' # Take 2 x current power of 5.
            else: # digit == 4
                res += '-' # Take 1 x current power of 5.
        else:
            res += str(digit)

    return res[::-1]"><pre><span class="pl-k">def</span> <span class="pl-en">snafu</span>(<span class="pl-s1">n</span>):
    <span class="pl-s1">res</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>

    <span class="pl-k">while</span> <span class="pl-s1">n</span>:
        <span class="pl-s1">n</span>, <span class="pl-s1">digit</span> <span class="pl-c1">=</span> <span class="pl-en">divmod</span>(<span class="pl-s1">n</span>, <span class="pl-c1">5</span>)

        <span class="pl-k">if</span> <span class="pl-s1">digit</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">2</span>:
            <span class="pl-c"># Add 1 more of the next (higher) power of 5</span>
            <span class="pl-s1">n</span> <span class="pl-c1">+=</span> <span class="pl-c1">1</span>

            <span class="pl-c"># Borrow from it:</span>
            <span class="pl-k">if</span> <span class="pl-s1">digit</span> <span class="pl-c1">==</span> <span class="pl-c1">3</span>:
                <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-s">'='</span> <span class="pl-c"># Take 2 x current power of 5.</span>
            <span class="pl-k">else</span>: <span class="pl-c"># digit == 4</span>
                <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-s">'-'</span> <span class="pl-c"># Take 1 x current power of 5.</span>
        <span class="pl-k">else</span>:
            <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-en">str</span>(<span class="pl-s1">digit</span>)

    <span class="pl-k">return</span> <span class="pl-s1">res</span>[::<span class="pl-c1">-</span><span class="pl-c1">1</span>]</pre></div>
<p dir="auto">Compacting and simplifying the above logic, we have:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def snafu(n):
    res = ''

    while n:
        n, digit = divmod(n, 5)
        res += '012=-'[digit]
        n += digit &gt; 2

    return res[::-1]"><pre><span class="pl-k">def</span> <span class="pl-en">snafu</span>(<span class="pl-s1">n</span>):
    <span class="pl-s1">res</span> <span class="pl-c1">=</span> <span class="pl-s">''</span>

    <span class="pl-k">while</span> <span class="pl-s1">n</span>:
        <span class="pl-s1">n</span>, <span class="pl-s1">digit</span> <span class="pl-c1">=</span> <span class="pl-en">divmod</span>(<span class="pl-s1">n</span>, <span class="pl-c1">5</span>)
        <span class="pl-s1">res</span> <span class="pl-c1">+=</span> <span class="pl-s">'012=-'</span>[<span class="pl-s1">digit</span>]
        <span class="pl-s1">n</span> <span class="pl-c1">+=</span> <span class="pl-s1">digit</span> <span class="pl-c1">&gt;</span> <span class="pl-c1">2</span>

    <span class="pl-k">return</span> <span class="pl-s1">res</span>[::<span class="pl-c1">-</span><span class="pl-c1">1</span>]</pre></div>
<p dir="auto">All that's left to do is convert the total we previously calculated:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="answer = snafu(total)
print('Part 1:', answer)"><pre><span class="pl-s1">answer</span> <span class="pl-c1">=</span> <span class="pl-en">snafu</span>(<span class="pl-s1">total</span>)
<span class="pl-en">print</span>(<span class="pl-s">'Part 1:'</span>, <span class="pl-s1">answer</span>)</pre></div>
<p dir="auto">And as usual, no part 2 for day 25. <em><strong>Merry Christmas!</strong></em></p>
<hr>
<p dir="auto"><em>Copyright Â© 2022 Marco Bonelli. This document is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="nofollow">Creative Commons BY-NC-SA 4.0</a> license.</em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/7af524e82af24d98f89dde7c9c9a3849af52e420a66da140b7c7ae92bf7512d5/68747470733a2f2f6c6963656e7365627574746f6e732e6e65742f6c2f62792d6e632d73612f342e302f38387833312e706e67"><img src="https://camo.githubusercontent.com/7af524e82af24d98f89dde7c9c9a3849af52e420a66da140b7c7ae92bf7512d5/68747470733a2f2f6c6963656e7365627574746f6e732e6e65742f6c2f62792d6e632d73612f342e302f38387833312e706e67" alt="License icon" data-canonical-src="https://licensebuttons.net/l/by-nc-sa/4.0/88x31.png" style="max-width: 100%;"></a></p>
</article>
  </div>

    </div>

  </readme-toc>

  

  <details class="details-reset details-overlay details-overlay-dark" id="jumpto-line-details-dialog">
    <summary data-hotkey="l" aria-label="Jump to line"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast linejump" aria-label="Jump to line">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-jump-to-line-form Box-body d-flex" data-turbo="false" action="" accept-charset="UTF-8" method="get">
        <input class="form-control flex-auto mr-3 linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
          <button data-close-dialog="" type="submit" data-view-component="true" class="btn">    Go
</button>
</form>    </details-dialog>
  </details>



    <div class="pt-3" >
      <details class="details-reset details-overlay details-overlay-dark " >
                <summary data-view-component="true" class="btn-link">    Give feedback
</summary>

  <details-dialog
    class="Box d-flex flex-column anim-fade-in fast Box--overlay overflow-visible"
      aria-label="Provide feedback"
      src="/mebeim/aoc/repos/code_nav_survey"
      
    >
    <div class="Box-header">
      <button class="Box-btn-octicon btn-octicon float-right" type="button" aria-label="Close dialog" data-close-dialog>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
      </button>
        <h1 class="Box-title" >Provide feedback</h1>
    </div>
      <div class="Box-body overflow-auto">
                  <include-fragment>
            <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="32" height="32" viewBox="0 0 16 16" fill="none" data-view-component="true" class="my-3 mx-auto d-block anim-rotate">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" />
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke" />
</svg>
          </include-fragment>

      </div>
  </details-dialog>
</details>
    </div>
</div>

  </div>


  </div>

  </turbo-frame>


    </main>
  </div>

  </div>

          <footer class="footer width-full container-xl p-responsive">
  <h2 class='sr-only'>Footer</h2>

  <div class="position-relative d-flex flex-items-center pb-2 f6 color-fg-muted border-top color-border-muted flex-column-reverse flex-lg-row flex-wrap flex-lg-nowrap mt-6 pt-6">
    <div class="list-style-none d-flex flex-wrap col-0 col-lg-2 flex-justify-start flex-lg-justify-between mb-2 mb-lg-0">
      <div class="mt-2 mt-lg-0 d-flex flex-items-center">
        <a aria-label="Homepage" title="GitHub" class="footer-octicon mr-2" href="https://github.com">
          <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true" class="octicon octicon-mark-github">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg>
</a>        <span>
        &copy; 2023 GitHub, Inc.
        </span>
      </div>
    </div>

    <nav aria-label='footer' class="col-12 col-lg-8">
      <h3 class='sr-only' id='sr-footer-heading'>Footer navigation</h3>
      <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0" aria-labelledby='sr-footer-heading'>
          <li class="mr-3 mr-lg-0"><a href="https://docs.github.com/en/github/site-policy/github-terms-of-service" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to terms&quot;,&quot;label&quot;:&quot;text:terms&quot;}">Terms</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://docs.github.com/site-policy/privacy-policies/github-privacy-statement" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to privacy&quot;,&quot;label&quot;:&quot;text:privacy&quot;}">Privacy</a></li>
          <li class="mr-3 mr-lg-0"><a data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to security&quot;,&quot;label&quot;:&quot;text:security&quot;}" href="https://github.com/security">Security</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://www.githubstatus.com/" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to status&quot;,&quot;label&quot;:&quot;text:status&quot;}">Status</a></li>
          <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to help, text:Docs" href="https://docs.github.com">Docs</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://support.github.com?tags=dotcom-footer" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to contact&quot;,&quot;label&quot;:&quot;text:contact&quot;}">Contact GitHub</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://github.com/pricing" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to Pricing&quot;,&quot;label&quot;:&quot;text:Pricing&quot;}">Pricing</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://docs.github.com" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to api&quot;,&quot;label&quot;:&quot;text:api&quot;}">API</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://services.github.com" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to training&quot;,&quot;label&quot;:&quot;text:training&quot;}">Training</a></li>
          <li class="mr-3 mr-lg-0"><a href="https://github.blog" data-analytics-event="{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to blog&quot;,&quot;label&quot;:&quot;text:blog&quot;}">Blog</a></li>
          <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>
      </ul>
    </nav>
  </div>

  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 color-fg-muted"></span>
  </div>
</footer>




  <div id="ajax-error-message" class="ajax-error-message flash flash-error" hidden>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
    </button>
    You canâ€™t perform that action at this time.
  </div>

  <div class="js-stale-session-flash flash flash-warn flash-banner" hidden
    >
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-alert">
    <path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path>
</svg>
    <span class="js-stale-session-flash-signed-in" hidden>You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="js-stale-session-flash-signed-out" hidden>You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
    <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default color-fg-default hx_rsm" open>
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-x">
    <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
</svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

    <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box color-shadow-large" style="width:360px;">
  </div>
</div>

    <template id="snippet-clipboard-copy-button">
  <div class="zeroclipboard-container position-absolute right-0 top-0">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay" data-copy-feedback="Copied!" data-tooltip-direction="w">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon m-2">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
</svg>
    </clipboard-copy>
  </div>
</template>


    <style>
      .user-mention[href$="/naik-amey"] {
        color: var(--color-user-mention-fg);
        background-color: var(--color-user-mention-bg);
        border-radius: 2px;
        margin-left: -2px;
        margin-right: -2px;
        padding: 0 2px;
      }
    </style>


    </div>

    <div id="js-global-screen-reader-notice" class="sr-only" aria-live="polite" ></div>
  </body>
</html>

